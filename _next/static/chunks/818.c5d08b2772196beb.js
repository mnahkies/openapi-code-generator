"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[818],{32356:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{$:()=>p});var a=r(31132),i=r(87443),o=r(10491),s=e([a]);a=(s.then?(await s)():s)[0];class p extends Array{#e(e,t){for(let[r,n]of this.entries())n===e&&(this[r]=t)}push(...e){for(let t of e){let e;t instanceof o.wL?((0,a.a70)("circular"!==t.kind,"Can't push a circular emit result."),e="none"===t.kind?void 0:t.value):e=t,e instanceof i.O&&e.onValue(t=>this.#e(e,t)),super.push(e)}return e.length}}n()}catch(e){n(e)}})},77722:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{T:()=>l});var a=r(31132),i=r(87443),o=r(10491),s=e([a]);a=(s.then?(await s)():s)[0];let p=Symbol("placeholder");class l{[p];constructor(e={}){let t=e=>{for(let[t,r]of Object.entries(e))this.set(t,r)},r=e=>{e.onValue(t)};e instanceof l?(e[p]&&(this[p]=e[p],r(e[p])),t(e)):e instanceof i.O?(this[p]=e,r(e)):t(e)}set(e,t){let r=t;if(t instanceof o.wL){if((0,a.a70)("circular"!==t.kind,"Can't set a circular emit result."),"none"===t.kind){this[e]=void 0;return}r=t.value}r instanceof i.O&&r.onValue(t=>{this[e]=t}),this[e]=r}}n()}catch(e){n(e)}})},31366:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{$j:()=>i.$,BU:()=>l.B,Jj:()=>a.J,Or:()=>s.O,Tl:()=>o.T});var a=r(32677),i=r(32356),o=r(77722),s=r(87443),p=r(15312),l=r(30131);r(10491);var u=e([a,i,o,p]);[a,i,o,p]=u.then?(await u)():u,n()}catch(e){n(e)}})},30131:(e,t,r)=>{r.d(t,{B:()=>s});var n=r(99728),a=r(24538),i=r(54266),o=r(86838);class s{emitter;constructor(e){this.emitter=e}programContext(e){return{}}namespace(e){for(let t of e.namespaces.values())this.emitter.emitType(t);for(let t of e.models.values())(0,i.rz)(t)||this.emitter.emitType(t);for(let t of e.operations.values())(0,i.rz)(t)||this.emitter.emitType(t);for(let t of e.enums.values())this.emitter.emitType(t);for(let t of e.unions.values())(0,i.rz)(t)||this.emitter.emitType(t);for(let t of e.interfaces.values())(0,i.rz)(t)||this.emitter.emitType(t);for(let t of e.scalars.values())this.emitter.emitType(t);return this.emitter.result.none()}namespaceContext(e){return{}}namespaceReferenceContext(e){return{}}modelLiteral(e){return e.baseModel&&this.emitter.emitType(e.baseModel),this.emitter.emitModelProperties(e),this.emitter.result.none()}modelLiteralContext(e){return{}}modelLiteralReferenceContext(e){return{}}modelDeclaration(e,t){return e.baseModel&&this.emitter.emitType(e.baseModel),this.emitter.emitModelProperties(e),this.emitter.result.none()}modelDeclarationContext(e,t){return{}}modelDeclarationReferenceContext(e,t){return{}}modelInstantiation(e,t){return e.baseModel&&this.emitter.emitType(e.baseModel),this.emitter.emitModelProperties(e),this.emitter.result.none()}modelInstantiationContext(e,t){return{}}modelInstantiationReferenceContext(e,t){return{}}modelProperties(e){for(let t of e.properties.values())this.emitter.emitModelProperty(t);return this.emitter.result.none()}modelPropertiesContext(e){return{}}modelPropertiesReferenceContext(e){return{}}modelPropertyLiteral(e){return this.emitter.emitTypeReference(e.type),this.emitter.result.none()}modelPropertyLiteralContext(e){return{}}modelPropertyLiteralReferenceContext(e){return{}}modelPropertyReference(e){return this.emitter.emitTypeReference(e.type)}enumMemberReference(e){return this.emitter.result.none()}arrayDeclaration(e,t,r){return this.emitter.emitType(e.indexer.value),this.emitter.result.none()}arrayDeclarationContext(e,t,r){return{}}arrayDeclarationReferenceContext(e,t,r){return{}}arrayLiteral(e,t){return this.emitter.result.none()}arrayLiteralContext(e,t){return{}}arrayLiteralReferenceContext(e,t){return{}}scalarDeclaration(e,t){return e.baseScalar&&this.emitter.emitType(e.baseScalar),this.emitter.result.none()}scalarDeclarationContext(e,t){return{}}scalarDeclarationReferenceContext(e,t){return{}}scalarInstantiation(e,t){return this.emitter.result.none()}scalarInstantiationContext(e,t){return{}}intrinsic(e,t){return this.emitter.result.none()}intrinsicContext(e,t){return{}}booleanLiteralContext(e){return{}}booleanLiteral(e){return this.emitter.result.none()}stringTemplateContext(e){return{}}stringTemplate(e){return this.emitter.result.none()}stringLiteralContext(e){return{}}stringLiteral(e){return this.emitter.result.none()}numericLiteralContext(e){return{}}numericLiteral(e){return this.emitter.result.none()}operationDeclaration(e,t){return this.emitter.emitOperationParameters(e),this.emitter.emitOperationReturnType(e),this.emitter.result.none()}operationDeclarationContext(e,t){return{}}operationDeclarationReferenceContext(e,t){return{}}interfaceDeclarationOperationsContext(e){return{}}interfaceDeclarationOperationsReferenceContext(e){return{}}interfaceOperationDeclarationContext(e,t){return{}}interfaceOperationDeclarationReferenceContext(e,t){return{}}operationParameters(e,t){return this.emitter.result.none()}operationParametersContext(e,t){return{}}operationParametersReferenceContext(e,t){return{}}operationReturnType(e,t){return this.emitter.result.none()}operationReturnTypeContext(e,t){return{}}operationReturnTypeReferenceContext(e,t){return{}}interfaceDeclaration(e,t){return this.emitter.emitInterfaceOperations(e),this.emitter.result.none()}interfaceDeclarationContext(e,t){return{}}interfaceDeclarationReferenceContext(e,t){return{}}interfaceDeclarationOperations(e){for(let t of e.operations.values())this.emitter.emitInterfaceOperation(t);return this.emitter.result.none()}interfaceOperationDeclaration(e,t){return this.emitter.emitOperationParameters(e),this.emitter.emitOperationReturnType(e),this.emitter.result.none()}enumDeclaration(e,t){return this.emitter.emitEnumMembers(e),this.emitter.result.none()}enumDeclarationContext(e,t){return{}}enumDeclarationReferenceContext(e,t){return{}}enumMembers(e){for(let t of e.members.values())this.emitter.emitType(t);return this.emitter.result.none()}enumMembersContext(e){return{}}enumMember(e){return this.emitter.result.none()}enumMemberContext(e){return{}}unionDeclaration(e,t){return this.emitter.emitUnionVariants(e),this.emitter.result.none()}unionDeclarationContext(e){return{}}unionDeclarationReferenceContext(e){return{}}unionInstantiation(e,t){return this.emitter.emitUnionVariants(e),this.emitter.result.none()}unionInstantiationContext(e,t){return{}}unionInstantiationReferenceContext(e,t){return{}}unionLiteral(e){return this.emitter.emitUnionVariants(e),this.emitter.result.none()}unionLiteralContext(e){return{}}unionLiteralReferenceContext(e){return{}}unionVariants(e){for(let t of e.variants.values())this.emitter.emitType(t);return this.emitter.result.none()}unionVariantsContext(){return{}}unionVariantsReferenceContext(){return{}}unionVariant(e){return this.emitter.emitTypeReference(e.type),this.emitter.result.none()}unionVariantContext(e){return{}}unionVariantReferenceContext(e){return{}}tupleLiteral(e){return this.emitter.emitTupleLiteralValues(e),this.emitter.result.none()}tupleLiteralContext(e){return{}}tupleLiteralValues(e){for(let t of e.values.values())this.emitter.emitType(t);return this.emitter.result.none()}tupleLiteralValuesContext(e){return{}}tupleLiteralValuesReferenceContext(e){return{}}tupleLiteralReferenceContext(e){return{}}sourceFile(e){let t={path:e.path,contents:""};for(let r of e.globalScope.declarations)t.contents+=r.value+"\n";return t}async writeOutput(e){for(let t of e){let e=await this.emitter.emitSourceFile(t);await (0,a.q)(this.emitter.getProgram(),{path:e.path,content:e.contents})}}reference(e,t,r,n){return this.emitter.result.none()}circularReference(e,t,r){if(!r.containsDeclaration)throw Error(`Circular references to non-declarations are not supported by this emitter. Cycle:
${r}`);if("declaration"!==e.kind)return e;(0,n.a7)(t,"Emit context must have a scope set in order to create references to declarations.");let{pathUp:a,pathDown:i,commonScope:s}=(0,o.M)(e,t);return this.reference(e,a,i,s)}declarationName(e){if((0,n.a7)(void 0!==e.name,"Can't emit a declaration that doesn't have a name."),"Enum"===e.kind||"Intrinsic"===e.kind||"Operation"===e.kind&&e.interface||!e.templateMapper)return e.name;let t=!1,r=e.templateMapper.args.map(e=>{if("Indeterminate"===e.entityKind&&(e=e.type),"kind"in e)switch(e.kind){case"Model":case"Scalar":case"Interface":case"Operation":case"Enum":case"Union":case"Intrinsic":if(!e.name){t=!0;return}let r=this.emitter.emitDeclarationName(e);if(void 0===r){t=!0;return}return r[0].toUpperCase()+r.slice(1);default:t=!0;return}});if(!t)return e.name+r.join("")}}},43113:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{U0:()=>o.U});var a=r(52506),i=r(37318),o=r(58254),s=r(57394),p=e([a,i,s]);[a,i,s]=p.then?(await p)():p,n()}catch(e){n(e)}})},76491:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{B:()=>p,r:()=>s});var a=r(85592),i=r(4055),o=e([a,i]);function s(e,t){let r=(0,i.bi)(e,t);if(r)return r;if(void 0!==t.interface){let r=(0,i.bi)(e,t.interface);if(r)return r}let n=t.namespace;for(;n;){let t=(0,i.bi)(e,n);if(t)return t;n=n.namespace}}function p(e){let t={},r={options:[]},n=new Map;if(e.authentication){let{newServiceSchemes:n,authOptions:a}=l(e.authentication,{});t=n,r=a}for(let r of e.operations)if(r.authentication){let{newServiceSchemes:e,authOptions:a}=l(r.authentication,t);t=e,n.set(r.operation,a)}return{schemes:Object.values(t),defaultAuth:r,operationsAuth:n}}function l(e,t){let r={options:[]};for(let n of e.options){let e={all:[]};for(let r of n.schemes){let n=t[r.id],i=r;if(n){if(function(e,t){let{model:r,...n}=e,{model:i,...o}=t;return"oauth2"===n.type&&"oauth2"===o.type?(0,a.c2)(u(n),u(o)):(0,a.c2)(n,o)}(n,r))"oauth2"===n.type&&"oauth2"===r.type&&(i=function(e,t){let r=(0,a.Go)(e.flows);return r.forEach((e,n)=>{let a=t.flows[n],i=Array.from(new Set(e.scopes.concat(a.scopes)));r[n].scopes=i}),{...e,flows:r}}(n,r));else for(;t[i.id];)i.id=i.id+"_"}let o=function(e,t){if("oauth2"===t.type&&"oauth2"===e.type){let r=[];for(let t of e.flows)r.push(...t.scopes.map(e=>e.value));return{kind:"oauth2",auth:t,scopes:r}}return"noAuth"===t.type?{kind:"noAuth",auth:t}:{kind:"any",auth:t}}(r,i);t[i.id]=i,e.all.push(o)}r.options.push(e)}return{newServiceSchemes:t,authOptions:r}}function u(e){let t=(0,a.Go)(e.flows);return t.forEach(e=>{e.scopes=[]}),{...e,flows:t}}[a,i]=o.then?(await o)():o,n()}catch(e){n(e)}})},29868:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{f:()=>p,v:()=>l});var a=r(7502),i=r(4055),o=r(58382),s=e([a,i,o]);function p(e,t){let r=(0,i.vD)(e,t);return!!(r&&"content-type"===r.toLowerCase())}function l(e){let t=(0,a.z5H)();if("String"===e.type.kind)return[[e.type.value],[]];if("Union"===e.type.kind){let r=[];for(let n of e.type.variants.values())if("String"===n.type.kind)r.push(n.type.value);else{t.add((0,o.og)({code:"content-type-string",target:e}));continue}return t.wrap(r)}return"Scalar"===e.type.kind&&"string"===e.type.name?[["*/*"],[]]:[[],[(0,o.og)({code:"content-type-string",target:e})]]}[a,i,o]=s.then?(await s)():s,n()}catch(e){n(e)}})},4055:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{$G:()=>v,BG:()=>X,Cq:()=>k,FR:()=>z,Fe:()=>_,Fg:()=>V,Fm:()=>q,IZ:()=>f,JC:()=>$,JI:()=>w,JW:()=>F,Kr:()=>T,Kw:()=>m,M5:()=>J,Nt:()=>E,O1:()=>C,RT:()=>x,Rg:()=>D,SE:()=>H,Ul:()=>K,VM:()=>h,Ve:()=>j,Vz:()=>W,_C:()=>y,ar:()=>U,bi:()=>I,gN:()=>d,gP:()=>B,gd:()=>R,h_:()=>g,io:()=>u,lr:()=>et,m_:()=>Z,n7:()=>Q,nm:()=>S,v3:()=>b,vD:()=>c,vT:()=>L,wO:()=>M,yu:()=>ee,zs:()=>Y});var a=r(7502),i=r(58382),o=r(5532),s=r(42068),p=r(33504),l=e([a,i,o,s]);[a,i,o,s]=l.then?(await l)():l;let U=(e,t,r)=>{let n={type:"header",name:t.name.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()};if(r){if("String"===r.kind)n.name=r.value;else{if("Model"!==r.kind)return;let e=r.properties.get("name")?.type;e?.kind==="String"&&(n.name=e.value);let t=r.properties.get("format")?.type;if(t?.kind==="String"){let e=t.value;("csv"===e||"tsv"===e||"pipes"===e||"ssv"===e||"simple"===e||"form"===e||"multi"===e)&&(n.format=e)}}}"Model"===t.type.kind&&(0,a.x3v)(e.program,t.type)&&void 0===n.format&&(0,i.wl)(e.program,{code:"header-format-required",target:e.decoratorTarget}),e.program.stateMap(i._p.header).set(t,n)};function u(e,t){return e.stateMap(i._p.header).get(t)}function c(e,t){return u(e,t)?.name}function d(e,t){return e.stateMap(i._p.header).has(t)}let q=(e,t,r)=>{let n="string"==typeof r?r:r?.name??t.name.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();e.program.stateMap(i._p.cookie).set(t,{type:"cookie",name:n})};function m(e,t){return e.stateMap(i._p.cookie).get(t)}function f(e,t){return e.stateMap(i._p.cookie).has(t)}let V=(e,t,r)=>{let n="string"==typeof r?r:r?.name??t.name,o="object"==typeof r?r:{};o.format&&(0,a.wOB)(e.program,"The `format` option of `@query` decorator is deprecated. Use `explode: true` instead of `form` and `multi`. `csv` or `simple` is the default now.",t);let s={type:"query",explode:o.explode??("multi"===o.format||"form"===o.format),format:o.format,name:n};"Model"===t.type.kind&&(0,a.x3v)(e.program,t.type)&&void 0===s.format&&(s.format=o.explode?"multi":"csv"),e.program.stateMap(i._p.query).set(t,s)};function y(e,t){return e.stateMap(i._p.query).get(t)}function h(e,t){return e.stateMap(i._p.query).has(t)}let B=(e,t,r)=>{let n="string"==typeof r?r:r?.name??t.name,a="object"==typeof r?r:{},o={type:"path",explode:a.explode??!1,allowReserved:a.allowReserved??!1,style:a.style??"simple",name:n};e.program.stateMap(i._p.path).set(t,o)};function g(e,t){return e.stateMap(i._p.path).get(t)}function v(e,t){return e.stateMap(i._p.path).has(t)}let z=(e,t)=>{e.program.stateSet(i._p.body).add(t)},Y=(e,t)=>{e.program.stateSet(i._p.bodyRoot).add(t)},L=(e,t)=>{e.program.stateSet(i._p.bodyIgnore).add(t)};function b(e,t){return e.stateSet(i._p.body).has(t)}function w(e,t){return e.stateSet(i._p.bodyRoot).has(t)}function x(e,t){return e.stateSet(i._p.bodyIgnore).has(t)}let F=(e,t)=>{e.program.stateSet(i._p.multipartBody).add(t)};function M(e,t){return e.stateSet(i._p.multipartBody).has(t)}let J=(e,t)=>{e.program.stateSet(i._p.statusCode).add(t),function(e,t){let r=[];if("String"===t.type.kind)n(e.program,t.type.value,t)&&r.push(t.type.value);else if("Number"===t.type.kind)n(e.program,String(t.type.value),t)&&r.push(String(t.type.value));else if("Union"===t.type.kind)for(let a of t.type.variants.values()){let t=a.type;"String"===t.kind?n(e.program,t.value,t)&&r.push(t.value):"Number"===t.kind&&n(e.program,String(t.value),t)&&r.push(String(t.value))}function n(e,t,r){return!!t.match(/[1-5][0-9][0-9]/)||((0,i.wl)(e,{code:"status-code-invalid",target:r,messageId:"value"}),!1)}e.program.stateMap(i._p.statusCode).set(t,r)}(e,t)};function k(e,t,r){e.stateMap(i._p.statusCode).set(t,r)}function T(e,t){return e.stateMap(i._p.statusCode).has(t)}function S(e,t){return(0,s.B)(e,t,t)}function C(e){if("object"==typeof e)return O(e.start,e.end);let t="string"==typeof e?parseInt(e,10):e;switch(t){case 200:return"The request has succeeded.";case 201:return"The request has succeeded and a new resource has been created as a result.";case 202:return"The request has been accepted for processing, but processing has not yet completed.";case 204:return"There is no content to send for this request, but the headers may be useful. ";case 301:return"The URL of the requested resource has been changed permanently. The new URL is given in the response.";case 304:return"The client has made a conditional request and the resource has not been modified.";case 400:return"The server could not understand the request due to invalid syntax.";case 401:return"Access is unauthorized.";case 403:return"Access is forbidden.";case 404:return"The server cannot find the requested resource.";case 409:return"The request conflicts with the current state of the server.";case 412:return"Precondition failed.";case 503:return"Service unavailable."}return O(t,t)}function O(e,t){return e>=100&&t<=199?"Informational":e>=200&&t<=299?"Successful":e>=300&&t<=399?"Redirection":e>=400&&t<=499?"Client error":e>=500&&t<=599?"Server error":void 0}function $(e,t){return e.stateMap(i._p.verbs).get(t)}function P(e){return(t,r)=>{r.decorators.filter(e=>G.includes(e.decorator)&&e.node?.kind===a.a66.DecoratorExpression&&e.node?.parent===r.node).length>1&&(0,i.wl)(t.program,{code:"http-verb-duplicate",format:{entityName:r.name},target:t.decoratorTarget}),t.program.stateMap(i._p.verbs).set(r,e)}}let _=P("get"),K=P("put"),Q=P("post"),W=P("patch"),H=P("delete"),X=P("head"),G=[_,X,Q,K,W,H],Z=(e,t,r,n,a)=>{let o=(0,p.F)(r),s=new Map(a?.properties??[]);for(let t of o)s.get(t)||((0,i.wl)(e.program,{code:"missing-server-param",format:{param:t},target:e.getArgumentTarget(0)}),s.delete(t));let l=e.program.stateMap(i._p.servers).get(t);void 0===l&&(l=[],e.program.stateMap(i._p.servers).set(t,l)),l.push({url:r,description:n,parameters:s})};function j(e,t){return e.stateMap(i._p.servers).get(t)}function R(e,t,r){(0,a.ehC)(e,t,R);let[n,o]=function(e,t){let r=(0,a.z5H)();switch(t.kind){case"Model":let n=r.pipe(A(e,t,t));if(void 0===n)return r.wrap(void 0);return r.wrap({options:[{schemes:[n]}]});case"Tuple":let o=r.pipe(N(e,t,t));return r.wrap({options:[o]});case"Union":return function(e,t,r){let n=[],o=(0,a.z5H)();for(let a of t.variants.values()){let t=a.type;switch(t.kind){case"Model":let s=o.pipe(A(e,t,r));void 0!==s&&n.push({schemes:[s]});break;case"Tuple":let p=o.pipe(N(e,t,r));n.push(p);break;default:o.add((0,i.og)({code:"invalid-type-for-auth",format:{kind:t.kind},target:t}))}}return o.wrap({options:n})}(e,t,t);default:return[void 0,[(0,i.og)({code:"invalid-type-for-auth",format:{kind:t.kind},target:t})]]}}(e.program,r);o.length>0&&e.program.reportDiagnostics(o),void 0!==n&&function(e,t,r){e.stateMap(i._p.authentication).set(t,r)}(e.program,t,n)}function N(e,t,r){let n=[],o=(0,a.z5H)();for(let a of t.values)if("Model"===a.kind){let t=o.pipe(A(e,a,r));void 0!==t&&n.push(t)}else o.add((0,i.og)({code:"invalid-type-for-auth",format:{kind:a.kind},target:a}));return o.wrap({schemes:n})}function A(e,t,r){let[n,i]=(0,a.bh9)(t,r);if(void 0===n)return[n,i];let o=(0,a.x7B)(e,t);return[{..."oauth2"===n.type?function(e,t){let r=Array.isArray(t.flows)&&t.flows.every(e=>"object"==typeof e)?t.flows:[],n=Array.isArray(t.defaultScopes)?t.defaultScopes:[];return{id:t.id,type:t.type,model:e,flows:r.map(e=>{let t=e.scopes?e.scopes:n;return{...e,scopes:t.map(e=>({value:e}))}})}}(t,n):{...n,model:t},id:t.name||n.type,...o&&{description:o}},i]}function I(e,t){return e.stateMap(i._p.authentication).get(t)}let ee=(e,t,r,n)=>{(0,a.ehC)(e,t,ee);let i=!1,s=n?.properties.get("shared")?.type;void 0!==s&&((0,a.wOB)(e.program,"The `shared` option is deprecated, use the `@sharedRoute` decorator instead.",t),"Boolean"===s.kind&&(i=s.value)),(0,o.gN)(e,t,{path:r,shared:i})},et=(e,t)=>{(0,o.zu)(e.program,t)};function D(e,t,r){(0,a.NKD)(e,t,"@includeInapplicableMetadataInPayload",["Namespace","Model","ModelProperty"])&&e.program.stateMap(i._p.includeInapplicableMetadataInPayload).set(t,r)}function E(e,t){let r;for(r=t;r;r="ModelProperty"===r.kind?r.model:r.namespace){let t=e.stateMap(i._p.includeInapplicableMetadataInPayload).get(r);if(void 0!==t)return t}return!0}n()}catch(e){n(e)}})},7499:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{q:()=>l});var a=r(7502),i=r(4055),o=r(58382),s=r(55272),p=e([a,i,o,s]);function l(e,t,r,n={}){let p=(0,a.z5H)(),u=new Map;if("Model"!==t.kind||0===t.properties.size)return p.wrap([]);let c=new Set;return!function t(l,d){c.add(l);let m=!1,f=!1;for(let g of(0,a.zNQ)(l)){var y,h;let l=[...d,g.name];if(!(0,s.zN)(e,g,r))continue;let v=p.pipe(function(e,t,r,n={}){let s=[];function p(e){return[{...e,property:t,path:r},s]}let l={header:(0,i.io)(e,t),cookie:(0,i.Kw)(e,t),query:(0,i._C)(e,t),path:(0,i.h_)(e,t),body:(0,i.v3)(e,t),bodyRoot:(0,i.JI)(e,t),multipartBody:(0,i.wO)(e,t),statusCode:(0,i.Kr)(e,t)},u=Object.entries(l).filter(e=>!!e[1]),c=n.implicitParameter?.(t);if(c&&u.length>0&&("path"===c.type&&l.path?(l.path.explode||"simple"!==l.path.style||l.path.allowReserved)&&s.push((0,o.og)({code:"use-uri-template",format:{param:t.name},target:t})):"query"===c.type&&l.query?l.query.explode&&s.push((0,o.og)({code:"use-uri-template",format:{param:t.name},target:t})):s.push((0,o.og)({code:"incompatible-uri-param",format:{param:t.name,uriKind:c.type,annotationKind:u[0][0]},target:t}))),c)return p({kind:c.type,options:c,property:t});if(0===u.length)return p({kind:"bodyProperty"});if(u.length>1&&s.push((0,o.og)({code:"operation-param-duplicate-type",format:{paramName:t.name,types:u.map(e=>e[0]).join(", ")},target:t})),l.header)return p("content-type"===l.header.name.toLowerCase()?{kind:"contentType"}:{kind:"header",options:l.header});if(l.cookie)return p({kind:"cookie",options:l.cookie});if(l.query)return p({kind:"query",options:l.query});if(l.path)return p({kind:"path",options:l.path});if(l.statusCode)return p({kind:"statusCode"});if(l.body)return p({kind:"body"});if(l.bodyRoot)return p({kind:"bodyRoot"});else if(l.multipartBody)return p({kind:"multipartBody"});(0,a.a70)(!1,"Unexpected http property type")}(e,g,l,n));if(y=v,(r&s.bv.Read?"query"!==y.kind&&"path"!==y.kind:r&s.bv.Read||"statusCode"!==y.kind)||(v={kind:"bodyProperty",property:g,path:l}),"cookie"===v.kind&&r&s.bv.Read){p.add((0,o.og)({code:"response-cookie-not-supported",target:g,format:{propName:g.name}}));continue}if(("body"===v.kind||"bodyRoot"===v.kind||"multipartBody"===v.kind)&&(m=!0),!("body"===v.kind||"multipartBody"===v.kind)&&(h=g.type,"Model"===h.kind&&!h.indexer&&h.properties.size>0)&&!c.has(g.type)&&t(g.type,l)){m=!0;continue}"bodyProperty"===v.kind&&(f=!0),u.set(g,v)}return m&&!f}(t,[]),p.wrap([...u.values()])}[a,i,o,s]=p.then?(await p)():p,n()}catch(e){n(e)}})},56069:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{BF:()=>o.B,CY:()=>u.CY,Cq:()=>p.Cq,G:()=>l.G,O1:()=>p.O1,Ob:()=>u.Ob,Sb:()=>l.Sb,Ve:()=>p.Ve,YN:()=>l.YN,bv:()=>l.bv,fI:()=>s.f,mi:()=>u.mi,tI:()=>u.tI,xF:()=>d.xF});var a=r(58382),i=r(41811),o=r(76491),s=r(29868),p=r(4055),l=r(55272),u=r(74375),c=r(39625),d=r(2416),m=r(64521),f=r(5532),y=r(54411),h=e([a,i,o,s,p,l,u,c,d,m,f,y]);[a,i,o,s,p,l,u,c,d,m,f,y]=h.then?(await h)():h,n()}catch(e){n(e)}})},58382:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{_p:()=>p,og:()=>s,wl:()=>o});var a=r(7502),i=e([a]);a=(i.then?(await i)():i)[0];let{reportDiagnostic:o,createDiagnostic:s,stateKeys:p}=(0,a.vLS)({name:"@typespec/http",diagnostics:{"http-verb-duplicate":{severity:"error",messages:{default:(0,a.J8Y)`HTTP verb already applied to ${"entityName"}`}},"missing-uri-param":{severity:"error",messages:{default:(0,a.J8Y)`Route reference parameter '${"param"}' but wasn't found in operation parameters`}},"incompatible-uri-param":{severity:"error",messages:{default:(0,a.J8Y)`Parameter '${"param"}' is defined in the uri as a ${"uriKind"} but is annotated as a ${"annotationKind"}.`}},"use-uri-template":{severity:"error",messages:{default:(0,a.J8Y)`Parameter '${"param"}' is already defined in the uri template. Explode, style and allowReserved property must be defined in the uri template as described by RFC 6570.`}},"optional-path-param":{severity:"error",messages:{default:(0,a.J8Y)`Path parameter '${"paramName"}' cannot be optional.`}},"missing-server-param":{severity:"error",messages:{default:(0,a.J8Y)`Server url contains parameter '${"param"}' but wasn't found in given parameters`}},"duplicate-body":{severity:"error",messages:{default:"Operation has multiple @body parameters declared",duplicateUnannotated:"Operation has multiple unannotated parameters. There can only be one representing the body",bodyAndUnannotated:"Operation has a @body and an unannotated parameter. There can only be one representing the body"}},"duplicate-route-decorator":{severity:"error",messages:{namespace:"@route was defined twice on this namespace and has different values."}},"operation-param-duplicate-type":{severity:"error",messages:{default:(0,a.J8Y)`Param ${"paramName"} has multiple types: [${"types"}]`}},"duplicate-operation":{severity:"error",messages:{default:(0,a.J8Y)`Duplicate operation "${"operationName"}" routed at "${"verb"} ${"path"}".`}},"multiple-status-codes":{severity:"error",messages:{default:"Multiple `@statusCode` decorators defined for this operation response."}},"status-code-invalid":{severity:"error",messages:{default:"statusCode value must be a numeric or string literal or union of numeric or string literals",value:"statusCode value must be a three digit code between 100 and 599"}},"content-type-string":{severity:"error",messages:{default:"contentType parameter must be a string literal or union of string literals"}},"content-type-ignored":{severity:"warning",messages:{default:"`Content-Type` header ignored because there is no body."}},"metadata-ignored":{severity:"warning",messages:{default:(0,a.J8Y)`${"kind"} property will be ignored as it is inside of a @body property. Use @bodyRoot instead if wanting to mix.`}},"response-cookie-not-supported":{severity:"warning",messages:{default:(0,a.J8Y)`@cookie on response is not supported. Property '${"propName"}' will be ignored in the body. If you need 'Set-Cookie', use @header instead.`}},"no-service-found":{severity:"warning",messages:{default:(0,a.J8Y)`No namespace with '@service' was found, but Namespace '${"namespace"}' contains routes. Did you mean to annotate this with '@service'?`}},"invalid-type-for-auth":{severity:"error",messages:{default:(0,a.J8Y)`@useAuth ${"kind"} only accept Auth model, Tuple of auth model or union of auth model.`}},"shared-inconsistency":{severity:"error",messages:{default:(0,a.J8Y)`Each operation routed at "${"verb"} ${"path"}" needs to have the @sharedRoute decorator.`}},"write-visibility-not-supported":{severity:"warning",messages:{default:'@visibility("write") is not supported. Use @visibility("update"), @visibility("create") or @visibility("create", "update") as appropriate.'}},"multipart-invalid-content-type":{severity:"error",messages:{default:(0,a.J8Y)`Content type '${"contentType"}' is not a multipart content type. Supported content types are: ${"supportedContentTypes"}.`}},"multipart-model":{severity:"error",messages:{default:"Multipart request body must be a model."}},"multipart-part":{severity:"error",messages:{default:"Expect item to be an HttpPart model."}},"multipart-nested":{severity:"error",messages:{default:"Cannot use @multipartBody inside of an HttpPart"}},"http-file-extra-property":{severity:"error",messages:{default:(0,a.J8Y)`File model cannot define extra properties. Found '${"propName"}'.`}},"formdata-no-part-name":{severity:"error",messages:{default:"Part used in multipart/form-data must have a name."}},"header-format-required":{severity:"error",messages:{default:'A format must be specified for @header when type is an array. e.g. @header({format: "csv"})'}}},state:{authentication:{description:"State for the @auth decorator"},header:{description:"State for the @header decorator"},cookie:{description:"State for the @cookie decorator"},query:{description:"State for the @query decorator"},path:{description:"State for the @path decorator"},body:{description:"State for the @body decorator"},bodyRoot:{description:"State for the @bodyRoot decorator"},bodyIgnore:{description:"State for the @bodyIgnore decorator"},multipartBody:{description:"State for the @bodyIgnore decorator"},statusCode:{description:"State for the @statusCode decorator"},verbs:{description:"State for the verb decorators (@get, @post, @put, etc.)"},servers:{description:"State for the @server decorator"},includeInapplicableMetadataInPayload:{description:"State for the @includeInapplicableMetadataInPayload decorator"},externalInterfaces:{},routeProducer:{},routes:{},sharedRoutes:{description:"State for the @sharedRoute decorator"},routeOptions:{},file:{description:"State for the @Private.file decorator"},httpPart:{description:"State for the @Private.httpPart decorator"}}});n()}catch(e){n(e)}})},41811:(e,t,r)=>{r.a(e,async(e,t)=>{try{var n=r(7502),a=r(2492),i=e([n,a]);[n,a]=i.then?(await i)():i,(0,n.I1l)({rules:[a.F]}),t()}catch(e){t(e)}})},55272:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{G:()=>c,Sb:()=>u,YN:()=>f,bv:()=>a,zN:()=>m});var a,i=r(7502),o=r(85592),s=r(4055),p=e([i,o,s]);[i,o,s]=p.then?(await p)():p,function(e){e[e.Read=1]="Read",e[e.Create=2]="Create",e[e.Update=4]="Update",e[e.Delete=8]="Delete",e[e.Query=16]="Query",e[e.None=0]="None",e[e.All=31]="All",e[e.Item=1048576]="Item",e[e.Patch=2097152]="Patch"}(a||(a={}));let y=new Map;function l(e){e&=~a.Item,e&=~a.Patch;let t=y.get(e);return t||(t=[],e&a.Read&&t.push("read"),e&a.Create&&t.push("create"),e&a.Update&&t.push("update"),e&a.Delete&&t.push("delete"),e&a.Query&&t.push("query"),(0,i.a70)(t.length>0||e===a.None,"invalid visibility"),y.set(e,t)),t}function u(e,t=a.None){let r="";if((e&~a.Item&~a.Patch)!==t){let t=l(e);r+=t.map(e=>e[0].toUpperCase()+e.slice(1)).join("Or")}return e&a.Item&&(r+="Item"),r}function c(e,t,r){let n=(0,i.eTy)(e,t),o=function(e){if(!e)return;let t=a.None;for(let r of e)switch(r){case"read":t|=a.Read;break;case"create":t|=a.Create;break;case"update":t|=a.Update;break;case"delete":t|=a.Delete;break;case"query":t|=a.Query;break;default:return}return t}(n),s=function(e){switch(e){case"get":case"head":return a.Query;case"post":return a.Create;case"put":return a.Create|a.Update;case"patch":return a.Update;case"delete":return a.Delete;default:(0,i.a70)(!1,"unreachable")}}(r),p=o??s;return"patch"===r&&(p|=a.Patch),p}function d(e,t){return(0,s.gN)(e,t)||(0,s.IZ)(e,t)||(0,s.VM)(e,t)||(0,s.$G)(e,t)||(0,s.Kr)(e,t)}function m(e,t,r){return(0,i.zNq)(e,t,l(r))}function f(e,t){let r=t?.canonicalVisibility??a.None,n=new o.Pf;return{isEmptied:p,isTransformed:l,isPayloadProperty:f,isOptional:c,getEffectivePayloadType:function(t,r){if("Model"===t.kind&&!t.name){let n=(0,i.Dt8)(e,t,e=>f(e,r,void 0,!1));if(n.name)return n}return t}};function p(e,t){if(!e)return!1;let r=u(e,t);return 2===r}function l(e,t){if(!e)return!1;switch(u(e,t)){case 1:return!0;case 2:return t===r||!p(e,r);default:return!1}}function u(e,t){return n.getOrAdd(e,t,()=>(function(e,t){switch(e.kind){case"Model":return function(e,t){if(function(e,t){if(e.baseModel||e.indexer||0===e.properties.size)return!1;for(let r of e.properties.values())if(f(r,t,void 0,!0))return!1;return!0}(e,t))return 2;if(l(e.indexer?.value,t|a.Item)||l(e.baseModel,t))return 1;for(let n of e.properties.values()){if(t!==r&&(c(n,r)!==c(n,t)||f(n,t,void 0,!0)!==f(n,r,void 0,!0))||l(n.type,t))return 1}return 0}(e,t);case"Union":return function(e,t){for(let r of e.variants.values())if(l(r.type,t))return 1;return 0}(e,t);default:return 0}})(e,t),3)}function c(e,t){let r=(t&a.Update)!=0,n=(t&a.Patch)!=0,i=(t&a.Item)!=0;return e.optional||r&&n&&!i}function f(n,i,o,p){return!(!o&&((0,s.RT)(e,n)||function(e,t,r,n=d){return!(r&a.Item)&&!!n(e,t)&&(r&a.Read?(0,s.gN)(e,t)||(0,s.Kr)(e,t):!!(r&a.Read)||!(0,s.Kr)(e,t))}(e,n,i)||d(e,n)&&!(0,s.Nt)(e,n)))&&(!!m(e,n,i)||!!((p??=i===r)&&t?.canShareProperty?.(n)))}}n()}catch(e){n(e)}})},74375:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{CY:()=>f,Ob:()=>d,mi:()=>c,tI:()=>m});var a=r(7502),i=r(76491),o=r(4055),s=r(58382),p=r(64521),l=r(5532),u=e([a,i,o,s,p,l]);function c(e,t,r){return y(e,t,r,new Map)}function d(e,t,r){let n=(0,a.z5H)(),i=n.pipe(function(e,t,r){let n=(0,a.z5H)(),i=(0,a.Etu)(t,r?.listOptions),o=new Map,s=i.map(t=>n.pipe(y(e,t,r,o)));return n.wrap(s)}(e,t,{...r,listOptions:{recursive:t!==e.getGlobalNamespaceType()}})),p=(0,o.bi)(e,t);return(0,a.mz)(e,{modelProperty(t){(function(t){if(a.ZPT(e,t)?.includes("write")){let e=t.decorators.find(e=>e.decorator.name===a.N9b.name),r=e?.args.find(e=>e.node?.kind===a.a66.StringLiteral&&"write"===e.node.value),i=r?.node??t;n.add((0,s.og)({code:"write-visibility-not-supported",target:i}))}})(t)}}),function(e,t,r){let n=new Map;for(let t of r){let{verb:r,path:a}=t;if(void 0!==t.overloading&&f(t)||(0,l.FQ)(e,t.operation))continue;let i=n.get(a);void 0===i&&(i=new Map,n.set(a,i));let o=i.get(r);void 0===o&&(o=[],i.set(r,o)),o.push(t)}for(let[e,r]of n)for(let[n,a]of r)if(a.length>=2)for(let r of a)t.add((0,s.og)({code:"duplicate-operation",format:{path:e,verb:n,operationName:r.operation.name},target:r.operation}))}(e,n,i),n.wrap({namespace:t,operations:i,authentication:p})}function m(e,t){0===t.length&&(0,a.mz)(e,{namespace:t=>{t.operations.size>0&&(0,s.wl)(e,{code:"no-service-found",format:{namespace:t.name},target:t})}})}function f(e){return e.path===e.overloading.path&&e.verb===e.overloading.verb}function y(e,t,r,n){let o;let s=n.get(t);if(s)return[s,[]];let u=(0,a.z5H)(),c={operation:t};n.set(t,c);let d=(0,a.Vw6)(e,t);d&&(o=c.overloading=u.pipe(y(e,d,r,n)));let m=u.pipe((0,l.rh)(e,t,o,r??{})),f=u.pipe((0,p.j)(e,t)),h=(0,i.r)(e,t),g={path:m.path,uriTemplate:m.uriTemplate,pathSegments:[],verb:m.parameters.verb,container:t.interface??t.namespace??e.getGlobalNamespaceType(),parameters:m.parameters,responses:f,operation:t,authentication:h};Object.assign(c,g);let v=(0,a.KDK)(e,t);return v&&(c.overloads=v.map(t=>u.pipe(y(e,t,r,n)))),u.wrap(c)}[a,i,o,s,p,l]=u.then?(await u)():u,n()}catch(e){n(e)}})},39625:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{W:()=>c});var a=r(7502),i=r(4055),o=r(58382),s=r(55272),p=r(4699),l=r(40854),u=e([a,i,o,s,p]);function c(e,t,r,n,a={}){let o=(a?.verbSelector&&a.verbSelector(e,t))??(0,i.JC)(e,t)??n?.verb;if(o)return d(e,t,o,r);let s=d(e,t,"post",r);return s[0].body?s:d(e,t,"get",r)}[a,i,o,s,p]=u.then?(await u)():u;let m={";":"matrix","#":"fragment",".":"label","/":"path"};function d(e,t,r,n){let i=(0,a.z5H)(),u=(0,s.G)(e,t,r),c=(0,l.O)(n),d=[],{body:f,metadata:y}=i.pipe((0,p.r)(e,t.parameters,u,"request",{implicitParameter:e=>{let r=e.model===t.parameters&&c.parameters.find(t=>t.name===e.name);if(!r)return;let n=r.modifier?.type==="explode";return"?"===r.operator||"&"===r.operator?{type:"query",name:r.name,explode:n}:"+"===r.operator?{type:"path",name:r.name,explode:n,allowReserved:!0,style:"simple"}:{type:"path",name:r.name,explode:n,allowReserved:!1,style:(r.operator&&m[r.operator])??"simple"}}}));for(let e of y)switch(e.kind){case"contentType":d.push({name:"Content-Type",type:"header",param:e.property});break;case"path":e.property.optional&&i.add((0,o.og)({code:"optional-path-param",format:{paramName:e.property.name},target:e.property}));case"query":case"cookie":case"header":d.push({...e.options,param:e.property})}return i.wrap({properties:y,parameters:d,verb:r,body:f,get bodyType(){return f?.type},get bodyParameter(){return f?.property}})}n()}catch(e){n(e)}})},4699:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{r:()=>d});var a=r(7502),i=r(85592),o=r(29868),s=r(4055),p=r(7499),l=r(58382),u=r(2416),c=e([a,i,o,s,p,l,u]);function d(e,t,r,n,c={}){let f=(0,a.z5H)(),g=f.pipe((0,p.q)(e,t,r,c)),v=f.pipe(function(e,t,r,n,p){let c=(0,a.z5H)(),d=c.pipe(function(e,t,r){for(let e of t)if("contentType"===e.kind){let[t,r]=(0,o.v)(e.property);return[{contentTypes:t,contentTypeProperty:e.property},r]}return"multipart"===r?[{contentTypes:[]},[]]:[{contentTypes:["application/json"]},[]]}(0,r,p)),f=(0,u.Kj)(e,t);if(void 0!==f){let r=(0,u.Kj)(e,t);return c.wrap({bodyKind:"single",contentTypes:c.pipe((0,o.v)(r.contentType)),contentTypeProperty:r.contentType,type:r.contents.type,isExplicit:!1,containsMetadataAnnotations:!1})}if("Model"!==t.kind||(0,a.x3v)(e,t))return c.wrap({bodyKind:"single",...d,type:t,isExplicit:!1,containsMetadataAnnotations:!1});let g=c.pipe(function(e,t,r,n,o){let p;let u=(0,a.z5H)(),c=new i.i$;for(let i of t)switch(("body"===i.kind||"bodyRoot"===i.kind||"multipartBody"===i.kind)&&c.track("body",i.property),i.kind){case"body":case"bodyRoot":let t=!1;"body"===i.kind&&(t=!u.pipe(function(e,t,r){let n=(0,a.z5H)();return(0,a.Opx)(t.type,{modelProperty:t=>{let a=(0,s.gN)(e,t)?"header":("request"===r||"response"===r)&&(0,s.IZ)(e,t)?"cookie":("request"===r||"multipart"===r)&&(0,s.VM)(e,t)?"query":"request"===r&&(0,s.$G)(e,t)?"path":"response"===r&&(0,s.Kr)(e,t)?"statusCode":void 0;a&&n.add((0,l.og)({code:"metadata-ignored",format:{kind:a},target:t}))}},{}),n.wrap(0===n.diagnostics.length)}(e,i.property,o))),void 0===p&&(p={bodyKind:"single",...r,type:i.property.type,isExplicit:"body"===i.kind,containsMetadataAnnotations:t,property:i.property,parameter:i.property});break;case"multipartBody":p=u.pipe(function(e,t,r,n){let i=t.type;return"Model"===i.kind?function(e,t,r,n,i){let o=(0,a.z5H)(),s=[];for(let t of r.properties.values()){let r=o.pipe(m(e,t.type,i));r&&s.push({...r,name:r.name??t.name,optional:t.optional})}return o.wrap({bodyKind:"multipart",...n,parts:s,property:t,type:r})}(e,t,i,r,n):"Tuple"===i.kind?function(e,t,r,n,i){let o=(0,a.z5H)(),s=[];for(let e of n.contentTypes)h.includes(e)||o.add((0,l.og)({code:"multipart-invalid-content-type",format:{contentType:e,supportedContentTypes:h.join(", ")},target:r}));for(let[t,a]of r.values.entries()){let p=o.pipe(m(e,a,i));p?.name===void 0&&n.contentTypes.includes(y.formData)&&o.add((0,l.og)({code:"formdata-no-part-name",target:r.node.values[t]})),p&&s.push(p)}return o.wrap({bodyKind:"multipart",...n,parts:s,property:t,type:r})}(e,t,i,r,n):[void 0,[(0,l.og)({code:"multipart-model",target:t})]]}(e,i.property,r,n))}for(let[e,t]of c.entries())for(let e of t)u.add((0,l.og)({code:"duplicate-body",target:e}));return u.wrap(p)}(e,r,d,n,p));if(void 0===g&&(t.baseModel||t.indexer||t.derivedModels.length>0&&(0,a.dOq)(e,t)))return c.wrap({bodyKind:"single",...d,type:t,isExplicit:!1,containsMetadataAnnotations:!1});let v=(0,a.HFY)(e,t,e=>r.some(t=>t.property===e&&"bodyProperty"===t.kind));if(v.properties.size>0){if(void 0===g)return c.wrap({bodyKind:"single",...d,type:v,isExplicit:!1,containsMetadataAnnotations:!1});c.add((0,l.og)({code:"duplicate-body",messageId:"bodyAndUnannotated",target:t}))}return void 0===g&&d.contentTypeProperty&&c.add((0,l.og)({code:"content-type-ignored",target:d.contentTypeProperty})),c.wrap(g)}(e,t,g,r,n));return v&&v.contentTypes.includes("multipart/form-data")&&"single"===v.bodyKind&&"Model"!==v.type.kind?(f.add((0,l.og)({code:"multipart-model",target:v.property??t})),f.wrap({body:void 0,metadata:g})):f.wrap({body:v,metadata:g})}[a,i,o,s,p,l,u]=c.then?(await c)():c;let y={formData:"multipart/form-data",mixed:"multipart/mixed"},h=Object.values(y);function m(e,t,r){if(!("Model"===t.kind&&(0,a.x3v)(e,t)))return f(e,t,r);{let[n,a]=f(e,t.indexer.value,r);return n?[{...n,multi:!0},a]:[n,a]}}function f(e,t,r){let n=(0,u.SJ)(e,t);if(n){var i;let s=(0,u.Kj)(e,n.type);if(void 0!==s)return function(e,t){let[r,n]=(0,o.v)(t.contentType);return[{multi:!1,name:e,body:{bodyKind:"single",contentTypeProperty:t.contentType,contentTypes:r,type:t.contents.type,isExplicit:!1,containsMetadataAnnotations:!1},filename:t.filename,optional:!1,headers:[]},n]}(n.options.name,s);let[{body:p,metadata:c},m]=d(e,n.type,r,"multipart");return void 0===p?[void 0,m]:"multipart"===p.bodyKind?[void 0,[(0,l.og)({code:"multipart-nested",target:t})]]:(0===p.contentTypes.length&&(p={...p,contentTypes:(i=p.type,[...new Set(function t(r){if("Scalar"===r.kind){let t=(0,a.j9p)(e,r);return(t&&(r=t.type),(0,a.r$7)(e.checker.isTypeAssignableTo(r.projectionBase??r,e.checker.getStdType("bytes"),r)))?["application/octet-stream"]:["text/plain"]}return"Union"===r.kind?[...r.variants.values()].flatMap(e=>t(e.type)):["application/json"]}(i))])}),[{multi:!1,name:n.options.name,body:p,optional:!1,headers:c.filter(e=>"header"===e.kind)},m])}return[void 0,[(0,l.og)({code:"multipart-part",target:t})]]}n()}catch(e){n(e)}})},2416:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{Kj:()=>p,SJ:()=>l,xF:()=>s});var a=r(7502),i=r(58382),o=e([a,i]);function s(e,t){if("Model"!==t.kind)return!1;let r=t;for(;r;){var n;if(n=r,e.stateSet(i._p.file).has(n))return!0;r=r.baseModel}return!1}function p(e,t){if("Model"!==t.kind||!s(e,t))return;let r=(0,a.UUk)(t,"contentType"),n=(0,a.UUk)(t,"filename");return{contents:(0,a.UUk)(t,"contents"),contentType:r,filename:n,type:t}}function l(e,t){return e.stateMap(i._p.httpPart).get(t)}[a,i]=o.then?(await o)():o,n()}catch(e){n(e)}})},64521:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{j:()=>u});var a=r(7502),i=r(4055),o=r(58382),s=r(55272),p=r(4699),l=e([a,i,o,s,p]);function u(e,t){let r=(0,a.z5H)(),n=t.returnType,i=new d;if("Union"===n.kind)for(let o of n.variants.values())(0,a.Cmm)(o.type)||c(e,r,t,i,o.type);else c(e,r,t,i,n);return r.wrap(i.values())}[a,i,o,s,p]=l.then?(await l)():l;class d{#t=new Map;get(e){return this.#t.get(this.#r(e))}set(e,t){this.#t.set(this.#r(e),t)}values(){return[...this.#t.values()]}#r(e){return"number"==typeof e||"*"===e?String(e):`${e.start}-${e.end}`}}function c(e,t,r,n,l){let{body:u,metadata:c}=t.pipe((0,p.r)(e,l,s.bv.Read,"response")),d=t.pipe(function(e,t,r){let n=[],s=(0,a.z5H)(),p=!1;for(let a of r)"statusCode"===a.kind&&(p&&(0,o.wl)(e,{code:"multiple-status-codes",target:t}),p=!0,n.push(...s.pipe((0,i.nm)(e,a.property))));if("Model"===t.kind)for(let r=t;r;r=r.baseModel){var l;n.push(...(l=r,e.stateMap(o._p.statusCode).get(l)??[]))}return s.wrap(n)}(e,l,c)),m=function(e,t){let r={};for(let e of t)"header"===e.kind&&(r[e.options.name]=e.property);return r}(0,c);for(let t of(0===d.length&&((0,a.ogd)(e,l)?d.push("*"):(0,a.LW3)(l)?(u=void 0,d.push(204)):((void 0===u||(0,a.LW3)(u.type))&&(u=void 0),d.push(200))),d)){let o=n.get(t)??{statusCode:"object"==typeof t?"*":String(t),statusCodes:t,type:l,description:function(e,t,r,n,o){if(o.some(e=>"body"===e.kind||"bodyRoot"===e.kind||"multipartBody"===e.kind||"statusCode"===e.kind)){let t=(0,a.x7B)(e,r);if(t)return t}return((0,a.ogd)(e,r)?(0,a.Igo)(e,t):(0,a.Ilv)(e,t))||(0,i.O1)(n)}(e,r,l,t,c),responses:[]};void 0!==u?o.responses.push({body:u,headers:m,properties:c}):o.responses.push({headers:m,properties:c}),n.set(t,o)}}n()}catch(e){n(e)}})},5532:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{FQ:()=>f,gN:()=>d,hp:()=>y,rh:()=>u,zu:()=>m});var a=r(7502),i=r(58382),o=r(39625),s=r(40854),p=e([a,i,o]);[a,i,o]=p.then?(await p)():p;let h=["/",":"];function l(e){let t="";for(let[r,n]of e.entries())t+=function(e,t=!1){return(e.length>0&&0>h.indexOf(e[0])&&(e=`/${e}`),t&&"/"===e[e.length-1])?e.slice(0,-1):e}(n,r<e.length-1);return t}function u(e,t,r,n){let p=(0,a.z5H)(),{uriTemplate:u,parameters:d}=p.pipe(function(e,t,r,n){let[p,u]=function e(t,r){if(void 0===r)return[[],{}];let[n,a]=e(t,r.namespace),o=y(t,r)?.path,s="Namespace"===r.kind?t.stateMap(i._p.routeOptions).get(r)??{}:{};return[[...n,...o?[o]:[]],{...a,...s}]}(e,t.interface??t.namespace),[d,m]=(e.stateMap(i._p.routeProducer).get(t)??function(e,t,r,n,i){let p=(0,a.z5H)(),u=y(e,t)?.path,d=!u&&n?n.uriTemplate:l([...r,...u?[u]:[]]),m=(0,s.O)(d),f=p.pipe((0,o.W)(e,t,d,n,i.paramOptions)),h=new Map(f.parameters.filter(({type:e})=>"path"===e||"query"===e).map(e=>[e.name,e]));for(let e of m.parameters)h.delete(e.name);let g=function(e,t){let r=t.filter(e=>"path"===e.type).map(c),n=t.filter(e=>"query"===e.type),a=l([e,...r]);return function(e,t){let r=t.filter(e=>"query"===e.type);return e+(r.length>0?`{?${r.map(e=>`${e.name.replaceAll(":","%3A")}${e.explode?"*":""}`).join(",")}}`:"")}(a,n)}(d,[...h.values()]);return p.wrap({uriTemplate:g,parameters:f})})(e,t,p,r,{...u,...n});return[{uriTemplate:function(e){let t=0===e.length?"/":l(e);return"/"===t[0]?t:`/${t}`}([d.uriTemplate]),parameters:d.parameters},m]}(e,t,r,n)),m=(0,s.O)(u),f=new Set(d.parameters.filter(({type:e})=>"path"===e||"query"===e).map(e=>e.name));for(let e of m.parameters){let r=decodeURIComponent(e.name);f.has(e.name)||f.has(r)||p.add((0,i.og)({code:"missing-uri-param",format:{param:e.name},target:t}))}let h=function(e){let t="";for(let r of e.segments??[])"string"==typeof r?t+=r:"?"!==r.operator&&"&"!==r.operator&&(t+=`{${r.name}}`);return t}(m);return p.wrap({uriTemplate:u,path:h,parameters:d})}let g={matrix:";",label:".",simple:"",path:"/",fragment:"#"};function c(e){let t=e.allowReserved?"+":g[e.style];return`{${t}${e.name}${e.explode?"*":""}}`}function d(e,t,r){if(!(0,a.NKD)(e,t,"@route",["Namespace","Interface","Operation"]))return;let n=e.program.stateMap(i._p.routes);n.has(t)&&"Namespace"===t.kind?n.get(t)!==r.path&&(0,i.wl)(e.program,{code:"duplicate-route-decorator",messageId:"namespace",target:t}):(n.set(t,r.path),"Operation"===t.kind&&r.shared&&m(e.program,t))}function m(e,t){e.stateMap(i._p.sharedRoutes).set(t,!0)}function f(e,t){return!0===e.stateMap(i._p.sharedRoutes).get(t)}function y(e,t){let r=e.stateMap(i._p.routes).get(t);return r?{path:r,shared:"Operation"===t.kind&&f(e,t)}:void 0}n()}catch(e){n(e)}})},2492:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{F:()=>s});var a=r(7502),i=r(5532),o=e([a,i]);[a,i]=o.then?(await o)():o;let s=(0,a.D_T)({name:"op-reference-container-route",severity:"warning",description:"Check for referenced (`op is`) operations which have a @route on one of their containers.",url:"https://typespec.io/docs/libraries/http/rules/op-reference-container-route",messages:{default:(0,a.J8Y)`Operation ${"opName"} references an operation which has a @route prefix on its namespace or interface: "${"routePrefix"}".  This operation will not carry forward the route prefix so the final route may be different than the referenced operation.`},create(e){let t=new Map;return{operation:r=>{!function r(n,a){if(void 0!==n){let o=n.interface??n.namespace,s=a.interface??a.namespace;if(o!==s){let r=t.get(n);if(void 0===r&&(r=function t(r){if(void 0===r)return;if("Operation"===r.kind)return t(r.interface)??t(r.namespace);let n=(0,i.hp)(e.program,r);return n?n.path:t(r.namespace)}(n),t.set(n,r)),r){e.reportDiagnostic({target:a,format:{opName:a.name,routePrefix:r}});return}}r(n.sourceOperation,a)}}(r.sourceOperation,r)}}}});n()}catch(e){n(e)}})},42068:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{B:()=>function e(t,r,n){switch(r.kind){case"String":case"Number":return function(e,t){let r="string"==typeof e?parseInt(e,10):e;return isNaN(r)||!Number.isInteger(r)||r<100||r>599?s(t):[[r],[]]}(r.value,n);case"Union":let i=(0,a.z5H)(),o=[...r.variants.values()].flatMap(r=>i.pipe(e(t,r.type,n)));return i.wrap(o);case"Scalar":return p(t,r,r,n);case"ModelProperty":if("Scalar"===r.type.kind)return p(t,r,r.type,n);return e(t,r.type,n);default:return s(n)}}});var a=r(7502),i=r(58382),o=e([a,i]);function s(e){return[[],[(0,i.og)({code:"status-code-invalid",target:e,messageId:"value"})]]}function p(e,t,r,n){if(!(0,a.r$7)(e.checker.isTypeAssignableTo(r.projectionBase??r,e.checker.getStdType("int32"),r)))return s(n);let i=function e(t,r,n){let i=(0,a.Y0q)(t,r),o=(0,a.gPk)(t,r),s={};return"ModelProperty"===r.kind&&("Scalar"===r.type.kind||"ModelProperty"===r.type.kind)?s=e(t,r.type,n):"Scalar"===r.kind&&r.baseScalar&&(s=e(t,r.baseScalar,n)),{...s,start:i,end:o}}(e,t,n);return void 0!==i.start&&void 0!==i.end?[[i],[]]:s(n)}[a,i]=o.then?(await o)():o,n()}catch(e){n(e)}})},54411:(e,t,r)=>{r.a(e,async(e,t)=>{try{var n=r(4055),a=r(58382),i=r(1703),o=e([n,a,i]);[n,a,i]=o.then?(await o)():o,n.FR,n.vT,n.zs,n.Fm,n.SE,n.Fe,n.ar,n.BG,n.Rg,n.JW,n.Vz,n.gP,n.n7,n.Ul,n.Fg,n.yu,n.m_,n.lr,n.M5,n.gd,t()}catch(e){t(e)}})},40854:(e,t,r)=>{r.d(t,{O:()=>o});let n=["+","#",".","/",";","?","&"],a=/\{([^{}]+)\}|([^{}]+)/g,i=/([^:*]*)(?::(\d+)|(\*))?/;function o(e){let t=[],r=[];for(let[o,s,p]of e.matchAll(a))if(s){let e;for(let a of(n.includes(s[0])&&(e=s[0],s=s.slice(1)),s.split(","))){let n=a.match(i),o={name:n[1],operator:e,modifier:n[3]?{type:"explode"}:n[2]?{type:"prefix",value:Number(n[2])}:void 0};t.push(o),r.push(o)}}else r.push(p);return{segments:r,parameters:t}}},33504:(e,t,r)=>{r.d(t,{F:()=>n});function n(e){return e.match(/\{[^}]+\}/g)?.map(e=>e.slice(1,-1))??[]}},1703:(e,t,r)=>{r.a(e,async(e,t)=>{try{var n=r(58382),a=r(74375),i=r(5532),o=e([n,a,i]);[n,a,i]=o.then?(await o)():o,t()}catch(e){t(e)}})},36945:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{$E:()=>m,$y:()=>M,B$:()=>f,Bq:()=>u,Bu:()=>d,LO:()=>T,TG:()=>S,VV:()=>O,Yh:()=>v,jW:()=>w,nh:()=>h,v5:()=>c});var a=r(7502),i=r(43113),o=r(56069),s=r(40942),p=r(60456),l=e([a,i,o,s,p]);[a,i,o,s,p]=l.then?(await l)():l;let y=(0,p.Wt)("operationIds"),h=(e,t,r)=>{e.program.stateMap(y).set(t,r)};function u(e,t){return e.stateMap(y).get(t)}let g=(0,p.Wt)("openApiExtension"),v=(e,t,r,n)=>{(0,s.$2)(r)||(0,p.wl)(e.program,{code:"invalid-extension-key",format:{value:r},target:t});let[i,o]=(0,a.bh9)(n,t);o.length>0&&e.program.reportDiagnostics(o),function(e,t,r,n){let a=e.stateMap(g),i=a.get(t)??new Map;i.set(r,n),a.set(t,i)}(e.program,t,r,i)};function c(e,t){return e.stateMap(g).get(t)??new Map}let b=(0,p.Wt)("defaultResponse"),w=(e,t)=>{(0,o.Cq)(e.program,t,["*"]),e.program.stateSet(b).add(t)};function d(e,t){return e.stateSet(b).has(t)}let x=(0,p.Wt)("externalDocs"),M=(e,t,r,n)=>{let a={url:r};n&&(a.description=n),e.program.stateMap(x).set(t,a)};function m(e,t){return e.stateMap(x).get(t)}let k=(0,p.Wt)("info"),T=(e,t,r)=>{let[n,i]=(0,a.bh9)(r,e.getArgumentTarget(0));e.program.reportDiagnostics(i),void 0!==n&&(0,s.f0)(e.program,e.getArgumentTarget(0),n,"TypeSpec.OpenAPI.AdditionalInfo")&&(!n.termsOfService||(0,s.Zd)(e.program,e.getArgumentTarget(0),n.termsOfService,"TermsOfService"))&&function(e,t,r){e.stateMap(k).set(t,r)}(e.program,t,n)};function f(e,t){var r;let n=e.stateMap(k).get(t),i=(0,a.cQl)(e,t);return r={...n,title:n?.title??i?.title,version:n?.version??i?.version,summary:n?.summary??(0,a.Be6)(e,t),description:n?.description??(0,a.x7B)(e,t)},Object.fromEntries(Object.entries(r).filter(([e,t])=>void 0!==t))}let[S,C]=(0,i.U0)(p.Fd.tagsMetadata),O=(e,t,r,n)=>{if(!t.decorators.some(e=>e.decorator===a.QSl)){(0,p.wl)(e.program,{code:"tag-metadata-target-service",format:{namespace:t.name},target:e.getArgumentTarget(0)});return}let i=S(e.program,t)??{};if(i[r]){(0,p.wl)(e.program,{code:"duplicate-tag",format:{tagName:r},target:e.getArgumentTarget(0)});return}!(0,s.f0)(e.program,e.getArgumentTarget(0),n,"TypeSpec.OpenAPI.TagMetadata")||n.externalDocs?.url&&!(0,s.Zd)(e.program,e.getArgumentTarget(0),n.externalDocs.url,"externalDocs.url")||(i[r]=n,C(e.program,t,i))};n()}catch(e){n(e)}})},40942:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{$2:()=>f,CX:()=>m,QE:()=>l,TY:()=>u,Tx:()=>c,Zd:()=>y,f0:()=>h,fR:()=>d,jA:()=>p});var a=r(7502),i=r(36945),o=r(60456),s=e([a,i,o]);function p(e,t){if((0,a.vCI)(e,t))return!1;switch(t.kind){case"Model":return!t.name||(0,a.w7J)(t);case"Scalar":return e.checker.isStdType(t)||(0,a.w7J)(t);case"Enum":case"Union":return!t.name;default:return!0}}function l(e,t,r,n){let i=(0,a.vCI)(e,t)??(0,a.Uzb)(t,r);return u(e,t,i,n),i}function u(e,t,r,n){n&&n[r]&&(0,o.wl)(e,{code:"duplicate-type-name",format:{value:r},target:t})}function c(e,t,r,n,a){let i=t.model,s=l(e,i,a);return i.properties.size>1&&(s+=`.${t.name}`),n[s]&&(0,o.wl)(e,{code:"duplicate-type-name",messageId:"parameter",format:{value:s},target:t}),s}function d(e,t){let r=(0,i.Bq)(e,t);if(r)return r;if(t.interface)return`${t.interface.name}_${t.name}`;let n=t.namespace;return void 0===n||(0,a.tES)(e,n)||(0,a.kdH)(e,n)?t.name:`${n.name}_${t.name}`}function m(e,t){let r=(0,a.ZPT)(e,t);return r?.length===1&&"read"===r[0]}function f(e){return e.startsWith("x-")}function y(e,t,r,n){try{return new URL(r),!0}catch{return(0,o.wl)(e,{code:"not-url",target:t,format:{property:n,value:r}}),!1}}function h(e,t,r,n){let i=e.resolveTypeReference(n)[0];if(r&&i){let n=function e(t,r,n){let i=[];for(let s of Object.keys(t)){let p=(0,a.UUk)(n,s);if(p){if("Model"===p.type.kind){let n=e(t[s],r,p.type);i.push(...n)}}else f(s)||i.push((0,o.og)({code:"invalid-extension-key",format:{value:s},target:r}))}return i}(r,t,i);if(e.reportDiagnostics(n),n.length>0)return!1}return!0}[a,i,o]=s.then?(await s)():s,n()}catch(e){n(e)}})},26271:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{$E:()=>a.$E,B$:()=>a.B$,Bu:()=>a.Bu,CX:()=>i.CX,QE:()=>i.QE,TG:()=>a.TG,TY:()=>i.TY,Tx:()=>i.Tx,fR:()=>i.fR,jA:()=>i.jA,v5:()=>a.v5});var a=r(36945),i=r(40942),o=r(13009),s=e([a,i,o]);[a,i,o]=s.then?(await s)():s,n()}catch(e){n(e)}})},60456:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{Fd:()=>l,Wt:()=>p,og:()=>o,wl:()=>s});var a=r(7502),i=e([a]);a=(i.then?(await i)():i)[0];let{createDiagnostic:o,reportDiagnostic:s,createStateSymbol:p,stateKeys:l}=(0,a.vLS)({name:"@typespec/openapi",diagnostics:{"invalid-extension-key":{severity:"error",messages:{default:(0,a.J8Y)`OpenAPI extension must start with 'x-' but was '${"value"}'`}},"duplicate-type-name":{severity:"error",messages:{default:(0,a.J8Y)`Duplicate type name: '${"value"}'. Check @friendlyName decorators and overlap with types in TypeSpec or service namespace.`,parameter:(0,a.J8Y)`Duplicate parameter key: '${"value"}'. Check @friendlyName decorators and overlap with types in TypeSpec or service namespace.`}},"not-url":{severity:"error",messages:{default:(0,a.J8Y)`${"property"}: ${"value"} is not a valid URL.`}},"duplicate-tag":{severity:"error",messages:{default:(0,a.J8Y)`"Metadata for tag '${"tagName"}' was specified twice."`}},"tag-metadata-target-service":{severity:"error",messages:{default:(0,a.J8Y)`@tagMetadata must be used on the service namespace. Did you mean to annotate '${"namespace"}'  with '@service'?`}}},state:{tagsMetadata:{description:"State for the @tagMetadata decorator."}}});n()}catch(e){n(e)}})},13009:(e,t,r)=>{r.a(e,async(e,t)=>{try{var n=r(36945),a=r(60456),i=e([n,a]);[n,a]=i.then?(await i)():i,n.jW,n.Yh,n.$y,n.LO,n.nh,n.VV,t()}catch(e){t(e)}})},69880:(e,t,r)=>{r.a(e,async(e,t)=>{try{var n=r(7502),a=r(30917),i=r(17472),o=r(2726),s=e([n,a,i,o]);[n,a,i,o]=s.then?(await s)():s,t()}catch(e){t(e)}})},30917:(e,t,r)=>{r.a(e,async(e,t)=>{try{var n=r(51791),a=r(42865),i=e([n,a]);[n,a]=i.then?(await i)():i,t()}catch(e){t(e)}})},51791:(e,t,r)=>{r.a(e,async(e,t)=>{try{r(81155);var n=r(92975),a=e([n]);n=(a.then?(await a)():a)[0],t()}catch(e){t(e)}})},42865:(e,t,r)=>{r.a(e,async(e,t)=>{try{var n=r(51791),a=e([n]);n=(a.then?(await a)():a)[0],t()}catch(e){t(e)}})},92975:(e,t,r)=>{r.a(e,async(e,t)=>{try{var n=r(7502);r(81155);var a=r(72206),i=e([n,a]);[n,a]=i.then?(await i)():i,t()}catch(e){t(e)}})},372:(e,t,r)=>{r.a(e,async(e,t)=>{try{var n=r(7502);r(81155);var a=r(72206),i=e([n,a]);[n,a]=i.then?(await i)():i,t()}catch(e){t(e)}})},55914:(e,t,r)=>{r.a(e,async(e,t)=>{try{var n=r(7502);r(81155);var a=r(72206),i=e([n,a]);[n,a]=i.then?(await i)():i,t()}catch(e){t(e)}})},12944:(e,t,r)=>{r.a(e,async(e,t)=>{try{var n=r(7502);r(81155);var a=r(72206),i=e([n,a]);[n,a]=i.then?(await i)():i,t()}catch(e){t(e)}})},12756:(e,t,r)=>{r.a(e,async(e,t)=>{try{var n=r(7502);r(81155);var a=r(72206);r(84447);var i=r(12944),o=e([n,a,i]);[n,a,i]=o.then?(await o)():o,t()}catch(e){t(e)}})},17472:(e,t,r)=>{r.a(e,async(e,t)=>{try{var n=r(372),a=r(55914),i=r(12756),o=e([n,a,i]);[n,a,i]=o.then?(await o)():o,t()}catch(e){t(e)}})},2726:(e,t,r)=>{r.a(e,async(e,t)=>{try{var n=r(92975),a=e([n]);n=(a.then?(await a)():a)[0],t()}catch(e){t(e)}})},81155:(e,t,r)=>{},72206:(e,t,r)=>{r.a(e,async(e,t)=>{try{var n=r(7502),a=e([n]);n=(a.then?(await a)():a)[0],t()}catch(e){t(e)}})},84447:(e,t,r)=>{},35246:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{LA:()=>l,SY:()=>s,aY:()=>c,cX:()=>o});var a=r(47405),i=e([a]);a=(i.then?(await i)():i)[0];let p=(0,a.Wt)("refs"),l=(e,t,r)=>{e.program.stateMap(p).set(t,r)};function o(e,t){return e.stateMap(p).get(t)}let u=(0,a.Wt)("oneOf"),c=(e,t)=>{"ModelProperty"===t.kind&&"Union"!==t.type.kind&&(0,a.wl)(e.program,{code:"oneof-union",target:e.decoratorTarget}),e.program.stateMap(u).set(t,!0)};function s(e,t){return e.stateMap(u).get(t)}n()}catch(e){n(e)}})},58165:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{a:()=>p});var a=r(7502),i=r(31366),o=r(61949),s=e([a,i]);function p(e,t,r,n){let s=(0,a.j9p)(e,t);if(s){let e=new i.Tl(r),t=(0,o.N)(s.type,n);return e.type=t.type,e.format=function(e,t,r){switch(e){case void 0:return r??t??e;case"date-time":switch(t){case"rfc3339":return"date-time";case"unixTimestamp":return"unixtime";case"rfc7231":return"http-date";default:return t}case"duration":if("ISO8601"===t)return"duration";return r??t;default:return r??t??e}}(e.format,s.encoding,t.format),e}return new i.Tl(r)}[a,i]=s.then?(await s)():s,n()}catch(e){n(e)}})},75391:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{Tu:()=>p,rB:()=>l});var a=r(7502),i=r(92789),o=r(63724),s=e([a,i]);function p(e,t){let r=(0,o.pK)(t)?t.operations.flatMap(t=>(0,a.F12)(e,t.operation).map(e=>[t,e])):(0,a.F12)(e,t.operation).map(e=>[t,e]),n={requestBody:{},responses:{}};if(0===r.length)return n;for(let[t,o]of r){if(o.parameters&&t.parameters.body){let e=u(o.parameters,t.parameters.properties)??"application/json";n.requestBody[e]??=[];let r=c(o.parameters,t.parameters.properties);r&&n.requestBody[e].push([{value:r,title:o.title,description:o.description},t.parameters.body.type])}if(o.returnType&&t.responses){let r=function(e,t,r){let n=[];for(let s of r)for(let r of s.responses){var o;if(void 0===r.body)continue;let p=u(t,r.properties),l=function(e,t){let r=t.find(e=>"statusCode"===e.kind);if(void 0===r)return;let n=d(e,r.path);if(n?.valueKind==="NumericValue")return n.value.asNumber()??void 0}(t,r.properties),c=r.properties.find(e=>"contentType"===e.kind),m=r.properties.find(e=>"statusCode"===e.kind),f=l&&m&&(o=s.statusCodes,"*"===o||("number"==typeof o?l===o:l>=o.start&&l<=o.end)),y=p&&r.body?.contentTypes.includes(p);if(f&&y)return{contentType:p,statusCodes:(0,a.r$7)((0,i.Q)(e,s.statusCodes,s.type)),response:r};f&&void 0===c?n.push([{response:r,statusCodes:(0,a.r$7)((0,i.Q)(e,s.statusCodes,s.type))},1]):y&&void 0===f?n.push([{response:r,contentType:p},1]):void 0===c&&void 0===m&&n.push([{response:r},0])}let s=n.sort((e,t)=>e[1]-t[1]).pop();if(s)return{contentType:s[0].contentType??"application/json",statusCodes:s[0].statusCodes??["200"],response:s[0].response}}(e,o.returnType,t.responses);if(r){let e=c(o.returnType,r.response.properties);if(e)for(let t of r.statusCodes)n.responses[t]??={},n.responses[t][r.contentType]??=[],n.responses[t][r.contentType].push([{value:e,title:o.title,description:o.description},r.response.body.type])}}}return n}function l(e,t){if(0===t.length)return{};if(1===t.length&&void 0===t[0][0].title&&void 0===t[0][0].description){let[r,n]=t[0];return{example:(0,a.UT2)(e,r.value,n)}}{let r={};for(let[n,[i,o]]of t.entries())r[i.title??`example${n}`]={summary:i.title,description:i.description,value:(0,a.UT2)(e,i.value,o)};return{examples:r}}}function u(e,t){let r=t.find(e=>"contentType"===e.kind);if(void 0===r)return;let n=d(e,r.path);if(n?.valueKind==="StringValue")return n.value}function c(e,t){let r=t.find(e=>"body"===e.kind||"bodyRoot"===e.kind);return void 0!==r?d(e,r.path):e}function d(e,t){let r=e;for(let e of t)switch(r?.valueKind){case"ObjectValue":r=r.properties.get(e.toString())?.value;break;case"ArrayValue":r=r.values[e];break;default:return}return r}[a,i]=s.then?(await s)():s,n()}catch(e){n(e)}})},62818:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{getOpenAPI3:()=>s.ww});var a=r(69880),i=r(35246),o=r(47405),s=r(71334),p=r(53940),l=e([a,i,o,s,p]);[a,i,o,s,p]=l.then?(await l)():l,n()}catch(e){n(e)}})},47405:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{Wt:()=>l,og:()=>s,wl:()=>p});var a=r(7502),i=e([a]);a=(i.then?(await i)():i)[0];let o={name:"@typespec/openapi3",diagnostics:{"oneof-union":{severity:"error",messages:{default:"@oneOf decorator can only be used on a union or a model property which type is a union."}},"inconsistent-shared-route-request-visibility":{severity:"error",messages:{default:"All operations with `@sharedRoutes` must have the same `@requestVisibility`."}},"invalid-server-variable":{severity:"error",messages:{default:(0,a.J8Y)`Server variable '${"propName"}' must be assignable to 'string'. It must either be a string, enum of string or union of strings.`}},"invalid-format":{severity:"warning",messages:{default:(0,a.J8Y)`Collection format '${"value"}' is not supported in OpenAPI3 ${"paramType"} parameters. Defaulting to type 'string'.`}},"invalid-style":{severity:"warning",messages:{default:(0,a.J8Y)`Style '${"style"}' is not supported in OpenAPI3 ${"paramType"} parameters. Defaulting to style 'simple'.`}},"path-reserved-expansion":{severity:"warning",messages:{default:"Reserved expansion of path parameter with '+' operator #{allowReserved: true} is not supported in OpenAPI3."}},"resource-namespace":{severity:"error",messages:{default:"Resource goes on namespace"}},"path-query":{severity:"error",messages:{default:"OpenAPI does not allow paths containing a query string."}},"duplicate-header":{severity:"error",messages:{default:(0,a.J8Y)`The header ${"header"} is defined across multiple content types`}},"status-code-in-default-response":{severity:"error",messages:{default:"a default response should not have an explicit status code"}},"invalid-schema":{severity:"error",messages:{default:(0,a.J8Y)`Couldn't get schema for type ${"type"}`}},"union-null":{severity:"error",messages:{default:"Cannot have a union containing only null types."}},"empty-union":{severity:"error",messages:{default:"Empty unions are not supported for OpenAPI v3 - enums must have at least one value."}},"empty-enum":{severity:"error",messages:{default:"Empty enums are not supported for OpenAPI v3 - enums must have at least one value."}},"enum-unique-type":{severity:"error",messages:{default:"Enums are not supported unless all options are literals of the same type."}},"inline-cycle":{severity:"error",messages:{default:(0,a.J8Y)`Cycle detected in '${"type"}'. Use @friendlyName decorator to assign an OpenAPI definition name and make it non-inline.`}},"unsupported-status-code-range":{severity:"error",messages:{default:(0,a.J8Y)`Status code range '${"start"} to '${"end"}' is not supported. OpenAPI 3.0 can only represent range 1XX, 2XX, 3XX, 4XX and 5XX. Example: \`@minValue(400) @maxValue(499)\` for 4XX.`}},"invalid-model-property":{severity:"error",messages:{default:(0,a.J8Y)`'${"type"}' cannot be specified as a model property.`}},"unsupported-auth":{severity:"warning",messages:{default:(0,a.J8Y)`Authentication "${"authType"}" is not a known authentication by the openapi3 emitter, it will be ignored.`}},"xml-attribute-invalid-property-type":{severity:"warning",messages:{default:(0,a.J8Y)`XML \`@attribute\` can only be primitive types in the OpenAPI 3 emitter, Property '${"name"}' type will be changed to type: string.`}},"xml-unwrapped-invalid-property-type":{severity:"warning",messages:{default:(0,a.J8Y)`XML \`@unwrapped\` can only used on array properties or primitive ones in the OpenAPI 3 emitter, Property '${"name"}' will be ignored.`}},"invalid-component-fixed-field-key":{severity:"error",messages:{default:(0,a.J8Y)`Invalid key '${"value"}' used in a fixed field of the Component object. Only alphanumerics, dot (.), hyphen (-), and underscore (_) characters are allowed in keys.`}}},emitter:{options:{type:"object",additionalProperties:!1,properties:{"file-type":{type:"string",enum:["yaml","json"],nullable:!0,description:"If the content should be serialized as YAML or JSON. Default 'yaml', it not specified infer from the `output-file` extension"},"output-file":{type:"string",nullable:!0,description:'Name of the output file.\n Output file will interpolate the following values:\n  - service-name: Name of the service if multiple\n  - version: Version of the service if multiple\n\n Default: `{service-name}.{version}.openapi.yaml` or `.json` if `file-type` is `"json"`\n\n Example Single service no versioning\n  - `openapi.yaml`\n\n Example Multiple services no versioning\n  - `openapi.Org1.Service1.yaml`\n  - `openapi.Org1.Service2.yaml`\n\n Example Single service with versioning\n  - `openapi.v1.yaml`\n  - `openapi.v2.yaml`\n\n Example Multiple service with versioning\n  - `openapi.Org1.Service1.v1.yaml`\n  - `openapi.Org1.Service1.v2.yaml`\n  - `openapi.Org1.Service2.v1.0.yaml`\n  - `openapi.Org1.Service2.v1.1.yaml`    '},"new-line":{type:"string",enum:["crlf","lf"],default:"lf",nullable:!0,description:"Set the newline character for emitting files."},"omit-unreachable-types":{type:"boolean",nullable:!0,description:"Omit unreachable types.\nBy default all types declared under the service namespace will be included. With this flag on only types references in an operation will be emitted."},"include-x-typespec-name":{type:"string",enum:["inline-only","never"],nullable:!0,default:"never",description:"If the generated openapi types should have the `x-typespec-name` extension set with the name of the TypeSpec type that created it.\nThis extension is meant for debugging and should not be depended on."},"safeint-strategy":{type:"string",enum:["double-int","int64"],nullable:!0,default:"int64",description:"How to handle safeint type. Options are:\n - `double-int`: Will produce `type: integer, format: double-int`\n - `int64`: Will produce `type: integer, format: int64`\n\nDefault: `int64`"}},required:[]}}},{createDiagnostic:s,reportDiagnostic:p,createStateSymbol:l}=(0,a.vLS)(o);n()}catch(e){n(e)}})},71334:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{ww:()=>w});var a=r(7502),i=r(31366),o=r(56069),s=r(26271),p=r(70325),l=r(33394),u=r(35246),c=r(58165),d=r(75391),m=r(47405),f=r(14592),y=r(92789),h=r(63724),g=r(28090),v=r(82984),b=e([a,i,o,s,p,u,c,d,m,f,y,g,v]);[a,i,o,s,p,u,c,d,m,f,y,g,v]=b.then?(await b)():b;let k="yaml",T={"new-line":"lf","omit-unreachable-types":!1,"include-x-typespec-name":"never","safeint-strategy":"int64"};async function w(e,t={}){let r={program:e,emitterOutputDir:"tsp-output",options:t,getAssetEmitter(t){return(0,i.Jj)(e,t,this)}},n=function(e){let t={...T,...e.options},r=t["file-type"]??function(e){if(void 0===e)return k;switch((0,a.HU)(e)){case".yaml":case".yml":return"yaml";case".json":return"json";default:return k}}(t["output-file"]),n=t["output-file"]??`openapi.{service-name}.{version}.${r}`;return{fileType:r,newLine:t["new-line"],omitUnreachableTypes:t["omit-unreachable-types"],includeXTypeSpecName:t["include-x-typespec-name"],safeintStrategy:t["safeint-strategy"],outputFile:(0,a.o1F)(e.emitterOutputDir,n)}}(r);return(function(e,t){let r,n,l,b,w,M,k,T,C,O,$,P,j=e.program,R={},N={namespaceFilter:e=>(0,a.QnV)(e)!==M};return{emitOpenAPI:A,getOpenAPI:I};async function A(){let e=await I();for(let t of e)if(t.versioned)for(let e of t.versions)j.reportDiagnostics(e.diagnostics);else j.reportDiagnostics(t.diagnostics);if(j.compilerOptions.noEmit||j.hasError())return;let r=e.length>1;for(let n of e)if(n.versioned)for(let e of n.versions)await (0,a.qgZ)(j,{path:D(n.service,r,e.version),content:x(e.document,t.fileType),newLine:t.newLine});else await (0,a.qgZ)(j,{path:D(n.service,r),content:x(n.document,t.fileType),newLine:t.newLine})}async function I(){let e=[],t=(0,a.TDh)(j);for(let n of(0===t.length&&t.push({type:j.getGlobalNamespaceType()}),t)){let t=(0,p.t4)(j,n.type);if(1===t.length&&void 0===t[0].version){let a=await r(n,t[0]);if(void 0===a)return e;e.push({service:n,versioned:!1,document:a[0],diagnostics:a[1]})}else{let a={service:n,versioned:!0,versions:[]};for(let i of(e.push(a),t)){let e=await r(n,i);void 0!==e&&a.versions.push({service:n,version:i.version,document:e[0],diagnostics:e[1]})}}}return e;async function r(e,t){let r=j,n=j=(0,a.iZq)(r,[{projectionName:"target",arguments:["json"]},...t.projections]),i=n.projector.projectedTypes.get(e.type);return await E(i===n.getGlobalNamespaceType()?{type:n.getGlobalNamespaceType()}:(0,a.cQl)(j,i),t.version)}}function D(e,r,n){return(0,a.xvE)(t.outputFile,{"service-name":r?(0,a.QnV)(e.type):void 0,version:n})}async function E(p,u){try{let c=(0,a.r$7)((0,o.Ob)(j,p.type)),x=w=(0,o.BF)(c),S=await (0,v.q)();for(let v of(!function(p,u,c,d,y){l=(0,a.z5H)(),b=p,T=(0,o.YN)(j,{canonicalVisibility:o.bv.Read,canShareProperty:e=>(0,s.CX)(j,e)}),C=(0,g.o)(j,T,p.type,t.omitUnreachableTypes),r=(0,i.Jj)(j,class extends f.Jf{constructor(e){super(e,T,C,t,d)}},e);let h=function(e){let t={};for(let r of e){let e=function(e){let t=function(e){switch(e.type){case"http":return{type:"http",scheme:e.scheme,description:e.description};case"apiKey":return{type:"apiKey",in:e.in,name:e.name,description:e.description};case"oauth2":let t={},r=[];for(let n of e.flows)r.push(...n.scopes.map(e=>e.value)),t[n.type]={authorizationUrl:n.authorizationUrl,tokenUrl:n.tokenUrl,refreshUrl:n.refreshUrl,scopes:Object.fromEntries(n.scopes.map(e=>[e.value,e.description??""]))};return{type:"oauth2",flows:t,description:e.description};case"openIdConnect":return{type:"openIdConnect",openIdConnectUrl:e.openIdConnectUrl,description:e.description};case"noAuth":return;default:l.add((0,m.og)({code:"unsupported-auth",format:{authType:e.type},target:b.type}));return}}(e);return t&&Q(j,e.model,t),t}(r);e&&(t[r.id]=e)}return t}(u),v=H(c),w=(0,s.B$)(j,p.type);n={openapi:"3.0.0",info:{title:"(title)",...w,version:y??w?.version??"0.0.0"},externalDocs:(0,s.$E)(j,p.type),tags:[],paths:{},security:v.length>0?v:void 0,components:{parameters:{},requestBodies:{},responses:{},schemas:{},examples:{},securitySchemes:h}};let x=(0,o.Ve)(j,p.type);x&&(n.servers=x.map(e=>{let t={};for(let[r,n]of e.parameters){if(!function(e,t){let r=function(e,t){switch(t.kind){case"String":case"Union":case"Scalar":return(0,a.r$7)(e.checker.isTypeAssignableTo(t.projectionBase??t,e.checker.getStdType("string"),t));case"Enum":for(let e of t.members.values())if(e.value&&"string"!=typeof e.value)return!1;return!0;default:return!1}}(e,t.type);return r||l.add((0,m.og)({code:"invalid-server-variable",format:{propName:t.name},target:t})),r}(j,n))continue;let e={default:n.defaultValue?(0,f.Bu)(j,n.defaultValue,n):"",description:(0,a.x7B)(j,n)};"Enum"===n.type.kind?e.enum=B(n.type,o.bv.Read,"application/json").enum:"Union"===n.type.kind?e.enum=B(n.type,o.bv.Read,"application/json").enum:"String"===n.type.kind&&(e.enum=[n.type.value]),Q(j,n,e),t[r]=e}return{url:e.url,description:e.description,variables:t}})),Q(j,p.type,n),M=(0,a.QnV)(p.type),k=n.paths,O=new Map,$=new Set,P=new Set;let S=(0,s.TG)(j,p.type);if(S)for(let[e,t]of Object.entries(S)){let r={name:e,...t};R[e]=r}}(p,x.schemes,x.defaultAuth,S,u),(0,o.tI)(j,c.operations),function(e){let t=[],r=new Map;for(let[n,a]of(e.forEach(e=>{if(void 0!==e.overloading&&(0,o.CY)(e))return;let t=`${e.verb}|${e.path}`;r.has(t)?r.get(t).push(e):r.set(t,[e])}),r))1===a.length?t.push(a[0]):t.push({kind:"shared",operations:a});return t}(c.operations))){let e=(0,h.pK)(v)?function(e){let t=e.operations,r=t[0].verb,n=t[0].path,i=(0,d.Tu)(j,e),p={operationId:e.operations.map(e=>(0,s.fR)(j,e.operation)).join("_"),parameters:[],description:U(t,a.x7B," "),summary:U(t,a.Be6," "),responses:function(e,t){let r=new Map;for(let t of e.operations)for(let e of t.responses)for(let n of l.pipe((0,y.Q)(j,e.statusCodes,t.operation)))r.has(n)?r.get(n).push(e):r.set(n,[e]);let n={};for(let[a,i]of r){let r=function(e){let t=e[0],r=e.every(e=>e.type.kind===t.type.kind),n=e.every(e=>e.type===t.type);return r&&n?[t]:e}(i);n[a]=q(e,a,r,t)}return n}(e,i)};for(let e of t)W(e.operation,p),Q(j,e.operation,p),(0,a.oT4)(j,e.operation)&&(p.deprecated=!0);for(let e of t){let t=(0,a.rak)(j,e.operation);if(t){let e=p.tags;for(let r of(e?p.tags=[...new Set([...e,...t])]:p.tags=t,t))P.add(r)}}let u=t.map(e=>(0,o.G)(j,e.operation,r));u.some(e=>e!==u[0])&&l.add((0,m.og)({code:"inconsistent-shared-route-request-visibility",target:t[0].operation}));let c=u[0];p.parameters=F(function(e){let t=[],r=new Map;for(let t of e)for(let e of t.parameters.parameters){let t=r.get(e.name);t?t.push(e):r.set(e.name,[e])}if(0===r.size)return[];for(let n of r.values()){let r=n[0],a=e.length===n.length,i=n.every(e=>e.type===r.type),o=n.every(e=>e.param.optional===r.param.optional),s=n.every(e=>e.param.type.kind===r.param.type.kind),p=n.every(e=>e.param.type===r.param.type);a&&i&&o&&s&&p?t.push(r):!a&&i&&o&&s&&p?(r.param.optional=!0,t.push(r)):(a&&!(i&&o&&s)&&n.forEach(e=>{e.param.optional=!0}),t.push(...n))}return t}(t),c);let f=[...new Set(t.map(e=>e.parameters.body).filter(e=>void 0!==e))];f&&(p.requestBody=J(f,c,i));let h=w.operationsAuth.get(e.operations[0].operation);return h&&(p.security=X(h)),{operation:p,verb:r,path:n}}(v):function(e){let{path:t,operation:r,verb:n,parameters:i}=e;if(t.indexOf("?")>0){l.add((0,m.og)({code:"path-query",target:r}));return}let p=(0,o.G)(j,e.operation,n),u=(0,d.Tu)(j,e),c={operationId:(0,s.fR)(j,e.operation),summary:(0,a.Be6)(j,e.operation),description:(0,a.x7B)(j,e.operation),parameters:F(i.parameters,p),responses:function(e,t,r){let n={};for(let a of t)for(let t of l.pipe((0,y.Q)(j,a.statusCodes,a.type)))n[t]=q(e,t,[a],r);return n}(e,e.responses,u)},f=(0,a.rak)(j,r);if(f)for(let e of(c.tags=f,f))P.add(e);W(r,c),i.body&&(c.requestBody=J(i.body&&[i.body],p,u));let h=w.operationsAuth.get(e.operation);return h&&(c.security=X(h)),(0,a.oT4)(j,r)&&(c.deprecated=!0),Q(j,r,c),{operation:c,path:t,verb:n}}(v);if(e){let{operation:t,path:r,verb:n}=e;k[r]??={},k[r][n]=t}}if(function(){for(let[e,t]of O){let r=(0,s.Tx)(j,e,t,n.components.parameters,N);for(let a of(K(e,r),n.components.parameters[r]={...t},Object.keys(t)))delete t[a];t.$ref="#/components/parameters/"+encodeURIComponent(r)}}(),function(e){t.omitUnreachableTypes||function(){let t=e=>{!(0,o.xF)(j,e)&&(!C.isUnreachable(e)||$.has(e)||(0,s.jA)(j,e)||V(e,o.bv.All))},r=(0,a.tES)(j,e);(0,a.hh4)(e,{model:t,scalar:t,enum:t,union:t},{skipSubNamespaces:r})}();let i=r.getSourceFiles();if(i.length>0){(0,a.a70)(1===i.length,`Should only have a single file for now but got ${i.length}`);let t=n.components.schemas;for(let r of i[0].globalScope.declarations)K(e,r.name),t[r.name]=r.value}}(p.type),function(){for(let e of P)R[e]||n.tags.push({name:e});for(let e in R)n.tags.push(R[e])}(),n.components)for(let e of Object.keys(n.components))0===Object.keys(n.components[e]).length&&delete n.components[e];return[n,l.diagnostics]}catch(e){if(e instanceof S)return;throw e}}function U(e,t,r){let n=e.map(e=>t(j,e.operation)).filter(e=>void 0!==e);return n.length?n.join(r):void 0}function q(e,t,r,n){let a={description:""},i=new Map;for(let e of r){let r=(0,u.cX)(j,e.type);if(r)return{$ref:r};e.description&&e.description!==a.description&&(a.description=a.description?`${a.description} ${e.description}`:e.description),function(e,t,r){for(let n of t)if(n.headers&&Object.keys(n.headers).length>0)for(let[t,a]of(e.headers??={},Object.entries(n.headers))){let n=_(a,o.bv.Read),i=e.headers[t];if(i){(0,h.c2)(i,n)||l.add((0,m.og)({code:"duplicate-header",format:{header:t},target:r}));continue}e.headers[t]=n}}(a,e.responses,e.type),function(e,t,r,n,a,i){for(let e of(i??=new Map,r))if(void 0!==e.body){for(let r of(t.content??={},e.body.contentTypes)){let t=Y(e.body,o.bv.Read,r,a.responses[n]?.[r]);i.has(r)?i.get(r).push(t):i.set(r,[t])}for(let[e,r]of i)1===r.length?t.content[e]=r[0]:t.content[e]={schema:{anyOf:r.map(e=>e.schema)}}}}(0,a,e.responses,t,n,i),a.description||(a.description="default"===t?"An unexpected error response.":(0,o.O1)(t)??"unknown")}return a}function V(e,t,r,n){let a=z(e,t,r,n);switch(a.kind){case"code":return a.value;case"declaration":return{$ref:`#/components/schemas/${a.name}`};case"circular":return l.add((0,m.og)({code:"inline-cycle",format:{type:(0,s.QE)(j,e,N)},target:e})),{};case"none":return{}}}function B(e,t,r){let n=z(e,t,!1,r);switch(n.kind){case"code":case"declaration":return n.value;case"circular":return l.add((0,m.og)({code:"inline-cycle",format:{type:(0,s.QE)(j,e,N)},target:e})),{};case"none":return{}}}function z(e,t,n,a){return T.isTransformed(e,t)||(t=o.bv.Read),a="application/json"===a?void 0:a,r.emitType(e,{referenceContext:{visibility:t,serviceNamespaceName:M,ignoreMetadataAnnotations:n??!1,contentType:a}})}function Y(e,t,r,a){var i;if(i=e.type,"Scalar"===i.kind&&"bytes"===i.name&&"application/json"!==r&&"text/plain"!==r)return{schema:{type:"string",format:"binary"}};let o=a&&(0,d.rB)(j,a);switch(e.bodyKind){case"single":return{schema:L(e.type,t,e.isExplicit&&e.containsMetadataAnnotations,r.startsWith("multipart/")?r:void 0),...o};case"multipart":return{...function(e,t,r){let a={},i=[],o={};for(let[n,s]of e.parts.entries()){let e=s.name??`part${n}`,p=(0,f.WT)(j,s.body.type)?{type:"string",format:"binary"}:L(s.body.type,t,s.body.isExplicit&&s.body.containsMetadataAnnotations,"Union"===s.body.type.kind?r:void 0);s.multi&&(p={type:"array",items:p}),a[e]=p;let l=function(e,t,r){let n={};!function(e,t){if(0===e.length||e.length>1)return!1;switch(e[0]){case"text/plain":return"string"===t.type||"number"===t.type;case"application/octet-stream":return"string"===t.type&&"binary"===t.format||"array"===t.type&&t.items?.type==="string"&&t.items?.format==="binary";case"application/json":return"object"===t.type}return!1}(e.body.contentTypes,r)&&(n.contentType=e.body.contentTypes.join(", "));let a=e.headers;if(a.length>0)for(let e of(n.headers={},a)){let r=_(e.property,t);void 0!==r&&(n.headers[e.options.name]=r)}if(0!==Object.keys(n).length)return n}(s,t,p);l&&(o[e]=l),s.optional||i.push(e)}let p={type:"object",properties:a,required:i},l="name"in e.type&&""!==e.type.name?(0,s.QE)(j,e.type,N):void 0;l&&(n.components.schemas[l]=p);let u={schema:l?{$ref:"#/components/schemas/"+l}:p};return Object.keys(o).length>0&&(u.encoding=o),u}(e,t,r),...o}}}function L(e,t,r,n){let a=T.getEffectivePayloadType(e,t);return V(a,t,r,n??"application/json")}function F(e,t){let r=[];for(let n of e){if(O.has(n.param)){r.push(O.get(n.param));continue}if("header"===n.type&&(0,o.fI)(j,n.param))continue;let e=function(e,t){if((0,a.tGA)(e.param.type))return;let r=!1,n=e.param;if(n.sourceProperty)for(r=!0,n=n.sourceProperty;n.sourceProperty;)n=n.sourceProperty;let i=(0,u.cX)(j,n);if(i)return{$ref:i};if(O.has(n))return O.get(n);let o=function(e,t){let r={name:e.name,in:e.type,..._(e.param,t)},n=function(e){switch(e.type){case"header":return function(e){switch(e.format){case void 0:return{};case"csv":case"simple":return{style:"simple"};default:l.add((0,m.og)({code:"invalid-format",format:{paramType:"header",value:e.format},target:e.param}));return}}(e);case"cookie":return{explode:!1};case"query":return function(e){let t={};switch(!0!==e.explode&&(t.explode=!1),e.format){case"ssv":return{style:"spaceDelimited",explode:!1};case"pipes":return{style:"pipeDelimited",explode:!1};case"csv":case"simple":return{explode:!1};case void 0:case"multi":case"form":return t;default:l.add((0,m.og)({code:"invalid-format",format:{paramType:"query",value:e.format},target:e.param}));return}}(e);case"path":return function(e){e.allowReserved&&l.add((0,m.og)({code:"path-reserved-expansion",target:e.param}));let t={};switch(e.explode&&(t.explode=!0),e.style){case"label":t.style="label";break;case"matrix":t.style="matrix";break;case"simple":break;default:l.add((0,m.og)({code:"invalid-style",format:{style:e.style,paramType:"path"},target:e.param}))}return t}(e)}}(e);return void 0===n?r.schema={type:"string"}:Object.assign(r,n),(0,a.oT4)(j,e.param)&&(r.deprecated=!0),r}(e,t);return r&&n.model&&!(0,s.jA)(j,n.model)&&(O.set(n,o),$.add(n.model)),o}(n,t);if(e){let t=r.find(t=>!("$ref"in e)&&!("$ref"in t)&&t.name===e.name&&t.in===e.in);!t||"$ref"in e||"$ref"in t?r.push(e):function(e,t){if(e.schema){let r=e.schema;r.enum&&t.schema.enum&&(r.enum=[...new Set([...r.enum,...t.schema.enum])]),e.schema=r}else Object.assign(e,t);return e}(t,e)}}return r}function J(e,t,r){if(void 0===e||e.every(e=>(0,a.LW3)(e.type)))return;let n={required:e.every(e=>!e.property||!e.property.optional),content:{}},i=new Map;for(let o of e.filter(e=>!(0,a.LW3)(e.type))){let e=o.property?(0,a.x7B)(j,o.property):void 0;for(let a of(e&&(n.description=n.description?`${n.description} ${e}`:e),o.contentTypes.length>0?o.contentTypes:["application/json"])){let e=i.get(a),n=Y(o,t,a,r.requestBody[a]);e?e.push(n):i.set(a,[n])}}for(let[e,t]of i)1===t.length?n.content[e]=t[0]:n.content[e]={schema:{anyOf:t.map(e=>e.schema).filter(e=>void 0!==e)},encoding:t.find(e=>e.encoding)?.encoding};return n}function _(e,r){var n;let i=(n=e.type,V(n,r));if(!i)return;let s=(0,c.a)(j,e,function(e,t){let r={...t},n=(0,a.x7B)(j,e);n&&(r.description=n);let i=(0,a.gVr)(j,e);i&&(r.format=i);let s=(0,a.jAB)(j,e);s&&(r.pattern=s);let p=(0,a.jlD)(j,e);void 0!==p&&(r.minLength=p);let l=(0,a.zUo)(j,e);void 0!==l&&(r.maxLength=l);let u=(0,a.Y0q)(j,e);void 0!==u&&(r.minimum=u);let c=(0,a.KPZ)(j,e);void 0!==c&&(r.minimum=c,r.exclusiveMinimum=!0);let d=(0,a.gPk)(j,e);void 0!==d&&(r.maximum=d);let m=(0,a.Seu)(j,e);void 0!==m&&(r.maximum=m,r.exclusiveMaximum=!0);let f=(0,a.RPP)(j,e);t.minItems||void 0===f||(r.minItems=f);let y=(0,a.ZWx)(j,e);t.maxItems||void 0===y||(r.maxItems=y),(0,a.$fV)(j,e)&&(r.format="password");let h=(0,a.Be6)(j,e);h&&(r.title=h);let g=(0,a.EPN)(j,e);return g?{oneOf:[r,V(g,o.bv.Read,!1,"application/json")]}:(Q(j,e,r),r)}(e,i),t);e.defaultValue&&(s.default=(0,f.Bu)(j,e.defaultValue,e)),delete s.description;let p={required:!e.optional,description:(0,a.x7B)(j,e),schema:s};return Q(j,e,p),p}function K(e,t){/^[a-zA-Z0-9.\-_]+$/.test(t)||j.reportDiagnostic((0,m.og)({code:"invalid-component-fixed-field-key",format:{value:t},target:e}))}function Q(e,t,r){let n=(0,s.v5)(e,t);if(n)for(let e of n.keys())r[e]=n.get(e)}function W(e,t){let r=(0,s.$E)(j,e);r&&(t.externalDocs=r)}function H(e){return e.options.map(e=>{let t={};for(let r of e.all)switch(r.kind){case"noAuth":continue;case"oauth2":t[r.auth.id]=r.scopes;continue;default:t[r.auth.id]=[]}return t})}function X(e){let t=H(e);if(!(0,h.c2)(t,n.security)&&t.length>0)return t}})(r,n).getOpenAPI()}function x(e,t){switch(e.paths=M(e.paths),e.components?.schemas&&(e.components.schemas=M(e.components.schemas)),e.components?.parameters&&(e.components.parameters=M(e.components.parameters)),t){case"json":return JSON.stringify(e,null,2)+"\n";case"yaml":return(0,l.As)(e,{singleQuote:!0,aliasDuplicateObjects:!1,lineWidth:0})}}class S extends Error{constructor(){super("Error type found in evaluated TypeSpec output")}}function M(e){return Object.keys(e).sort().reduce((t,r)=>(t[r]=e[r],t),{})}n()}catch(e){n(e)}})},14592:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{Bu:()=>f,Jf:()=>h,WT:()=>y});var a=r(7502),i=r(31366),o=r(56069),s=r(26271),p=r(35246),l=r(58165),u=r(47405),c=r(61949),d=e([a,i,o,s,p,l,u]);[a,i,o,s,p,l,u]=d.then?(await d)():d;class h extends i.BU{#n;#a;#i;#o;constructor(e,t,r,n,a){super(e),this.#n=t,this.#a=r,this.#i=n,this.#o=a}modelDeclarationReferenceContext(e,t){return this.reduceContext(e)}modelLiteralReferenceContext(e){return this.reduceContext(e)}scalarDeclarationReferenceContext(e,t){return this.reduceContext(e)}enumDeclarationReferenceContext(e,t){return this.reduceContext(e)}unionDeclarationReferenceContext(e){return this.reduceContext(e)}reduceContext(e){let t=this.#s(),r={};t===o.bv.Read||this.#n.isTransformed(e,t)||(r.visibility=o.bv.Read);let n=this.#p();return"application/json"===n&&(r.contentType=void 0),r}modelDeclaration(e,t){let r=this.emitter.getProgram(),n=this.#s(),o=new i.Tl({type:"object",required:this.#l(e,n),properties:this.emitter.emitModelProperties(e)});for(let t of(e.indexer&&o.set("additionalProperties",this.emitter.emitTypeReference(e.indexer.value)),e.derivedModels.filter(m)))this.emitter.emitTypeReference(t);let p=(0,a.dOq)(r,e);if(p){let[t]=(0,a._O_)(e,p),r={...p};t.variants.size>0&&(r.mapping=this.#u(t)),o.discriminator=r}this.#c(e,o),e.baseModel&&o.set("allOf",g.array([this.emitter.emitTypeReference(e.baseModel)]));let l=(0,s.QE)(r,e,this.#d()),u=this.#p().startsWith("multipart/");return this.#m(e,u?l+"MultiPart":l,this.#f(e,o))}#c(e,t){let r=(0,s.$E)(this.emitter.getProgram(),e);r&&(t.externalDocs=r)}#d(){let e=this.emitter.getContext().serviceNamespaceName;return{namespaceFilter:t=>(0,a.QnV)(t)!==e}}#s(){return this.emitter.getContext().visibility??o.bv.Read}#y(){return this.emitter.getContext().ignoreMetadataAnnotations}#p(){return this.emitter.getContext().contentType??"application/json"}modelLiteral(e){let t=new i.Tl({type:"object",properties:this.emitter.emitModelProperties(e),required:this.#l(e,this.#s())});return e.indexer&&t.set("additionalProperties",this.emitter.emitTypeReference(e.indexer.value)),t}modelInstantiation(e,t){return(t=t??(0,s.QE)(this.emitter.getProgram(),e,this.#d()))?this.modelDeclaration(e,t):this.modelLiteral(e)}arrayDeclaration(e,t,r){let n=new i.Tl({type:"array",items:this.emitter.emitTypeReference(r)});return this.#m(e,t,this.#f(e,n))}arrayDeclarationReferenceContext(e,t,r){return{visibility:this.#s()|o.bv.Item}}arrayLiteral(e,t){return this.#h(e,new i.Tl({type:"array",items:this.emitter.emitTypeReference(t)}))}arrayLiteralReferenceContext(e,t){return{visibility:this.#s()|o.bv.Item}}#l(e,t){let r=[];for(let n of e.properties.values())if(!(0,a.tGA)(n.type)&&this.#n.isPayloadProperty(n,t,this.#y())&&!this.#n.isOptional(n,t)){let e=(0,a.M9S)(this.emitter.getProgram(),n,this.#p());r.push(e)}let n=(0,a.dOq)(this.emitter.getProgram(),e);return n&&!r.includes(n.propertyName)&&r.push(n.propertyName),r.length>0?r:void 0}modelProperties(e){let t=this.emitter.getProgram(),r=new i.Tl,n=this.emitter.getContext().visibility,o=this.#p();for(let i of e.properties.values()){if((0,a.tGA)(i.type)||!this.#n.isPayloadProperty(i,n,this.#y()))continue;let e=this.emitter.emitModelProperty(i),s=(0,a.M9S)(t,i,o);r.set(s,e)}let s=(0,a.dOq)(t,e);return(!s||s.propertyName in r||r.set(s.propertyName,{type:"string",description:`Discriminator property for ${e.name}.`}),0===Object.keys(r).length)?this.emitter.result.none():r}modelPropertyLiteral(e){let t=this.emitter.getProgram(),r=this.#p().startsWith("multipart/");if(r){if(y(t,e.type)&&void 0===(0,a.j9p)(t,e))return{type:"string",format:"binary"};if("Model"===e.type.kind&&(0,a.x3v)(t,e.type)&&y(t,e.type.indexer.value))return{type:"array",items:{type:"string",format:"binary"}}}let n=this.emitter.emitTypeReference(e.type,{referenceContext:r&&("Union"!==e.type.kind||![...e.type.variants.values()].some(e=>y(t,e.type)))?{contentType:"application/json"}:{}});if("code"!==n.kind)return(0,u.wl)(t,{code:"invalid-model-property",format:{type:e.type.kind},target:e}),{};let o=n.value instanceof i.Or||"$ref"in n.value,l=this.#g(e,n.value),c=this.#f(e,{},l);if(e.defaultValue&&(c.default=f(t,e.defaultValue,e)),(0,s.CX)(t,e)&&(c.readOnly=!0),this.#v(t,e,c),l&&o&&!("Model"===e.type.kind&&(0,a.x3v)(t,e.type)))return 0===Object.keys(c).length?l:c.xml?.attribute?c:{allOf:[l],...c};{(0,p.SY)(t,e)&&l.anyOf&&(l.oneOf=l.anyOf,delete l.anyOf);let r=new i.Tl(l);for(let[e,t]of Object.entries(c))r.set(e,t);return r}}booleanLiteral(e){return{type:"boolean",enum:[e.value]}}stringLiteral(e){return{type:"string",enum:[e.value]}}stringTemplate(e){if(void 0!==e.stringValue)return{type:"string",enum:[e.stringValue]};let t=(0,a.DKH)(e);return this.emitter.getProgram().reportDiagnostics(t.map(e=>({...e,severity:"warning"}))),{type:"string"}}numericLiteral(e){return{type:"number",enum:[e.value]}}enumDeclaration(e,t){let r=(0,s.QE)(this.emitter.getProgram(),e,this.#d());return this.#m(e,r,new i.Tl(this.#b(e)))}#b(e){let t=this.emitter.getProgram();if(0===e.members.size)return(0,u.wl)(t,{code:"empty-enum",target:e}),{};let r=new Set,n=new Set;for(let t of e.members.values())r.add("number"==typeof t.value?"number":"string"),n.add(t.value??t.name);r.size>1&&(0,u.wl)(t,{code:"enum-unique-type",target:e});let a={type:r.values().next().value,enum:[...n]};return this.#f(e,a)}enumMember(e){return this.enumMemberReference(e)}enumMemberReference(e){switch(typeof e.value){case"undefined":return{type:"string",enum:[e.name]};case"string":return{type:"string",enum:[e.value]};case"number":return{type:"number",enum:[e.value]}}}unionDeclaration(e,t){let r=this.#w(e),n=(0,s.QE)(this.emitter.getProgram(),e,this.#d());return this.#m(e,n,r)}#w(e){let t=this.emitter.getProgram();if(0===e.variants.size)return(0,u.wl)(t,{code:"empty-union",target:e}),new i.Tl({});let r=Array.from(e.variants.values()),n={},o=(0,p.SY)(t,e)?"oneOf":"anyOf",l=[],c=!1,d=(0,a.dOq)(t,e),m=this.#p().startsWith("multipart/");for(let e of r){var f;if((0,a.Cmm)(e.type)){c=!0;continue}if(m&&y(t,e.type)){l.push({schema:{type:"string",format:"binary"},type:e.type});continue}if(f=e.type,"Boolean"===f.kind||"String"===f.kind||"Number"===f.kind){if(n[e.type.kind])n[e.type.kind].push(e.type.value);else{let t=[e.type.value];n[e.type.kind]=t,l.push({schema:{type:function(e){switch(e.kind){case"String":return"string";case"Number":return"number";case"Boolean":return"boolean"}}(e.type),enum:t},type:null})}}else{let t=this.emitter.emitTypeReference(e.type,{referenceContext:m?{contentType:"application/json"}:{}});(0,a.a70)("code"===t.kind,"Unexpected enum schema. Should be kind: code"),l.push({schema:t.value,type:e.type})}}let h=(r,{mergeUnionWideConstraints:n})=>{let a=r.schema,o=r.type,p=n?this.#f(e,{}):{};if(n&&c&&(p.nullable=!0),0===Object.keys(p).length)return new i.Tl(a);if((a instanceof i.Or||"$ref"in a)&&!(o&&(0,s.jA)(t,o)))return new i.Tl(o&&("Model"===o.kind||"Scalar"===o.kind)?{type:"object",allOf:g.array([a]),...p}:{allOf:g.array([a]),...p});{let e=new i.Tl(a);for(let[t,r]of Object.entries(p))e.set(t,r);return e}};if(0===l.length){if(c)return(0,u.wl)(t,{code:"union-null",target:e}),new i.Tl({});(0,a.a70)(!1,"Attempting to emit an empty union")}if(1===l.length)return h(l[0],{mergeUnionWideConstraints:!0});let v=(e=>{if(c){for(let t of e)if(t.schema instanceof i.Or||"$ref"in t.schema)return!0}return!1})(l),b={[o]:l.map(e=>h(e,{mergeUnionWideConstraints:v}))};if(!v&&c&&(b.nullable=!0),d){b.discriminator={...d};let t=(0,a.r$7)((0,a._O_)(e,d));t.variants.size>0&&(b.discriminator.mapping=this.#u(t))}return this.#f(e,b)}#u(e){let t={};for(let[r,n]of e.variants.entries()){let e=this.emitter.emitTypeReference(n);(0,a.a70)("code"===e.kind,"Unexpected ref schema. Should be kind: code"),t[r]=e.value.$ref}return t}unionLiteral(e){return this.#w(e)}unionVariants(e){let t=new i.$j;for(let r of e.variants.values())t.push(this.emitter.emitType(r));return t}unionVariant(e){return this.emitter.emitTypeReference(e.type)}modelPropertyReference(e){return this.modelPropertyLiteral(e)}#v(e,t,r){let n=(0,s.v5)(e,t);if(n)for(let e of n.keys())r[e]=n.get(e)}reference(e,t,r,n){if(e.value instanceof i.Or)throw Error("Can't form reference to declaration that hasn't been created yet");let a=t[t.length-1],o=r[0];return o&&a&&!o.sourceFile.meta.shouldEmit&&a.sourceFile.meta.bundledRefs.push(e),{$ref:`#/components/schemas/${e.name}`}}circularReference(e,t,r){return r.containsDeclaration?super.circularReference(e,t,r):((0,u.wl)(this.emitter.getProgram(),{code:"inline-cycle",format:{type:r.toString()},target:r.first.type}),{})}scalarDeclaration(e,t){let r=this.#x(e),n=this.#M(e),a=(0,s.QE)(this.emitter.getProgram(),e,this.#d());return r?n:this.#m(e,a,new i.Tl(n))}scalarInstantiation(e,t){return this.#M(e)}tupleLiteral(e){return{type:"array",items:{}}}#M(e){let t={},r=this.#x(e);r?t=this.#k(e):e.baseScalar&&(t=this.#M(e.baseScalar));let n=this.#g(e,this.#f(e,t));return r&&delete n.description,n}#k(e){return(0,c.N)(e,this.#i)}#T(e,t){let r=this.emitter.getProgram(),n=(0,a.Oou)(r,e);n.length>0&&t.set("example",(0,a.UT2)(r,n[0].value,e))}#f(e,t,r){let n=new i.Tl(t),o=this.emitter.getProgram(),s=(t,r)=>{let a=t(o,e);void 0!==a&&(n[r]=a)};this.#T(e,n),s(a.jlD,"minLength"),s(a.zUo,"maxLength"),s(a.Y0q,"minimum"),s(a.gPk,"maximum"),s(a.jAB,"pattern"),s(a.RPP,"minItems"),s(a.ZWx,"maxItems");let p=(0,a.KPZ)(o,e);void 0!==p&&(n.minimum=p,n.exclusiveMinimum=!0);let l=(0,a.Seu)(o,e);if(void 0!==l&&(n.maximum=l,n.exclusiveMaximum=!0),(0,a.$fV)(o,e)&&(n.format="password"),this.#x(e)&&"url"===e.name||s(a.gVr,"format"),s(a.x7B,"description"),s(a.Be6,"title"),s((e,t)=>void 0!==(0,a.C9Y)(e,t)||void 0,"deprecated"),this.#o)switch(e.kind){case"Scalar":case"Model":this.#o.attachXmlObjectForScalarOrModel(o,e,n);break;case"ModelProperty":this.#o.attachXmlObjectForModelProperty(o,this.#i,e,n,r)}this.#v(o,e,n);let u=(0,a.EPN)(o,e);return new i.Tl(u?{oneOf:[n,this.#b(u)]}:n)}#h(e,t){return"never"!==this.#i.includeXTypeSpecName&&t.set("x-typespec-name",(0,a.Uzb)(e,this.#d())),t}#m(e,t,r){let n=(0,p.cX)(this.emitter.getProgram(),e);if(n)return{$ref:n};if((0,s.jA)(this.emitter.getProgram(),e))return this.#h(e,r);let i=(0,a.Be6)(this.emitter.getProgram(),e);i&&r.set("title",i);let l=this.#a.getUsage(e),u=void 0!==l&&l.size>1,c=this.#s(),d=t+(u?(0,o.Sb)(c,o.bv.Read):""),m=this.emitter.result.declaration(d,r);return(0,s.TY)(this.emitter.getProgram(),e,d,Object.fromEntries(m.scope.declarations.map(e=>[e.name,!0]))),m}#x(e){return this.emitter.getProgram().checker.isStdType(e)}#g(e,t){return(0,l.a)(this.emitter.getProgram(),e,t,this.#i)}intrinsic(e,t){switch(t){case"unknown":return{};case"null":return{nullable:!0}}return(0,u.wl)(this.emitter.getProgram(),{code:"invalid-schema",format:{type:t},target:e}),{}}programContext(e){return{scope:this.emitter.createSourceFile("openapi").globalScope}}}function m(e){return!(0,a.rz6)(e)&&(e.templateMapper?.args===void 0||e.templateMapper.args?.length===0||e.derivedModels.length>0)}let g={array:e=>{let t=new i.$j;for(let r of e)t.push(r);return t}};function f(e,t,r){return(0,a.UT2)(e,t,r)}function y(e,t){return"Scalar"===t.kind&&"bytes"===t.name&&void 0===(0,a.j9p)(e,t)}n()}catch(e){n(e)}})},92789:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{Q:()=>s});var a=r(26271),i=r(47405),o=e([a,i]);function s(e,t,r){return(0,a.Bu)(e,r)||"*"===t?[["default"],[]]:"number"==typeof t?[[String(t)],[]]:function(e,t){let r=[],n=()=>r.push((0,i.og)({code:"unsupported-status-code-range",format:{start:String(e.start),end:String(e.end)},target:t})),a=[],o=e.start,s=e.end;for(let t of(e.start<100?(n(),o=100,a.push("default")):e.end>599&&(n(),a.push("default"),s=599),[1,2,3,4,5])){if(o>s)break;let e=100*t,r=e+99;o>=e&&o<=r&&(a.push(`${t}XX`),(o!==e||s<r)&&n(),o=e+100)}return[a,r]}(t,r)}[a,i]=o.then?(await o)():o,n()}catch(e){n(e)}})},61949:(e,t,r)=>{r.d(t,{N:()=>n});function n(e,t){switch(e.name){case"bytes":return{type:"string",format:"byte"};case"numeric":case"float":return{type:"number"};case"integer":return{type:"integer"};case"int8":return{type:"integer",format:"int8"};case"int16":return{type:"integer",format:"int16"};case"int32":return{type:"integer",format:"int32"};case"int64":return{type:"integer",format:"int64"};case"safeint":if("double-int"===t.safeintStrategy)return{type:"integer",format:"double-int"};return{type:"integer",format:"int64"};case"uint8":return{type:"integer",format:"uint8"};case"uint16":return{type:"integer",format:"uint16"};case"uint32":return{type:"integer",format:"uint32"};case"uint64":return{type:"integer",format:"uint64"};case"float64":return{type:"number",format:"double"};case"float32":return{type:"number",format:"float"};case"decimal":return{type:"number",format:"decimal"};case"decimal128":return{type:"number",format:"decimal128"};case"string":return{type:"string"};case"boolean":return{type:"boolean"};case"plainDate":return{type:"string",format:"date"};case"utcDateTime":case"offsetDateTime":return{type:"string",format:"date-time"};case"plainTime":return{type:"string",format:"time"};case"duration":return{type:"string",format:"duration"};case"url":return{type:"string",format:"uri"};default:return e.name,{}}}},53940:(e,t,r)=>{r.a(e,async(e,t)=>{try{var n=r(35246),a=r(47405),i=e([n,a]);[n,a]=i.then?(await i)():i,n.LA,n.aY,t()}catch(e){t(e)}})},63724:(e,t,r)=>{function n(e,t){return e===t||null!==e&&null!==t&&"object"==typeof e&&"object"==typeof t&&(Array.isArray(e)?!!Array.isArray(t)&&function(e,t,r=(e,t)=>e===t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1;return!0}(e,t,n):function(e,t,r=(e,t)=>e===t){if(e===t)return!0;if(e.size!==t.size)return!1;for(let[n,a]of e)if(!t.has(n)||!r(a,t.get(n)))return!1;return!0}(new Map(Object.entries(e)),new Map(Object.entries(t)),n))}function a(e){return"shared"===e.kind}r.d(t,{c2:()=>n,pK:()=>a})},28090:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{o:()=>p});var a=r(7502),i=r(85592),o=r(56069),s=e([a,i,o]);function p(e,t,r,n){let i=new Map;!function(e,t,r,n){switch(r.kind){case"Namespace":!function e(t,r,n,a){for(let i of n.namespaces.values())e(t,r,i,a);for(let e of n.interfaces.values())c(t,r,e,a);for(let e of n.operations.values())d(t,r,e,a)}(e,t,r,n);break;case"Interface":c(e,t,r,n);break;case"Operation":d(e,t,r,n)}}(e,t,r,i);let s=new Set(i.keys());if(!n){let e=e=>{i.has(e)||m(e,o.bv.All,(e,t)=>u(i,e,t))};(0,a.hh4)(r,{model:e,scalar:e,enum:e,union:e})}return{getUsage:e=>{let t=i.get(e);if(void 0!==t)return i.get(e)},isUnreachable:e=>!s.has(e)}}function l(e,t,r,n){let a=e.getEffectivePayloadType(r,n);u(t,r,n),a!==r&&u(t,a,n)}function u(e,t,r){let n=e.get(t)??new Set;n.add(r),e.set(t,n)}function c(e,t,r,n){for(let a of r.operations.values())d(e,t,a,n)}function d(e,t,r,n){let i=(0,a.r$7)((0,o.mi)(e,r)),s=(0,o.G)(e,r,i.verb);for(let e of(i.parameters.body&&m(i.parameters.body.type,s,(e,r)=>l(t,n,e,r)),i.parameters.parameters))m(e.param,s,(e,r)=>l(t,n,e,r));m(r.returnType,o.bv.Read,(e,r)=>l(t,n,e,r))}function m(e,t,r,n=new i.Pf){if(!n.get(e)?.get(t))switch(n.getOrAdd(e,t,()=>!0),e.kind){case"Model":r(e,t),f(e.properties,t,r,n),e.baseModel&&m(e.baseModel,t,r,n),f(e.derivedModels,t,r,n),e.baseModel&&m(e.baseModel,t,r,n),e.indexer&&("integer"===e.indexer.key.name?m(e.indexer.value,t|o.bv.Item,r,n):m(e.indexer.value,t,r,n));break;case"ModelProperty":case"UnionVariant":m(e.type,t,r,n);break;case"Union":r(e,t),f(e.variants,t,r,n);break;default:r(e,t)}}function f(e,t,r,n){for(let a of e.values())m(a,t,r,n)}[a,i,o]=s.then?(await s)():s,n()}catch(e){n(e)}})},82984:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{q:()=>l});var a=r(7502),i=r(31366),o=r(47405),s=r(61949),p=e([a,i,o]);async function l(){let e=await c();if(void 0!==e)return{attachXmlObjectForScalarOrModel:(t,r,n)=>{if(!u(t,r,[]))return;let i={},o=(0,a.M9S)(t,r,"application/xml");o!==r.name&&(i.name=o);let s=e.getNs(t,r);s&&(i.prefix=s.prefix,i.namespace=s.namespace),0!==Object.keys(i).length&&(n.xml=i)},attachXmlObjectForModelProperty:(t,r,n,p,l)=>{if(!u(t,n.model,[]))return;let c={},d=(0,a.M9S)(t,n,"application/xml"),m=(0,a.M9S)(t,n,"application/json");d!==n.name&&d!==m&&(c.name=d);let f=e.getNs(t,n);f&&(c.prefix=f.prefix,c.namespace=f.namespace);let y=e.isAttribute(t,n);y&&(n.type?.kind==="Model"&&((0,o.wl)(t,{code:"xml-attribute-invalid-property-type",format:{name:n.name},target:n}),p.type="string",delete l.items),c.attribute=!0);let h=e.isUnwrapped(t,n),g=n.type?.kind==="Model"&&(0,a.x3v)(t,n.type);if(!g&&h&&(0,o.wl)(t,{code:"xml-unwrapped-invalid-property-type",format:{name:n.name},target:n}),g&&l.items&&!y){let e=n.type.indexer.value,o=h?d:(0,a.M9S)(t,e,"application/xml");if("Scalar"===e.kind){let n={};t.checker.isStdType(e)?n=(0,s.N)(e,r):e.baseScalar&&(n=(0,s.N)(e.baseScalar,r)),n.xml={name:o},l.items=n}else{let e=new i.$j;e.push(l.items),l.items=new i.Tl({allOf:e,xml:{name:o}})}h||(c.wrapped=!0)}g||l.type||y||(p.allOf=new i.$j,p.allOf.push(l),c.name=d),g&&h&&delete c.name,0!==Object.keys(c).length&&(p.xml=c)}}}function u(e,t,r){if(t.decorators&&t.decorators.some(e=>e.definition?.namespace.name==="Xml"))return!0;let n=(0,a.M9S)(e,t,"application/xml");if(n&&n!==t.name)return!0;if("ModelProperty"===t.kind){let n=t.type;if(n&&!r.includes(n.name)&&(r.push(n.name),u(e,n,r)))return!0}if("Model"===t.kind)for(let n of t.properties.values()){if(u(e,n,r))return!0;if(n.type?.kind==="Model"&&(0,a.x3v)(e,n.type)){let t=n.type.indexer.value;if(t&&!r.includes(t.name)&&(r.push(t.name),u(e,t,r)))return!0}}return!1}async function c(){try{return await r.e(888).then(r.bind(r,74888))}catch{return}}[a,i,o]=p.then?(await p)():p,n()}catch(e){n(e)}})},66791:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{BP:()=>y,HF:()=>l,Sv:()=>h,T0:()=>d,dL:()=>function e(t,r,n=!0){let o=new Map;if("Namespace"===r.kind){let a=r;for(;a;){let r=c(t,a);if(r){for(let e of r)o.set(e.namespace,e);return o}if(n){let r=l(t,a)?.getVersions();if(r?.length){let n=e(t,r[0].enumMember.enum);if(n)return n}}a=a.namespace}return}if("Enum"===r.kind){let e=t.stateMap(a.ej.useDependencyEnum).get(r);if(!e)return;let n=function(e,t){if(!(t instanceof Map))return t;let r=new Map;for(let[n,a]of t){let t=(0,i.zs)(e,n);void 0!==t&&r.set(t,a)}return r}(t,e);if(n instanceof Map)for(let[e,r]of n)for(let n of r){let r=n.enumMember.enum.namespace;if(!r){(0,a.wl)(t,{code:"version-not-found",target:n.enumMember.enum,format:{version:n.enumMember.name,enumName:n.enumMember.enum.name}});return}let i=o.get(r);i?i.set(e,n):i=new Map([[e,n]]),o.set(r,i)}}return o},df:()=>f,i2:()=>b,v4:()=>u,x9:()=>g,zZ:()=>m,zp:()=>p});var a=r(60158),i=r(86345),o=e([a,i]);function s(e,t,r){let n=(0,i.zs)(e,t);return n||(0,a.wl)(e,{code:"version-not-found",target:r,format:{version:t.name,enumName:t.enum.name}}),n}[a,i]=o.then?(await o)():o;let d=(e,t,r)=>{let{program:n}=e,i=s(e.program,r,e.getArgumentTarget(0));if(!i)return;let o=n.stateMap(a.ej.addedOn).get(t)??[];o.push(i),o.sort((e,t)=>e.index-t.index),n.stateMap(a.ej.addedOn).set(t,o)};function p(e,t,r){let{program:n}=e,i=s(e.program,r,e.getArgumentTarget(0));if(!i)return;let o=n.stateMap(a.ej.removedOn).get(t)??[];o.push(i),o.sort((e,t)=>e.index-t.index),n.stateMap(a.ej.removedOn).set(t,o)}let m=(e,t,r,n)=>{let{program:i}=e,o=s(e.program,r,e.getArgumentTarget(0));if(!o)return;let p=i.stateMap(a.ej.typeChangedFrom).get(t)??new Map;p.set(o,n),p=new Map([...p.entries()].sort((e,t)=>e[0].index-t[0].index)),i.stateMap(a.ej.typeChangedFrom).set(t,p)},f=(e,t,r,n)=>{let{program:i}=e,o=s(e.program,r,e.getArgumentTarget(0));if(!o)return;let p=i.stateMap(a.ej.returnTypeChangedFrom).get(t)??new Map;p.set(o,n),p=new Map([...p.entries()].sort((e,t)=>e[0].index-t[0].index)),i.stateMap(a.ej.returnTypeChangedFrom).set(t,p)},y=(e,t,r,n)=>{var i,o;let{program:p}=e,l=s(e.program,r,e.getArgumentTarget(0));if(!l)return;""===n&&(0,a.wl)(p,{code:"invalid-renamed-from-value",target:t});let u=(i=p,o=t,i.stateMap(a.ej.renamedFrom).get(o)??[]);u.push({version:l,oldName:n}),u.sort((e,t)=>e.version.index-t.version.index),p.stateMap(a.ej.renamedFrom).set(t,u)},h=(e,t,r)=>{let{program:n}=e,i=s(e.program,r,e.getArgumentTarget(0));i&&n.stateMap(a.ej.madeOptional).set(t,i)},g=(e,t,r)=>{let{program:n}=e,i=s(e.program,r,e.getArgumentTarget(0));i&&n.stateMap(a.ej.madeRequired).set(t,i)};class v{map=new Map;constructor(e,t){let r=0;for(let n of t.members.values())this.map.set(n,{name:n.name,value:n.value?.toString()??n.name,enumMember:n,index:r,namespace:e}),r++}getVersionForEnumMember(e){return this.map.get(e)}getVersions(){return[...this.map.values()]}get size(){return this.map.size}}let b=(e,t,r)=>{e.program.stateMap(a.ej.versions).set(t,new v(t,r))};function l(e,t){return e.stateMap(a.ej.versions).get(t)}function u(e,t,...r){let n=[];for(let t of r){let r=s(e.program,t,e.getArgumentTarget(0));r&&n.push(r)}if("Namespace"===t.kind){let r=c(e.program,t);r?r.push(...n):r=n,e.program.stateMap(a.ej.useDependencyNamespace).set(t,r)}else if("EnumMember"===t.kind){let r=t.enum,i=e.program.stateMap(a.ej.useDependencyEnum).get(r);i||(i=new Map);let o=i.get(t)??[];o.push(...n),i.set(t,o),e.program.stateMap(a.ej.useDependencyEnum).set(r,i)}}function c(e,t){return e.stateMap(a.ej.useDependencyNamespace).get(t)}n()}catch(e){n(e)}})},70325:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{t4:()=>i.t});var a=r(66791),i=r(61176),o=r(45495),s=r(86345),p=r(30843),l=e([a,i,o,s,p]);[a,i,o,s,p]=l.then?(await l)():l,n()}catch(e){n(e)}})},60158:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{ej:()=>p,wl:()=>o});var a=r(7502),i=e([a]);a=(i.then?(await i)():i)[0];let{reportDiagnostic:o,createStateSymbol:s,stateKeys:p}=(0,a.vLS)({name:"@typespec/versioning",diagnostics:{"versioned-dependency-tuple":{severity:"error",messages:{default:"Versioned dependency mapping must be a tuple [SourceVersion, TargetVersion]."}},"versioned-dependency-tuple-enum-member":{severity:"error",messages:{default:"Versioned dependency mapping must be between enum members."}},"versioned-dependency-same-namespace":{severity:"error",messages:{default:"Versioned dependency mapping must all point to the same namespace but 2 versions have different namespaces 'namespace1' and 'namespace2'."}},"versioned-dependency-record-not-mapping":{severity:"error",messages:{default:(0,a.J8Y)`The versionedDependency decorator must provide a model mapping local versions to dependency '${"dependency"}' versions`}},"versioned-dependency-not-picked":{severity:"error",messages:{default:(0,a.J8Y)`The versionedDependency decorator must provide a version of the dependency '${"dependency"}'.`}},"version-not-found":{severity:"error",messages:{default:(0,a.J8Y)`The provided version '${"version"}' from '${"enumName"}' is not declared as a version enum. Use '@versioned(${"enumName"})' on the containing namespace.`}},"version-duplicate":{severity:"error",messages:{default:(0,a.J8Y)`Multiple versions from '${"name"}' resolve to the same value. Version enums must resolve to unique values.`}},"using-versioned-library":{severity:"error",messages:{default:(0,a.J8Y)`Namespace '${"sourceNs"}' is referencing types from versioned namespace '${"targetNs"}' but didn't specify which versions with @useDependency.`}},"invalid-renamed-from-value":{severity:"error",messages:{default:"@renamedFrom.oldName cannot be empty string."}},"no-service-fixed-version":{severity:"error",messages:{default:(0,a.J8Y)`Namespace '${"name"}' cannot specify a fixed service version with @service({version: ${"version"}}) while using @versioned. Remove the version argument from @service.`}},"incompatible-versioned-reference":{severity:"error",messages:{default:(0,a.J8Y)`'${"sourceName"}' is referencing versioned type '${"targetName"}' but is not versioned itself.`,addedAfter:(0,a.J8Y)`'${"sourceName"}' was added in version '${"sourceAddedOn"}' but referencing type '${"targetName"}' added in version '${"targetAddedOn"}'.`,dependentAddedAfter:(0,a.J8Y)`'${"sourceName"}' was added in version '${"sourceAddedOn"}' but contains type '${"targetName"}' added in version '${"targetAddedOn"}'.`,removedBefore:(0,a.J8Y)`'${"sourceName"}' was removed in version '${"sourceRemovedOn"}' but referencing type '${"targetName"}' removed in version '${"targetRemovedOn"}'.`,dependentRemovedBefore:(0,a.J8Y)`'${"sourceName"}' was removed in version '${"sourceRemovedOn"}' but contains type '${"targetName"}' removed in version '${"targetRemovedOn"}'.`,versionedDependencyAddedAfter:(0,a.J8Y)`'${"sourceName"}' is referencing type '${"targetName"}' added in version '${"targetAddedOn"}' but version used is ${"dependencyVersion"}.`,versionedDependencyRemovedBefore:(0,a.J8Y)`'${"sourceName"}' is referencing type '${"targetName"}' removed in version '${"targetAddedOn"}' but version used is ${"dependencyVersion"}.`,doesNotExist:(0,a.J8Y)`'${"sourceName"}' is referencing type '${"targetName"}' which does not exist in version '${"version"}'.`}},"incompatible-versioned-namespace-use-dependency":{severity:"error",messages:{default:"The useDependency decorator can only be used on a Namespace if the namespace is unversioned. For versioned namespaces, put the useDependency decorator on the version enum members."}},"made-optional-not-optional":{severity:"error",messages:{default:(0,a.J8Y)`Property '${"name"}' marked with @madeOptional but is required. Should be '${"name"}?'`}},"made-required-optional":{severity:"error",messages:{default:(0,a.J8Y)`Property '${"name"}?' marked with @madeRequired but is optional. Should be '${"name"}'`}},"renamed-duplicate-property":{severity:"error",messages:{default:(0,a.J8Y)`Property '${"name"}' marked with '@renamedFrom' conflicts with existing property in version ${"version"}.`}}},state:{versionIndex:{description:"Version index"},addedOn:{description:"State for @addedOn decorator"},removedOn:{description:"State for @removedOn decorator"},versions:{description:"State for @versioned decorator"},useDependencyNamespace:{description:"State for @useDependency decorator on Namespaces"},useDependencyEnum:{description:"State for @useDependency decorator on Enums"},renamedFrom:{description:"State for @renamedFrom decorator"},madeOptional:{description:"State for @madeOptional decorator"},madeRequired:{description:"State for @madeRequired decorator"},typeChangedFrom:{description:"State for @typeChangedFrom decorator"},returnTypeChangedFrom:{description:"State for @returnTypeChangedFrom decorator"}}});n()}catch(e){n(e)}})},61176:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{t:()=>p});var a=r(60158),i=r(69693),o=r(86345),s=e([a,i,o]);function p(e,t){let r=(0,o.St)(e,t),n=new i.C(e,r.map(e=>e.versions));return r.map(t=>{if(0===t.versions.size)return{version:void 0,projections:[]};{let r=function(e,t,r){let n=e.checker.createType({kind:"Object",properties:{}});return e.stateMap(a.ej.versionIndex).set(n,{timeline:t,projectingMoment:r}),n}(e,n,n.get(t.versions.values().next().value));return{version:t.rootVersion?.value,projections:[{projectionName:"v",arguments:[r]}]}}})}[a,i,o]=s.then?(await s)():s,n()}catch(e){n(e)}})},30843:(e,t,r)=>{r.a(e,async(e,t)=>{try{var n=r(66791),a=r(60158),i=e([n,a]);[n,a]=i.then?(await i)():i,n.i2,n.v4,n.T0,n.zp,n.BP,n.Sv,n.x9,n.zZ,n.df,t()}catch(e){t(e)}})},45495:(e,t,r)=>{r.a(e,async(e,t)=>{try{var n=r(7502),a=r(66791),i=r(60158),o=r(86345),s=e([n,a,i,o]);function p(e,t){let r=Array.isArray(t)?t:[t],n=r[0],a=function(e,t){for(let r of t){let t=getAvailabilityMap(e,r);if(t)return t;switch(r.kind){case"Operation":{let t=r.interface&&getAvailabilityMap(e,r.interface);if(t)return t;break}case"ModelProperty":{let t=r.model&&getAvailabilityMap(e,r.model);if(t)return t}}}}(e,r);return{type:n,map:a}}[n,a,i,o]=s.then?(await s)():s;function l(e,t,r){let n=!1;for(let[a,i]of r){if(e===a){n=!0;continue}if(n&&i===t)return a}}function u(e,t,r){let n=!1;for(let[a,i]of r)if([Availability.Added,Availability.Added].includes(i)&&(n=!0),n){if(i===t)return a;if(a===e)break}}function c(e,t){return"ModelProperty"===e.kind&&function(e,t){if(void 0===e.sourceProperty)return!1;let r="added"===t?$added:$removed,n=e.decorators.filter(e=>e.decorator===r),a=e.sourceProperty.decorators.filter(e=>e.decorator===r);return!n.some(e=>!a.some(t=>e.node===t.node))}(e,t)}function d(e){return e?.value??"<n/a>"}t()}catch(e){t(e)}})},69693:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{C:()=>s});var a=r(7502),i=r(86345),o=e([a,i]);[a,i]=o.then?(await o)():o;class s{#S;#C;#O;#$;constructor(e,t){let r=new Set,n=new Set,a=this.#C=t.map(e=>new p(e));for(let e of t)for(let[t,a]of e.entries())r.add(a),n.add(t);for(let t of(this.#S=[...n],n)){let[,n]=(0,i.cS)(e,t);if(void 0!==n){for(let e of n.getVersions())if(!r.has(e)){r.add(e);let t=function(e){for(let[t,r]of a.entries()){let n=r.getVersion(e.namespace);if(n&&e.index<n.index)return t}return -1}(e),n=new p(new Map([[e.namespace,e]]));-1===t?a.push(n):a.splice(t,0,n)}}}for(let[e,t]of(this.#$=new Map,this.#O=new Map,a.entries()))for(let r of(this.#O.set(t,e),t.versions()))this.#$.has(r)||this.#$.set(r,e)}prettySerialize(){let e="-".repeat(13*this.#S.length+1),t=this.#C.map(e=>"| "+this.#S.map(t=>(e.getVersion(t)?.name??"").padEnd(10," ")).join(" | ")+" |").join(`
${e}
`);return["",e,t,e].join("\n")}get(e){let t=this.getIndex(e);return -1===t&&(e instanceof p?(0,a.a70)(!1,`Timeline moment "${e?.name}" should have been resolved`):(0,a.a70)(!1,`Version "${e?.name}" from ${(0,a.Uzb)(e.namespace)} should have been resolved. ${this.prettySerialize()}`)),this.#C[t]}getIndex(e){let t=e instanceof p?this.#O.get(e):this.#$.get(e);return void 0===t?-1:t}isBefore(e,t){let r=this.getIndex(e),n=this.getIndex(t);return r<n}first(){return this.#C[0]}[Symbol.iterator](){return this.#C[Symbol.iterator]()}entries(){return this.#C.entries()}}class p{name;#P;constructor(e){this.#P=e,this.name=e.values().next().value?.name??""}getVersion(e){return this.#P.get(e)}versions(){return this.#P.values()}}n()}catch(e){n(e)}})},86345:(e,t,r)=>{r.a(e,async(e,n)=>{try{r.d(t,{St:()=>c,cS:()=>m,zs:()=>f});var a,i=r(7502),o=r(66791),s=r(69693),p=e([i,o,s]);function l(e,t){let r=(0,o.dL)(e,t);if(r)return r}function u(e,t){let r=new Map(t),n=[...t.entries()];for(;n.length>0;){let[t,a]=n.pop();for(let[o,s]of l(e,t)??new Map){if(r.has(o))continue;if(!(s instanceof Map)){let e=(0,i.QnV)(t),r=(0,i.QnV)(o);throw Error(`Unexpected error: Namespace ${e} version dependency to ${r} should be a mapping of version.`)}let e=s.get(a);n.push([o,e]),r.set(o,e)}}return r}function c(e,t){let[r,n]=m(e,t),a=(r&&l(e,r))??new Map;if(n)return n.getVersions().map(t=>{let n=u(e,new Map([[r,t]]));return{rootVersion:t,versions:n}});if(0===a.size)return[{rootVersion:void 0,versions:new Map}];{let r=new Map;for(let[e,n]of a){if(n instanceof Map){let r=(0,i.QnV)(t),n=(0,i.QnV)(e);throw Error(`Unexpected error: Namespace ${r} version dependency to ${n} should be a picked version.`)}r.set(e,n)}return[{rootVersion:void 0,versions:u(e,r)}]}}[i,o,s]=p.then?(await p)():p;let y=new WeakMap;function d(e,t){return y.set(e,t),t}function m(e,t){let r=y.get(t);if(r)return r;switch(t.kind){case"Namespace":return function(e,t){let r=(0,o.HF)(e,t);if(void 0!==r)return d(t,[t,r]);let n=t.namespace&&m(e,t.namespace)[1],a=(0,o.dL)(e,t);return n||a?d(t,[t,n]):d(t,[t,void 0])}(e,t);case"Operation":case"Interface":case"Model":case"Union":case"Scalar":case"Enum":if(t.namespace)return d(t,m(e,t.namespace)||[]);if("Operation"===t.kind&&t.interface)return d(t,m(e,t.interface)||[]);return d(t,[]);case"ModelProperty":if(t.sourceProperty)return m(e,t.sourceProperty);if(t.model)return m(e,t.model);return d(t,[]);case"EnumMember":return d(t,m(e,t.enum)||[]);case"UnionVariant":return d(t,m(e,t.union)||[]);default:return d(t,[])}}function f(e,t){let r=(t=t.projectionBase??t).enum,[,n]=function(e,t){let r=t.namespace;if(void 0===r)return[];let n=(0,o.HF)(e,r);return void 0===n?[]:[r,n]}(e,r);return n?.getVersionForEnumMember(t)}!function(e){e.Unavailable="Unavailable",e.Added="Added",e.Available="Available",e.Removed="Removed"}(a||(a={})),n()}catch(e){n(e)}})}}]);