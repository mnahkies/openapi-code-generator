(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7793],{44425:e=>{e.exports={loader:"loading-spinner_loader__iwj1w",rotation:"loading-spinner_rotation__fDCh2"}},46150:e=>{e.exports={editorContainer:"playground_editorContainer__4wS4H"}},55626:e=>{e.exports={container:"config-form_container__wMxrZ"}},70369:(e,t,s)=>{"use strict";t.Rj=t.Qn=void 0;s(65371),s(68930),s(79569),s(41977),s(49238),s(65305);var n=s(22565);Object.defineProperty(t,"Qn",{enumerable:!0,get:function(){return n.configSchema}}),s(99752);var i=s(67486);Object.defineProperty(t,"Rj",{enumerable:!0,get:function(){return i.WebFsAdaptor}}),s(20680),s(64496),s(98482)},97793:(e,t,s)=>{"use strict";s.d(t,{default:()=>z});var n=s(14627),i=s(29442),r=s(48112),a=s(70369),o=s(55582),l=s(33905),p=s(89155),u=s(27615),c=s(76619),d=s(44425),m=s.n(d);let h=()=>(0,n.jsx)("span",{className:m().loader}),g=["petstore-expanded.yaml","okta.oauth.yaml","api.github.com.yaml","stripe.yaml"];function y(e){let{field:t}=(0,u.as)(e);return(0,p.useEffect)(()=>{t.value!==e.values[0]&&e.values[0]&&!e.values.includes(t.value)&&t.onChange({target:{value:e.values[0]}})},[t.value,t.onChange,e.values]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("label",{htmlFor:t.name,children:e.label}),(0,n.jsx)("select",{id:t.name,onChange:t.onChange,value:t.value,children:e.values.map(e=>(0,n.jsx)("option",{value:e,children:e||"(default)"},e))})]})}var f=s(80194);let k=async(e,t,s)=>{let n="file:///";for(let t of(e.languages.typescript.typescriptDefaults.setCompilerOptions({...e.languages.typescript.typescriptDefaults.getCompilerOptions(),moduleResolution:e.languages.typescript.ModuleResolutionKind.NodeJs,target:e.languages.typescript.ScriptTarget.ES2020,allowSyntheticDefaultImports:!0,esModuleInterop:!0,rootDir:n}),({"typescript-angular":[],"typescript-fetch":[{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/package.json",path:"/node_modules/@nahkies/typescript-fetch-runtime/package.json"},{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/dist/main.d.ts",path:"/node_modules/@nahkies/typescript-fetch-runtime/main.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/dist/zod-v3.d.ts",path:"/node_modules/@nahkies/typescript-fetch-runtime/zod-v3.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/dist/zod-v4.d.ts",path:"/node_modules/@nahkies/typescript-fetch-runtime/zod-v4.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/dist/joi.d.ts",path:"/node_modules/@nahkies/typescript-fetch-runtime/joi.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/dist/common.d.ts",path:"/node_modules/@nahkies/typescript-fetch-runtime/common.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/dist/types.d.ts",path:"/node_modules/@nahkies/typescript-fetch-runtime/types.d.ts"}],"typescript-axios":[{uri:"https://unpkg.com/@nahkies/typescript-axios-runtime@latest/package.json",path:"/node_modules/@nahkies/typescript-axios-runtime/package.json"},{uri:"https://unpkg.com/@nahkies/typescript-axios-runtime@latest/dist/main.d.ts",path:"/node_modules/@nahkies/typescript-axios-runtime/main.d.ts"}],"typescript-koa":[{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/package.json",path:"/node_modules/@nahkies/typescript-koa-runtime/package.json"},{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/dist/server.d.ts",path:"/node_modules/@nahkies/typescript-koa-runtime/server.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/dist/errors.d.ts",path:"/node_modules/@nahkies/typescript-koa-runtime/errors.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/dist/zod-v3.d.ts",path:"/node_modules/@nahkies/typescript-koa-runtime/zod-v3.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/dist/zod-v4.d.ts",path:"/node_modules/@nahkies/typescript-koa-runtime/zod-v4.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/dist/joi.d.ts",path:"/node_modules/@nahkies/typescript-koa-runtime/joi.d.ts"}],"typescript-express":[{uri:"https://unpkg.com/@nahkies/typescript-express-runtime@latest/package.json",path:"/node_modules/@nahkies/typescript-express-runtime/package.json"},{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/dist/server.d.ts",path:"/node_modules/@nahkies/typescript-koa-runtime/server.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/dist/errors.d.ts",path:"/node_modules/@nahkies/typescript-koa-runtime/errors.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-express-runtime@latest/dist/zod-v3.d.ts",path:"/node_modules/@nahkies/typescript-express-runtime/zod-v3.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-express-runtime@latest/dist/zod-v4.d.ts",path:"/node_modules/@nahkies/typescript-express-runtime/zod-v4.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-express-runtime@latest/dist/joi.d.ts",path:"/node_modules/@nahkies/typescript-express-runtime/joi.d.ts"}]})[s])){let s=e.Uri.file(t.path);if(!e.editor.getModel(s)){let n=await (await fetch(t.uri)).text();console.info("createModel for ".concat(s.path)),e.editor.createModel(n,"typescript",s)}}return f.AutoTypings.create(t,{monaco:e,fileRootPath:n,sourceCache:new f.LocalStorageCache,onUpdate:e=>console.log("progress",e),onError:e=>console.error(e),dontAdaptEditorOptions:!0,preloadPackages:!0,shareCache:!0,versions:{zod:"4.1.12"}})};function x(e,t){null==e||e.postMessage(t)}function j(e){let{field:t}=(0,u.as)(e);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("label",{htmlFor:t.name,children:e.label}),(0,n.jsx)("input",{id:t.name,type:"checkbox",checked:t.value,onChange:t.onChange})]})}var v=s(55626),b=s.n(v);let _=a.Qn.pick({template:!0,schemaBuilder:!0,enableRuntimeResponseValidation:!0,enableTypedBasePaths:!0,extractInlineSchemas:!0,groupingStrategy:!0,tsAllowAny:!0,tsServerImplementationMethod:!0,tsIsEsmProject:!0,enumExtensibility:!0}),S=e=>{let{config:t,setConfig:s}=e,{control:r,watch:a}=(0,u.mN)({resolver:(0,i.u)(_),defaultValues:{template:t.template,schemaBuilder:t.schemaBuilder,enableRuntimeResponseValidation:t.enableRuntimeResponseValidation,enableTypedBasePaths:t.enableTypedBasePaths,extractInlineSchemas:t.extractInlineSchemas,groupingStrategy:t.groupingStrategy,tsAllowAny:t.tsAllowAny,tsServerImplementationMethod:t.tsServerImplementationMethod,tsIsEsmProject:t.tsIsEsmProject,enumExtensibility:t.enumExtensibility}});return(0,p.useEffect)(()=>{let{unsubscribe:e}=a(e=>{s({...t,...e})});return()=>e()},[a,t,s]),(0,n.jsxs)("div",{className:b().container,children:[(0,n.jsx)(y,{name:"template",control:r,label:"--template",values:_.shape.template.options},"template"),(0,n.jsx)(y,{name:"schemaBuilder",control:r,label:"--schema-builder",values:_.shape.schemaBuilder.options}),(0,n.jsx)(j,{label:"--enable-runtime-response-validation",name:"enableRuntimeResponseValidation",control:r}),(0,n.jsx)(j,{label:"--enable-typed-base-paths",name:"enableTypedBasePaths",control:r}),(0,n.jsx)(j,{label:"--extract-inline-schemas",name:"extractInlineSchemas",control:r}),(0,n.jsx)(j,{label:"--ts-allow-any",name:"tsAllowAny",control:r}),(0,n.jsx)(j,{label:"--ts-is-esm-project",name:"tsIsEsmProject",control:r}),(0,n.jsx)(y,{name:"tsServerImplementationMethod",control:r,label:"--ts-server-implementation-method",values:_.shape.tsServerImplementationMethod.options}),(0,n.jsx)(y,{name:"groupingStrategy",control:r,label:"--grouping-strategy",values:_.shape.groupingStrategy.options}),(0,n.jsx)(y,{name:"enumExtensibility",control:r,label:"--enum-extensibility",values:_.shape.enumExtensibility.options})]})};var E=s(46150),w=s.n(E);let C=async e=>{try{let t=await fetch("/samples/".concat(e)),s=await t.text();if(t.ok)return s;return"Failed to load sample. ".concat(s)}catch(e){return"Failed to load sample. ".concat(e instanceof Error?e.message:e)}},M={input:"/example.yaml",output:"/generated",template:"typescript-fetch",inputType:"openapi3",schemaBuilder:"zod-v4",enableRuntimeResponseValidation:!0,extractInlineSchemas:!0,allowUnusedImports:!1,groupingStrategy:"first-tag",tsAllowAny:!1,tsCompilerOptions:{exactOptionalPropertyTypes:!1},enableTypedBasePaths:!0,filenameConvention:"kebab-case",tsIsEsmProject:!1,tsServerImplementationMethod:"type",enumExtensibility:""},I=e=>{let{children:t}=e;return(0,n.jsx)("div",{style:{display:"flex",gap:"0.5rem",margin:"0.5rem 0"},children:t})},R=e=>{let{editor:t}=e,s=(0,p.useCallback)(()=>{null==t||t.trigger("fold","editor.foldAll",void 0)},[t]),i=(0,p.useCallback)(()=>{null==t||t.trigger("fold","editor.unfoldAll",void 0)},[t]);return(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",marginTop:"0.5rem",alignItems:"center"},children:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"1rem"},children:[(0,n.jsx)("button",{type:"button",onClick:s,children:"Fold All"}),(0,n.jsx)("button",{type:"button",onClick:i,children:"Unfold All"})]})})},A=e=>{let{result:t}=e;if(!t||t.loading)return(0,n.jsx)(o.P,{type:"info",emoji:"✅",children:(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Running generation"}),(0,n.jsx)("br",{}),(0,n.jsx)(h,{})]})});if(t.success){let{elapsed:e}=t.result;return(0,n.jsx)(o.P,{type:"info",emoji:"✅",children:(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Generation success"}),(0,n.jsx)("br",{}),"Generation ran in ",e,"ms"]})})}if(!t.success){let e=t.err,s=t.err.cause;return(0,n.jsx)(o.P,{type:"warning",emoji:"⚠️",children:(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:e.message}),(0,n.jsx)("br",{}),s instanceof Error?"Details: ".concat(s.message):null]})})}return null},P=e=>{let{monaco:t,webFsAdaptor:a,defaultSample:o,samples:d}=e,m=(0,l.R)(),h=(0,p.useRef)(null),[g,f]=(0,p.useState)(M),[j,v]=(0,p.useState)(null),[b,_]=(0,p.useState)(),[E,P]=(0,p.useState)(),[z,F]=(0,p.useState)([]),V=t.editor.getModel(t.Uri.file(g.input)),{control:B,watch:D}=(0,u.mN)({resolver:(0,i.u)(c.Ik({input:c.Yj(),output:c.Yj().optional()})),defaultValues:{input:o.filename,output:""}}),O=D("input"),T=D("output");(0,p.useEffect)(()=>(h.current||(h.current=new Worker(s.tu(new URL(s.p+s.u(4777),s.b)))),!function(e,t){e.onmessage=e=>{console.info("received event from worker",e),t(e.data)},e.onerror=e=>{console.info("received error event from worker",e)}}(h.current,async e=>{if(e.success){for(let[s,n]of(a.clearFiles(e=>e.includes("/generated/")),e.result.files))await a.writeFile(s,n),function(e,t){let{filename:s,value:n}=e,i=t.Uri.file(s),r=s.endsWith(".ts")?"typescript":"yaml";if(t.editor.getModel(i)){var a;null==(a=t.editor.getModel(i))||a.setValue(n)}else t.editor.createModel(n,r,i)}({filename:s,value:n},t);F(t.editor.getModels().filter(e=>e.uri.path.includes("/generated/")&&a.existsSync(e.uri.path)).map(e=>e.uri.path))}v(e)}),()=>{h.current&&(h.current.terminate(),h.current=null)}),[a,t]);let U=(0,p.useCallback)(e=>_(e),[]),N=(0,p.useCallback)(e=>P(e),[]);return(0,p.useEffect)(()=>{if(!b)return;let e=t.Uri.file(g.input);t.editor.getModel(e)||(t.editor.createModel(o.content,"yaml",e),x(h.current,{type:"generate",config:g,input:o.content}));let s=t.editor.getModel(e);if(b.setModel(s),!s)return;let n=s.onDidChangeContent(()=>{console.info("input changed");let e=s.getValue();e&&x(h.current,{type:"generate",config:g,input:e})});return()=>{n.dispose()}},[t,b,g,o]),(0,p.useEffect)(()=>{let e=d.find(e=>e===O);!e||!V||V.isDisposed()||(V.setValue("Loading..."),C(e).then(e=>V.setValue(e)))},[O,V,d]),(0,p.useEffect)(()=>{let e=T&&t.editor.getModel(t.Uri.file(T));!E||!e||e.isDisposed()||E.getModel()!==e&&E.setModel(e)},[T,E,t]),(0,p.useEffect)(()=>{let e;if(E)return k(t,E,g.template).then(t=>{e=t}).catch(e=>{v({success:!1,loading:!1,err:Error("Failed to load typescript typings",{cause:e})})}),()=>null==e?void 0:e.dispose()},[g.template,t,E]),(0,p.useEffect)(()=>{let e=null==V?void 0:V.getValue();e&&x(h.current,{type:"generate",config:g,input:e})},[g,V]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.h3,{children:"Configuration"}),(0,n.jsx)(S,{config:g,setConfig:f}),(0,n.jsxs)("div",{className:w().editorContainer,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(m.h3,{children:"Input Specification"}),(0,n.jsx)(I,{children:(0,n.jsx)(y,{label:"Sample Specification",values:d,name:"input",control:B})}),(0,n.jsx)(r.KE,{height:"30vh",onMount:U,options:{theme:"vs-dark",minimap:{enabled:!1}}}),(0,n.jsx)(R,{editor:b}),(0,n.jsx)(A,{result:j})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(m.h3,{children:"Output"}),(0,n.jsx)(I,{children:(0,n.jsx)(y,{label:"Output File",values:null!=z?z:[""],name:"output",control:B})}),(0,n.jsx)(r.KE,{height:"30vh",defaultLanguage:"typescript",options:{theme:"vs-dark",minimap:{enabled:!1},domReadOnly:!0,readOnly:!0},onMount:N}),(0,n.jsx)(R,{editor:E})]})]})]})},z=()=>{let e=(0,r.dJ)(),[t]=(0,p.useState)(new a.Rj),s=g[0],[i,o]=(0,p.useState)(null);return((0,p.useEffect)(()=>{C(s).then(e=>o({filename:s,content:e}))},[s]),e&&i)?(0,n.jsx)(P,{monaco:e,webFsAdaptor:t,defaultSample:i,samples:g}):null}}}]);