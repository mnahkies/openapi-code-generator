(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8994],{8994:(e,t,s)=>{"use strict";s.d(t,{default:()=>P});var n=s(54568),i=s(46491),a=s.n(i);let r=()=>(0,n.jsx)("span",{className:a().loader}),l=["petstore-expanded.yaml","okta.oauth.yaml","api.github.com.yaml","stripe.yaml"];var o=s(7620),p=s(61938);function u(e){let{field:t}=(0,p.as)(e);return(0,o.useEffect)(()=>{t.value!==e.values[0]&&e.values[0]&&!e.values.includes(t.value)&&t.onChange({target:{value:e.values[0]}})},[t.value,t.onChange,e.values]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("label",{htmlFor:t.name,children:e.label}),(0,n.jsx)("select",{id:t.name,onChange:t.onChange,value:t.value,children:e.values.map(e=>(0,n.jsx)("option",{value:e,children:e||"(default)"},e))})]})}var c=s(20378);let d=async(e,t,s)=>{let n="file:///";for(let t of(e.languages.typescript.typescriptDefaults.setCompilerOptions({...e.languages.typescript.typescriptDefaults.getCompilerOptions(),moduleResolution:e.languages.typescript.ModuleResolutionKind.NodeJs,target:e.languages.typescript.ScriptTarget.ES2020,allowSyntheticDefaultImports:!0,esModuleInterop:!0,rootDir:n}),({"typescript-angular":[],"typescript-fetch":[{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/package.json",path:"/node_modules/@nahkies/typescript-fetch-runtime/package.json"},{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/dist/main.d.ts",path:"/node_modules/@nahkies/typescript-fetch-runtime/main.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/dist/zod.d.ts",path:"/node_modules/@nahkies/typescript-fetch-runtime/zod.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/dist/joi.d.ts",path:"/node_modules/@nahkies/typescript-fetch-runtime/joi.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/dist/common.d.ts",path:"/node_modules/@nahkies/typescript-fetch-runtime/common.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/dist/types.d.ts",path:"/node_modules/@nahkies/typescript-fetch-runtime/types.d.ts"}],"typescript-axios":[{uri:"https://unpkg.com/@nahkies/typescript-axios-runtime@latest/package.json",path:"/node_modules/@nahkies/typescript-axios-runtime/package.json"},{uri:"https://unpkg.com/@nahkies/typescript-axios-runtime@latest/dist/main.d.ts",path:"/node_modules/@nahkies/typescript-axios-runtime/main.d.ts"}],"typescript-koa":[{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/package.json",path:"/node_modules/@nahkies/typescript-koa-runtime/package.json"},{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/dist/server.d.ts",path:"/node_modules/@nahkies/typescript-koa-runtime/server.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/dist/errors.d.ts",path:"/node_modules/@nahkies/typescript-koa-runtime/errors.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/dist/zod.d.ts",path:"/node_modules/@nahkies/typescript-koa-runtime/zod.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/dist/joi.d.ts",path:"/node_modules/@nahkies/typescript-koa-runtime/joi.d.ts"}],"typescript-express":[{uri:"https://unpkg.com/@nahkies/typescript-express-runtime@latest/package.json",path:"/node_modules/@nahkies/typescript-express-runtime/package.json"},{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/dist/server.d.ts",path:"/node_modules/@nahkies/typescript-koa-runtime/server.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/dist/errors.d.ts",path:"/node_modules/@nahkies/typescript-koa-runtime/errors.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-express-runtime@latest/dist/zod.d.ts",path:"/node_modules/@nahkies/typescript-express-runtime/zod.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-express-runtime@latest/dist/joi.d.ts",path:"/node_modules/@nahkies/typescript-express-runtime/joi.d.ts"}]})[s])){let s=e.Uri.file(t.path);if(!e.editor.getModel(s)){let n=await (await fetch(t.uri)).text();console.info("createModel for ".concat(s.path)),e.editor.createModel(n,"typescript",s)}}return c.AutoTypings.create(t,{monaco:e,fileRootPath:n,sourceCache:new c.LocalStorageCache,onUpdate:e=>console.log("progress",e),onError:e=>console.error(e),dontAdaptEditorOptions:!0,preloadPackages:!0,shareCache:!0,versions:{zod:"3.24.1"}})};function m(e,t){null==e||e.postMessage(t)}var h=s(90060),g=s(27855),y=s(22046),f=s(69790),k=s(90599),x=s(20880),j=s(64752),v=s.n(j);function b(e){let{field:t}=(0,p.as)(e);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("label",{htmlFor:t.name,children:e.label}),(0,n.jsx)("input",{id:t.name,type:"checkbox",checked:t.value,onChange:t.onChange})]})}var S=s(62432),_=s.n(S);let w=y.Qn.pick({template:!0,schemaBuilder:!0,enableRuntimeResponseValidation:!0,enableTypedBasePaths:!0,extractInlineSchemas:!0,groupingStrategy:!0,tsAllowAny:!0,tsServerImplementationMethod:!0,enumExtensibility:!0}),C=e=>{let{config:t,setConfig:s}=e,{control:i,watch:a}=(0,p.mN)({resolver:(0,h.u)(w),defaultValues:{template:t.template,schemaBuilder:t.schemaBuilder,enableRuntimeResponseValidation:t.enableRuntimeResponseValidation,enableTypedBasePaths:t.enableTypedBasePaths,extractInlineSchemas:t.extractInlineSchemas,groupingStrategy:t.groupingStrategy,tsAllowAny:t.tsAllowAny,tsServerImplementationMethod:t.tsServerImplementationMethod,enumExtensibility:t.enumExtensibility}});return(0,o.useEffect)(()=>{let{unsubscribe:e}=a(e=>{s({...t,...e})});return()=>e()},[a,t,s]),(0,n.jsxs)("div",{className:_().container,children:[(0,n.jsx)(u,{name:"template",control:i,label:"--template",values:w.shape.template.options},"template"),(0,n.jsx)(u,{name:"schemaBuilder",control:i,label:"--schema-builder",values:w.shape.schemaBuilder.options}),(0,n.jsx)(b,{label:"--enable-runtime-response-validation",name:"enableRuntimeResponseValidation",control:i}),(0,n.jsx)(b,{label:"--enable-typed-base-paths",name:"enableTypedBasePaths",control:i}),(0,n.jsx)(b,{label:"--extract-inline-schemas",name:"extractInlineSchemas",control:i}),(0,n.jsx)(b,{label:"--ts-allow-any",name:"tsAllowAny",control:i}),(0,n.jsx)(u,{name:"tsServerImplementationMethod",control:i,label:"--ts-server-implementation-method",values:w.shape.tsServerImplementationMethod.options}),(0,n.jsx)(u,{name:"groupingStrategy",control:i,label:"--grouping-strategy",values:w.shape.groupingStrategy.options}),(0,n.jsx)(u,{name:"enumExtensibility",control:i,label:"--enum-extensibility",values:w.shape.enumExtensibility.options})]})},M=async e=>{try{let t=await fetch("/samples/".concat(e)),s=await t.text();if(t.ok)return s;return"Failed to load sample. ".concat(s)}catch(e){return"Failed to load sample. ".concat(e instanceof Error?e.message:e)}},E={input:"/example.yaml",output:"/generated",template:"typescript-fetch",inputType:"openapi3",schemaBuilder:"zod",enableRuntimeResponseValidation:!0,extractInlineSchemas:!0,allowUnusedImports:!1,groupingStrategy:"first-tag",tsAllowAny:!1,tsCompilerOptions:{exactOptionalPropertyTypes:!1},enableTypedBasePaths:!0,filenameConvention:"kebab-case",tsServerImplementationMethod:"type",enumExtensibility:""},R=e=>{let{children:t}=e;return(0,n.jsx)("div",{style:{display:"flex",gap:"0.5rem",margin:"0.5rem 0"},children:t})},A=e=>{let{editor:t}=e,s=(0,o.useCallback)(()=>{null==t||t.trigger("fold","editor.foldAll",void 0)},[t]),i=(0,o.useCallback)(()=>{null==t||t.trigger("fold","editor.unfoldAll",void 0)},[t]);return(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",marginTop:"0.5rem",alignItems:"center"},children:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"1rem"},children:[(0,n.jsx)("button",{type:"button",onClick:s,children:"Fold All"}),(0,n.jsx)("button",{type:"button",onClick:i,children:"Unfold All"})]})})},I=e=>{let{result:t}=e;if(!t||t.loading)return(0,n.jsx)(k.P,{type:"info",emoji:"✅",children:(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Running generation"}),(0,n.jsx)("br",{}),(0,n.jsx)(r,{})]})});if(t.success){let{elapsed:e}=t.result;return(0,n.jsx)(k.P,{type:"info",emoji:"✅",children:(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Generation success"}),(0,n.jsx)("br",{}),"Generation ran in ",e,"ms"]})})}if(!t.success){let e=t.err,s=t.err.cause;return(0,n.jsx)(k.P,{type:"warning",emoji:"⚠️",children:(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:e.message}),(0,n.jsx)("br",{}),s instanceof Error?"Details: ".concat(s.message):null]})})}return null},F=e=>{let{monaco:t,webFsAdaptor:i,defaultSample:a,samples:r}=e,l=(0,f.R)(),c=(0,o.useRef)(null),[y,k]=(0,o.useState)(E),[j,b]=(0,o.useState)(null),[S,_]=(0,o.useState)(),[w,F]=(0,o.useState)(),[P,V]=(0,o.useState)([]),z=t.editor.getModel(t.Uri.file(y.input)),{control:B,watch:D}=(0,p.mN)({resolver:(0,h.u)(x.z.object({input:x.z.string(),output:x.z.string().optional()})),defaultValues:{input:a.filename,output:""}}),O=D("input"),T=D("output");(0,o.useEffect)(()=>(c.current||(c.current=new Worker(s.tu(new URL(s.p+s.u(7022),s.b)))),!function(e,t){e.onmessage=e=>{console.info("received event from worker",e),t(e.data)},e.onerror=e=>{console.info("received error event from worker",e)}}(c.current,async e=>{if(e.success){for(let[s,n]of(i.clearFiles(e=>e.includes("/generated/")),e.result.files))await i.writeFile(s,n),function(e,t){let{filename:s,value:n}=e,i=t.Uri.file(s),a=s.endsWith(".ts")?"typescript":"yaml";if(t.editor.getModel(i)){var r;null==(r=t.editor.getModel(i))||r.setValue(n)}else t.editor.createModel(n,a,i)}({filename:s,value:n},t);V(t.editor.getModels().filter(e=>e.uri.path.includes("/generated/")&&i.existsSync(e.uri.path)).map(e=>e.uri.path))}b(e)}),()=>{c.current&&(c.current.terminate(),c.current=null)}),[i,t]);let U=(0,o.useCallback)(e=>_(e),[]),N=(0,o.useCallback)(e=>F(e),[]);return(0,o.useEffect)(()=>{if(!S)return;let e=t.Uri.file(y.input);t.editor.getModel(e)||(t.editor.createModel(a.content,"yaml",e),m(c.current,{type:"generate",config:y,input:a.content}));let s=t.editor.getModel(e);if(S.setModel(s),!s)return;let n=s.onDidChangeContent(()=>{console.info("input changed");let e=s.getValue();e&&m(c.current,{type:"generate",config:y,input:e})});return()=>{n.dispose()}},[t,S,y,a]),(0,o.useEffect)(()=>{let e=r.find(e=>e===O);!e||!z||z.isDisposed()||(z.setValue("Loading..."),M(e).then(e=>z.setValue(e)))},[O,z,r]),(0,o.useEffect)(()=>{let e=T&&t.editor.getModel(t.Uri.file(T));!w||!e||e.isDisposed()||w.getModel()!==e&&w.setModel(e)},[T,w,t]),(0,o.useEffect)(()=>{let e;if(w)return d(t,w,y.template).then(t=>{e=t}).catch(e=>{b({success:!1,loading:!1,err:Error("Failed to load typescript typings",{cause:e})})}),()=>null==e?void 0:e.dispose()},[y.template,t,w]),(0,o.useEffect)(()=>{let e=null==z?void 0:z.getValue();e&&m(c.current,{type:"generate",config:y,input:e})},[y,z]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.h3,{children:"Configuration"}),(0,n.jsx)(C,{config:y,setConfig:k}),(0,n.jsxs)("div",{className:v().editorContainer,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(l.h3,{children:"Input Specification"}),(0,n.jsx)(R,{children:(0,n.jsx)(u,{label:"Sample Specification",values:r,name:"input",control:B})}),(0,n.jsx)(g.KE,{height:"30vh",onMount:U,options:{theme:"vs-dark",minimap:{enabled:!1}}}),(0,n.jsx)(A,{editor:S}),(0,n.jsx)(I,{result:j})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(l.h3,{children:"Output"}),(0,n.jsx)(R,{children:(0,n.jsx)(u,{label:"Output File",values:null!=P?P:[""],name:"output",control:B})}),(0,n.jsx)(g.KE,{height:"30vh",defaultLanguage:"typescript",options:{theme:"vs-dark",minimap:{enabled:!1},domReadOnly:!0,readOnly:!0},onMount:N}),(0,n.jsx)(A,{editor:w})]})]})]})},P=()=>{let e=(0,g.dJ)(),[t]=(0,o.useState)(new y.Rj),s=l[0],[i,a]=(0,o.useState)(null);return((0,o.useEffect)(()=>{M(s).then(e=>a({filename:s,content:e}))},[s]),e&&i)?(0,n.jsx)(F,{monaco:e,webFsAdaptor:t,defaultSample:i,samples:l}):null}},22046:(e,t,s)=>{"use strict";t.Rj=t.Qn=void 0;let n=s(5558),i=s(32865),a=s(63022),r=s(20878),l=s(2901),o=s(72516);var p=s(67156);Object.defineProperty(t,"Qn",{enumerable:!0,get:function(){return p.configSchema}}),s(65829);var u=s(45505);Object.defineProperty(t,"Rj",{enumerable:!0,get:function(){return u.WebFsAdaptor}}),s(14497),s(91445),s(49909)},46491:e=>{e.exports={loader:"loading-spinner_loader__iwj1w",rotation:"loading-spinner_rotation__fDCh2"}},62432:e=>{e.exports={container:"config-form_container__wMxrZ"}},64752:e=>{e.exports={editorContainer:"playground_editorContainer__4wS4H"}}}]);