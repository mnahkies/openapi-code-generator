(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[972],{273:(e,t,n)=>{"use strict";t.Rj=t.Qn=void 0;let r=n(33927),i=n(70186),a=n(68801),s=n(25849),o=n(33574),l=n(85081);var p=n(73933);Object.defineProperty(t,"Qn",{enumerable:!0,get:function(){return p.configSchema}}),n(90516);var c=n(56862);Object.defineProperty(t,"Rj",{enumerable:!0,get:function(){return c.WebFsAdaptor}}),n(20794),n(31020),n(52596)},13650:e=>{e.exports={editorContainer:"playground_editorContainer__4wS4H"}},22621:(e,t,n)=>{"use strict";n.d(t,{O:()=>r});let r=[{data:{overview:"Overview","getting-started":"Getting Started",guides:"Guides",reference:"Reference",404:{display:"hidden",title:""},index:{display:"hidden",title:""},docs:{title:"Docs",type:"page",href:"/"},playground:{type:"page",theme:{layout:"full"}}}},{name:"404",route:"/404",frontMatter:{sidebarTitle:"404"}},{name:"getting-started",route:"/getting-started",children:[{name:"quick-start",route:"/getting-started/quick-start",frontMatter:{sidebarTitle:"Quick Start"}},{name:"tips-for-writing-specifications",route:"/getting-started/tips-for-writing-specifications",frontMatter:{sidebarTitle:"Tips for Writing Specifications"}}]},{name:"guides",route:"/guides",children:[{data:{concepts:"Concepts","client-templates":"Client Templates","server-templates":"Server Templates"}},{name:"client-templates",route:"/guides/client-templates",children:[{name:"typescript-angular",route:"/guides/client-templates/typescript-angular",frontMatter:{sidebarTitle:"TypeScript Angular"}},{name:"typescript-axios",route:"/guides/client-templates/typescript-axios",frontMatter:{sidebarTitle:"TypeScript Axios"}},{name:"typescript-fetch",route:"/guides/client-templates/typescript-fetch",frontMatter:{sidebarTitle:"TypeScript Fetch"}}]},{name:"concepts",route:"/guides/concepts",children:[{name:"authenticated-input-specifications",route:"/guides/concepts/authenticated-input-specifications",frontMatter:{sidebarTitle:"Authenticated Input Specifications"}},{name:"extract-inline-schemas",route:"/guides/concepts/extract-inline-schemas",frontMatter:{sidebarTitle:"Extract Inline Schemas"}},{name:"servers-object-handling",route:"/guides/concepts/servers-object-handling",frontMatter:{sidebarTitle:"Servers Object Handling"}}]},{name:"server-templates",route:"/guides/server-templates",children:[{name:"typescript-koa",route:"/guides/server-templates/typescript-koa",frontMatter:{sidebarTitle:"TypeScript Koa"}}]},{name:"use-with-react-query",route:"/guides/use-with-react-query",frontMatter:{sidebarTitle:"Use with React Query"}}]},{name:"index",route:"/",frontMatter:{sidebarTitle:"Index"}},{name:"overview",route:"/overview",children:[{data:{about:"About","schema-first-design":"Schema-first design",compatibility:"Compatibility",roadmap:"Roadmap"}},{name:"about",route:"/overview/about",frontMatter:{sidebarTitle:"About"}},{name:"compatibility",route:"/overview/compatibility",frontMatter:{sidebarTitle:"Compatibility"}},{name:"roadmap",route:"/overview/roadmap",frontMatter:{sidebarTitle:"Roadmap"}},{name:"schema-first-design",route:"/overview/schema-first-design",frontMatter:{sidebarTitle:"Schema First Design"}}]},{name:"playground",route:"/playground",frontMatter:{sidebarTitle:"Playground"}},{name:"reference",route:"/reference",children:[{name:"cli-options",route:"/reference/cli-options",frontMatter:{sidebarTitle:"CLI Options"}},{name:"release-notes",route:"/reference/release-notes",frontMatter:{sidebarTitle:"Release Notes"}}]}]},35157:e=>{e.exports={loader:"loading-spinner_loader__iwj1w",rotation:"loading-spinner_rotation__fDCh2"}},41782:e=>{e.exports={container:"config-form_container__wMxrZ"}},83395:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/playground",function(){return n(91645)}])},91645:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>V,useTOC:()=>N});var r=n(6029),i=n(404),a=n(22621),s=n(82118),o=n(35157),l=n.n(o);let p=()=>(0,r.jsx)("span",{className:l().loader}),c=["petstore-expanded.yaml","okta.oauth.yaml","api.github.com.yaml","stripe.yaml"];var u=n(55729),d=n(1909);function m(e){let{field:t}=(0,d.as)(e);return(0,u.useEffect)(()=>{t.value!==e.values[0]&&e.values[0]&&!e.values.includes(t.value)&&t.onChange({target:{value:e.values[0]}})},[t.value,t.onChange,e.values]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("label",{htmlFor:t.name,children:e.label}),(0,r.jsx)("select",{id:t.name,onChange:t.onChange,value:t.value,children:e.values.map(e=>(0,r.jsx)("option",{value:e,children:e},e))})]})}var h=n(6435);let g=async(e,t,n)=>{let r="file:///";for(let t of(e.languages.typescript.typescriptDefaults.setCompilerOptions({...e.languages.typescript.typescriptDefaults.getCompilerOptions(),moduleResolution:e.languages.typescript.ModuleResolutionKind.NodeJs,target:e.languages.typescript.ScriptTarget.ES2020,allowSyntheticDefaultImports:!0,esModuleInterop:!0,rootDir:r}),({"typescript-angular":[],"typescript-fetch":[{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/package.json",path:"/node_modules/@nahkies/typescript-fetch-runtime/package.json"},{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/dist/main.d.ts",path:"/node_modules/@nahkies/typescript-fetch-runtime/main.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/dist/zod.d.ts",path:"/node_modules/@nahkies/typescript-fetch-runtime/zod.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/dist/joi.d.ts",path:"/node_modules/@nahkies/typescript-fetch-runtime/joi.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/dist/common.d.ts",path:"/node_modules/@nahkies/typescript-fetch-runtime/common.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/dist/types.d.ts",path:"/node_modules/@nahkies/typescript-fetch-runtime/types.d.ts"}],"typescript-axios":[{uri:"https://unpkg.com/@nahkies/typescript-axios-runtime@latest/package.json",path:"/node_modules/@nahkies/typescript-axios-runtime/package.json"},{uri:"https://unpkg.com/@nahkies/typescript-axios-runtime@latest/dist/main.d.ts",path:"/node_modules/@nahkies/typescript-axios-runtime/main.d.ts"}],"typescript-koa":[{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/package.json",path:"/node_modules/@nahkies/typescript-koa-runtime/package.json"},{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/dist/server.d.ts",path:"/node_modules/@nahkies/typescript-koa-runtime/server.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/dist/errors.d.ts",path:"/node_modules/@nahkies/typescript-koa-runtime/errors.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/dist/zod.d.ts",path:"/node_modules/@nahkies/typescript-koa-runtime/zod.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/dist/joi.d.ts",path:"/node_modules/@nahkies/typescript-koa-runtime/joi.d.ts"}]})[n])){let n=e.Uri.file(t.path);if(!e.editor.getModel(n)){let r=await (await fetch(t.uri)).text();console.info("createModel for ".concat(n.path)),e.editor.createModel(r,"typescript",n)}}return h.AutoTypings.create(t,{monaco:e,fileRootPath:r,sourceCache:new h.LocalStorageCache,onUpdate:e=>console.log("progress",e),onError:e=>console.error(e),dontAdaptEditorOptions:!0,preloadPackages:!0,shareCache:!0,versions:{zod:"3.24.1"}})};function f(e,t){null==e||e.postMessage(t)}var y=n(52789),x=n(98751),b=n(273),v=n(13589),k=n(18844),j=n(31078),w=n(13650),S=n.n(w);function M(e){let{field:t}=(0,d.as)(e);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("label",{htmlFor:t.name,children:e.label}),(0,r.jsx)("input",{id:t.name,type:"checkbox",checked:t.value,onChange:t.onChange})]})}var T=n(41782),C=n.n(T);let _=b.Qn.pick({template:!0,schemaBuilder:!0,enableRuntimeResponseValidation:!0,enableTypedBasePaths:!0,extractInlineSchemas:!0,groupingStrategy:!0,tsAllowAny:!0,tsServerImplementationMethod:!0}),R=e=>{let{config:t,setConfig:n}=e,{control:i,watch:a}=(0,d.mN)({resolver:(0,y.u)(_),defaultValues:{template:t.template,schemaBuilder:t.schemaBuilder,enableRuntimeResponseValidation:t.enableRuntimeResponseValidation,enableTypedBasePaths:t.enableTypedBasePaths,extractInlineSchemas:t.extractInlineSchemas,groupingStrategy:t.groupingStrategy,tsAllowAny:t.tsAllowAny,tsServerImplementationMethod:t.tsServerImplementationMethod}});return(0,u.useEffect)(()=>{let{unsubscribe:e}=a(e=>{n({...t,...e})});return()=>e()},[a,t,n]),(0,r.jsxs)("div",{className:C().container,children:[(0,r.jsx)(m,{name:"template",control:i,label:"--template",values:_.shape.template.options},"template"),(0,r.jsx)(m,{name:"schemaBuilder",control:i,label:"--schema-builder",values:_.shape.schemaBuilder.options}),(0,r.jsx)(M,{label:"--enable-runtime-response-validation",name:"enableRuntimeResponseValidation",control:i}),(0,r.jsx)(M,{label:"--enable-typed-base-paths",name:"enableTypedBasePaths",control:i}),(0,r.jsx)(M,{label:"--extract-inline-schemas",name:"extractInlineSchemas",control:i}),(0,r.jsx)(M,{label:"--ts-allow-any",name:"tsAllowAny",control:i}),(0,r.jsx)(m,{name:"tsServerImplementationMethod",control:i,label:"--ts-server-implementation-method",values:_.shape.tsServerImplementationMethod.options}),(0,r.jsx)(m,{name:"groupingStrategy",control:i,label:"--grouping-strategy",values:_.shape.groupingStrategy.options})]})},A=async e=>{try{let t=await fetch("/samples/".concat(e)),n=await t.text();if(t.ok)return n;return"Failed to load sample. ".concat(n)}catch(e){return"Failed to load sample. ".concat(e instanceof Error?e.message:e)}},E={input:"/example.yaml",output:"/generated",template:"typescript-fetch",inputType:"openapi3",schemaBuilder:"zod",enableRuntimeResponseValidation:!0,extractInlineSchemas:!0,allowUnusedImports:!1,groupingStrategy:"first-tag",tsAllowAny:!1,tsCompilerOptions:{exactOptionalPropertyTypes:!1},enableTypedBasePaths:!0,filenameConvention:"kebab-case",tsServerImplementationMethod:"type"},I=e=>{let{children:t}=e;return(0,r.jsx)("div",{style:{display:"flex",gap:"0.5rem",margin:"0.5rem 0"},children:t})},O=e=>{let{editor:t}=e,n=(0,u.useCallback)(()=>{null==t||t.trigger("fold","editor.foldAll",void 0)},[t]),i=(0,u.useCallback)(()=>{null==t||t.trigger("fold","editor.unfoldAll",void 0)},[t]);return(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",marginTop:"0.5rem",alignItems:"center"},children:(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"1rem"},children:[(0,r.jsx)("button",{type:"button",onClick:n,children:"Fold All"}),(0,r.jsx)("button",{type:"button",onClick:i,children:"Unfold All"})]})})},P=e=>{let{result:t}=e;if(!t||t.loading)return(0,r.jsx)(k.P,{type:"info",emoji:"✅",children:(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Running generation"}),(0,r.jsx)("br",{}),(0,r.jsx)(p,{})]})});if(t.success){let{elapsed:e}=t.result;return(0,r.jsx)(k.P,{type:"info",emoji:"✅",children:(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Generation success"}),(0,r.jsx)("br",{}),"Generation ran in ",e,"ms"]})})}if(!t.success){let e=t.err,n=t.err.cause;return(0,r.jsx)(k.P,{type:"warning",emoji:"⚠️",children:(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:e.message}),(0,r.jsx)("br",{}),n instanceof Error?"Details: ".concat(n.message):null]})})}return null},F=e=>{let{monaco:t,webFsAdaptor:i,defaultSample:a,samples:s}=e,o=(0,v.pN)(),l=(0,v.Py)({isRawLayout:!1,components:o.components}),p=(0,u.useRef)(null),[c,h]=(0,u.useState)(E),[b,k]=(0,u.useState)(null),[w,M]=(0,u.useState)(),[T,C]=(0,u.useState)(),[_,F]=(0,u.useState)([]),D=t.editor.getModel(t.Uri.file(c.input)),{control:N,watch:V}=(0,d.mN)({resolver:(0,y.u)(j.z.object({input:j.z.string(),output:j.z.string().optional()})),defaultValues:{input:a.filename,output:""}}),B=V("input"),U=V("output");(0,u.useEffect)(()=>(p.current||(p.current=new Worker(n.tu(new URL(n.p+n.u(951),n.b)))),!function(e,t){e.onmessage=e=>{console.info("received event from worker",e),t(e.data)},e.onerror=e=>{console.info("received error event from worker",e)}}(p.current,async e=>{if(e.success){for(let[n,r]of(i.clearFiles(e=>e.includes("/generated/")),e.result.files))await i.writeFile(n,r),function(e,t){let{filename:n,value:r}=e,i=t.Uri.file(n),a=n.endsWith(".ts")?"typescript":"yaml";if(t.editor.getModel(i)){var s;null===(s=t.editor.getModel(i))||void 0===s||s.setValue(r)}else t.editor.createModel(r,a,i)}({filename:n,value:r},t);F(t.editor.getModels().filter(e=>e.uri.path.includes("/generated/")&&i.existsSync(e.uri.path)).map(e=>e.uri.path))}k(e)}),()=>{p.current&&(p.current.terminate(),p.current=null)}),[i,t]);let z=(0,u.useCallback)(e=>M(e),[]),L=(0,u.useCallback)(e=>C(e),[]);return(0,u.useEffect)(()=>{if(!w)return;let e=t.Uri.file(c.input);t.editor.getModel(e)||(t.editor.createModel(a.content,"yaml",e),f(p.current,{type:"generate",config:c,input:a.content}));let n=t.editor.getModel(e);if(w.setModel(n),!n)return;let r=n.onDidChangeContent(()=>{console.info("input changed");let e=n.getValue();e&&f(p.current,{type:"generate",config:c,input:e})});return()=>{r.dispose()}},[t,w,c,a]),(0,u.useEffect)(()=>{let e=s.find(e=>e===B);!(!e||!D||D.isDisposed())&&(D.setValue("Loading..."),A(e).then(e=>D.setValue(e)))},[B,D,s]),(0,u.useEffect)(()=>{let e=U&&t.editor.getModel(t.Uri.file(U));!(!T||!e||e.isDisposed())&&T.getModel()!==e&&T.setModel(e)},[U,T,t]),(0,u.useEffect)(()=>{let e;if(T)return g(t,T,c.template).then(t=>{e=t}).catch(e=>{k({success:!1,loading:!1,err:Error("Failed to load typescript typings",{cause:e})})}),()=>null==e?void 0:e.dispose()},[c.template,t,T]),(0,u.useEffect)(()=>{let e=null==D?void 0:D.getValue();e&&f(p.current,{type:"generate",config:c,input:e})},[c,D]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.h3,{children:"Configuration"}),(0,r.jsx)(R,{config:c,setConfig:h}),(0,r.jsxs)("div",{className:S().editorContainer,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(l.h3,{children:"Input Specification"}),(0,r.jsx)(I,{children:(0,r.jsx)(m,{label:"Sample Specification",values:s,name:"input",control:N})}),(0,r.jsx)(x.KE,{height:"30vh",onMount:z,options:{theme:"vs-dark",minimap:{enabled:!1}}}),(0,r.jsx)(O,{editor:w}),(0,r.jsx)(P,{result:b})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.h3,{children:"Output"}),(0,r.jsx)(I,{children:(0,r.jsx)(m,{label:"Output File",values:null!=_?_:[""],name:"output",control:N})}),(0,r.jsx)(x.KE,{height:"30vh",defaultLanguage:"typescript",options:{theme:"vs-dark",minimap:{enabled:!1},domReadOnly:!0,readOnly:!0},onMount:L}),(0,r.jsx)(O,{editor:T})]})]})]})},D=()=>{let e=(0,x.dJ)(),[t]=(0,u.useState)(new b.Rj),n=c[0],[i,a]=(0,u.useState)(null);return((0,u.useEffect)(()=>{A(n).then(e=>a({filename:n,content:e}))},[n]),e&&i)?(0,r.jsx)(F,{monaco:e,webFsAdaptor:t,defaultSample:i,samples:c}):null};function N(e){return[]}let V=(0,i.e)(function(e){let t={a:"a",h1:"h1",p:"p",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{children:"Playground"}),"\n",(0,r.jsx)(t.p,{children:"Lightweight way to experiment with the different templates and configuration options from the comfort of your browser.\nSome configuration options, such as typespec support are not yet exposed, and performance in-browser is relatively poor for large specifications (eg: the Github API sample)."}),"\n",(0,r.jsxs)(t.p,{children:["See the ",(0,r.jsx)(t.a,{href:"/reference/cli-options",children:"CLI Reference"})," for details of each option, or jump over to ",(0,r.jsx)(t.a,{href:"/getting-started/quick-start",children:"quick start"})," to get started locally."]}),"\n",(0,r.jsx)(D,{})]})},"/playground",{filePath:"src/pages/playground.mdx",timestamp:1736089336e3,pageMap:a.O,frontMatter:{},title:"Playground"},"undefined"==typeof RemoteContent?N:RemoteContent.useTOC)}},e=>{var t=t=>e(e.s=t);e.O(0,[831,883,662,404,628,177,776,636,593,792],()=>t(83395)),_N_E=e.O()}]);