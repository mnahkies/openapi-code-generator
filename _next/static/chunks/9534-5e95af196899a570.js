(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9534],{13320:e=>{e.exports={container:"config-form_container__wMxrZ"}},15203:e=>{e.exports={loader:"loading-spinner_loader__iwj1w",rotation:"loading-spinner_rotation__fDCh2"}},60968:e=>{e.exports={editorContainer:"playground_editorContainer__4wS4H"}},89534:(e,t,s)=>{"use strict";s.d(t,{default:()=>P});var n=s(71857),i=s(63067),a=s(72295),r=s(90668),l=s(84046),o=s(67253),p=s(69269),u=s(74456),c=s(63981),d=s(15203),m=s.n(d);let h=()=>(0,n.jsx)("span",{className:m().loader}),g=["petstore-expanded.yaml","okta.oauth.yaml","api.github.com.yaml","stripe.yaml"];function y(e){let{field:t}=(0,u.as)(e);return(0,p.useEffect)(()=>{t.value!==e.values[0]&&e.values[0]&&!e.values.includes(t.value)&&t.onChange({target:{value:e.values[0]}})},[t.value,t.onChange,e.values]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("label",{htmlFor:t.name,children:e.label}),(0,n.jsx)("select",{id:t.name,onChange:t.onChange,value:t.value,children:e.values.map(e=>(0,n.jsx)("option",{value:e,children:e||"(default)"},e))})]})}var f=s(99435);let k=async(e,t,s)=>{let n="file:///";for(let t of(e.languages.typescript.typescriptDefaults.setCompilerOptions({...e.languages.typescript.typescriptDefaults.getCompilerOptions(),moduleResolution:e.languages.typescript.ModuleResolutionKind.NodeJs,target:e.languages.typescript.ScriptTarget.ES2020,allowSyntheticDefaultImports:!0,esModuleInterop:!0,rootDir:n}),({"typescript-angular":[],"typescript-fetch":[{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/package.json",path:"/node_modules/@nahkies/typescript-fetch-runtime/package.json"},{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/dist/main.d.ts",path:"/node_modules/@nahkies/typescript-fetch-runtime/main.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/dist/zod.d.ts",path:"/node_modules/@nahkies/typescript-fetch-runtime/zod.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/dist/joi.d.ts",path:"/node_modules/@nahkies/typescript-fetch-runtime/joi.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/dist/common.d.ts",path:"/node_modules/@nahkies/typescript-fetch-runtime/common.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-fetch-runtime@latest/dist/types.d.ts",path:"/node_modules/@nahkies/typescript-fetch-runtime/types.d.ts"}],"typescript-axios":[{uri:"https://unpkg.com/@nahkies/typescript-axios-runtime@latest/package.json",path:"/node_modules/@nahkies/typescript-axios-runtime/package.json"},{uri:"https://unpkg.com/@nahkies/typescript-axios-runtime@latest/dist/main.d.ts",path:"/node_modules/@nahkies/typescript-axios-runtime/main.d.ts"}],"typescript-koa":[{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/package.json",path:"/node_modules/@nahkies/typescript-koa-runtime/package.json"},{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/dist/server.d.ts",path:"/node_modules/@nahkies/typescript-koa-runtime/server.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/dist/errors.d.ts",path:"/node_modules/@nahkies/typescript-koa-runtime/errors.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/dist/zod.d.ts",path:"/node_modules/@nahkies/typescript-koa-runtime/zod.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/dist/joi.d.ts",path:"/node_modules/@nahkies/typescript-koa-runtime/joi.d.ts"}],"typescript-express":[{uri:"https://unpkg.com/@nahkies/typescript-express-runtime@latest/package.json",path:"/node_modules/@nahkies/typescript-express-runtime/package.json"},{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/dist/server.d.ts",path:"/node_modules/@nahkies/typescript-koa-runtime/server.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-koa-runtime@latest/dist/errors.d.ts",path:"/node_modules/@nahkies/typescript-koa-runtime/errors.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-express-runtime@latest/dist/zod.d.ts",path:"/node_modules/@nahkies/typescript-express-runtime/zod.d.ts"},{uri:"https://unpkg.com/@nahkies/typescript-express-runtime@latest/dist/joi.d.ts",path:"/node_modules/@nahkies/typescript-express-runtime/joi.d.ts"}]})[s])){let s=e.Uri.file(t.path);if(!e.editor.getModel(s)){let n=await (await fetch(t.uri)).text();console.info("createModel for ".concat(s.path)),e.editor.createModel(n,"typescript",s)}}return f.AutoTypings.create(t,{monaco:e,fileRootPath:n,sourceCache:new f.LocalStorageCache,onUpdate:e=>console.log("progress",e),onError:e=>console.error(e),dontAdaptEditorOptions:!0,preloadPackages:!0,shareCache:!0,versions:{zod:"3.24.1"}})};function x(e,t){null==e||e.postMessage(t)}function j(e){let{field:t}=(0,u.as)(e);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("label",{htmlFor:t.name,children:e.label}),(0,n.jsx)("input",{id:t.name,type:"checkbox",checked:t.value,onChange:t.onChange})]})}var v=s(13320),b=s.n(v);let S=r.Qn.pick({template:!0,schemaBuilder:!0,enableRuntimeResponseValidation:!0,enableTypedBasePaths:!0,extractInlineSchemas:!0,groupingStrategy:!0,tsAllowAny:!0,tsServerImplementationMethod:!0,enumExtensibility:!0}),_=e=>{let{config:t,setConfig:s}=e,{control:a,watch:r}=(0,u.mN)({resolver:(0,i.u)(S),defaultValues:{template:t.template,schemaBuilder:t.schemaBuilder,enableRuntimeResponseValidation:t.enableRuntimeResponseValidation,enableTypedBasePaths:t.enableTypedBasePaths,extractInlineSchemas:t.extractInlineSchemas,groupingStrategy:t.groupingStrategy,tsAllowAny:t.tsAllowAny,tsServerImplementationMethod:t.tsServerImplementationMethod,enumExtensibility:t.enumExtensibility}});return(0,p.useEffect)(()=>{let{unsubscribe:e}=r(e=>{s({...t,...e})});return()=>e()},[r,t,s]),(0,n.jsxs)("div",{className:b().container,children:[(0,n.jsx)(y,{name:"template",control:a,label:"--template",values:S.shape.template.options},"template"),(0,n.jsx)(y,{name:"schemaBuilder",control:a,label:"--schema-builder",values:S.shape.schemaBuilder.options}),(0,n.jsx)(j,{label:"--enable-runtime-response-validation",name:"enableRuntimeResponseValidation",control:a}),(0,n.jsx)(j,{label:"--enable-typed-base-paths",name:"enableTypedBasePaths",control:a}),(0,n.jsx)(j,{label:"--extract-inline-schemas",name:"extractInlineSchemas",control:a}),(0,n.jsx)(j,{label:"--ts-allow-any",name:"tsAllowAny",control:a}),(0,n.jsx)(y,{name:"tsServerImplementationMethod",control:a,label:"--ts-server-implementation-method",values:S.shape.tsServerImplementationMethod.options}),(0,n.jsx)(y,{name:"groupingStrategy",control:a,label:"--grouping-strategy",values:S.shape.groupingStrategy.options}),(0,n.jsx)(y,{name:"enumExtensibility",control:a,label:"--enum-extensibility",values:S.shape.enumExtensibility.options})]})};var w=s(60968),C=s.n(w);let M=async e=>{try{let t=await fetch("/samples/".concat(e)),s=await t.text();if(t.ok)return s;return"Failed to load sample. ".concat(s)}catch(e){return"Failed to load sample. ".concat(e instanceof Error?e.message:e)}},E={input:"/example.yaml",output:"/generated",template:"typescript-fetch",inputType:"openapi3",schemaBuilder:"zod",enableRuntimeResponseValidation:!0,extractInlineSchemas:!0,allowUnusedImports:!1,groupingStrategy:"first-tag",tsAllowAny:!1,tsCompilerOptions:{exactOptionalPropertyTypes:!1},enableTypedBasePaths:!0,filenameConvention:"kebab-case",tsServerImplementationMethod:"type",enumExtensibility:""},R=e=>{let{children:t}=e;return(0,n.jsx)("div",{style:{display:"flex",gap:"0.5rem",margin:"0.5rem 0"},children:t})},A=e=>{let{editor:t}=e,s=(0,p.useCallback)(()=>{null==t||t.trigger("fold","editor.foldAll",void 0)},[t]),i=(0,p.useCallback)(()=>{null==t||t.trigger("fold","editor.unfoldAll",void 0)},[t]);return(0,n.jsx)("div",{style:{display:"flex",flexDirection:"column",marginTop:"0.5rem",alignItems:"center"},children:(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"row",gap:"1rem"},children:[(0,n.jsx)("button",{type:"button",onClick:s,children:"Fold All"}),(0,n.jsx)("button",{type:"button",onClick:i,children:"Unfold All"})]})})},I=e=>{let{result:t}=e;if(!t||t.loading)return(0,n.jsx)(l.P,{type:"info",emoji:"✅",children:(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Running generation"}),(0,n.jsx)("br",{}),(0,n.jsx)(h,{})]})});if(t.success){let{elapsed:e}=t.result;return(0,n.jsx)(l.P,{type:"info",emoji:"✅",children:(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Generation success"}),(0,n.jsx)("br",{}),"Generation ran in ",e,"ms"]})})}if(!t.success){let e=t.err,s=t.err.cause;return(0,n.jsx)(l.P,{type:"warning",emoji:"⚠️",children:(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:e.message}),(0,n.jsx)("br",{}),s instanceof Error?"Details: ".concat(s.message):null]})})}return null},F=e=>{let{monaco:t,webFsAdaptor:r,defaultSample:l,samples:d}=e,m=(0,o.R)(),h=(0,p.useRef)(null),[g,f]=(0,p.useState)(E),[j,v]=(0,p.useState)(null),[b,S]=(0,p.useState)(),[w,F]=(0,p.useState)(),[P,V]=(0,p.useState)([]),B=t.editor.getModel(t.Uri.file(g.input)),{control:D,watch:O}=(0,u.mN)({resolver:(0,i.u)(c.Ik({input:c.Yj(),output:c.Yj().optional()})),defaultValues:{input:l.filename,output:""}}),T=O("input"),U=O("output");(0,p.useEffect)(()=>(h.current||(h.current=new Worker(s.tu(new URL(s.p+s.u(6086),s.b)))),!function(e,t){e.onmessage=e=>{console.info("received event from worker",e),t(e.data)},e.onerror=e=>{console.info("received error event from worker",e)}}(h.current,async e=>{if(e.success){for(let[s,n]of(r.clearFiles(e=>e.includes("/generated/")),e.result.files))await r.writeFile(s,n),function(e,t){let{filename:s,value:n}=e,i=t.Uri.file(s),a=s.endsWith(".ts")?"typescript":"yaml";if(t.editor.getModel(i)){var r;null==(r=t.editor.getModel(i))||r.setValue(n)}else t.editor.createModel(n,a,i)}({filename:s,value:n},t);V(t.editor.getModels().filter(e=>e.uri.path.includes("/generated/")&&r.existsSync(e.uri.path)).map(e=>e.uri.path))}v(e)}),()=>{h.current&&(h.current.terminate(),h.current=null)}),[r,t]);let z=(0,p.useCallback)(e=>S(e),[]),N=(0,p.useCallback)(e=>F(e),[]);return(0,p.useEffect)(()=>{if(!b)return;let e=t.Uri.file(g.input);t.editor.getModel(e)||(t.editor.createModel(l.content,"yaml",e),x(h.current,{type:"generate",config:g,input:l.content}));let s=t.editor.getModel(e);if(b.setModel(s),!s)return;let n=s.onDidChangeContent(()=>{console.info("input changed");let e=s.getValue();e&&x(h.current,{type:"generate",config:g,input:e})});return()=>{n.dispose()}},[t,b,g,l]),(0,p.useEffect)(()=>{let e=d.find(e=>e===T);!e||!B||B.isDisposed()||(B.setValue("Loading..."),M(e).then(e=>B.setValue(e)))},[T,B,d]),(0,p.useEffect)(()=>{let e=U&&t.editor.getModel(t.Uri.file(U));!w||!e||e.isDisposed()||w.getModel()!==e&&w.setModel(e)},[U,w,t]),(0,p.useEffect)(()=>{let e;if(w)return k(t,w,g.template).then(t=>{e=t}).catch(e=>{v({success:!1,loading:!1,err:Error("Failed to load typescript typings",{cause:e})})}),()=>null==e?void 0:e.dispose()},[g.template,t,w]),(0,p.useEffect)(()=>{let e=null==B?void 0:B.getValue();e&&x(h.current,{type:"generate",config:g,input:e})},[g,B]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(m.h3,{children:"Configuration"}),(0,n.jsx)(_,{config:g,setConfig:f}),(0,n.jsxs)("div",{className:C().editorContainer,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(m.h3,{children:"Input Specification"}),(0,n.jsx)(R,{children:(0,n.jsx)(y,{label:"Sample Specification",values:d,name:"input",control:D})}),(0,n.jsx)(a.KE,{height:"30vh",onMount:z,options:{theme:"vs-dark",minimap:{enabled:!1}}}),(0,n.jsx)(A,{editor:b}),(0,n.jsx)(I,{result:j})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(m.h3,{children:"Output"}),(0,n.jsx)(R,{children:(0,n.jsx)(y,{label:"Output File",values:null!=P?P:[""],name:"output",control:D})}),(0,n.jsx)(a.KE,{height:"30vh",defaultLanguage:"typescript",options:{theme:"vs-dark",minimap:{enabled:!1},domReadOnly:!0,readOnly:!0},onMount:N}),(0,n.jsx)(A,{editor:w})]})]})]})},P=()=>{let e=(0,a.dJ)(),[t]=(0,p.useState)(new r.Rj),s=g[0],[i,l]=(0,p.useState)(null);return((0,p.useEffect)(()=>{M(s).then(e=>l({filename:s,content:e}))},[s]),e&&i)?(0,n.jsx)(F,{monaco:e,webFsAdaptor:t,defaultSample:i,samples:g}):null}},90668:(e,t,s)=>{"use strict";t.Rj=t.Qn=void 0;s(86800),s(62279),s(36664),s(62307),s(56587),s(66302);var n=s(18798);Object.defineProperty(t,"Qn",{enumerable:!0,get:function(){return n.configSchema}}),s(15915);var i=s(58875);Object.defineProperty(t,"Rj",{enumerable:!0,get:function(){return i.WebFsAdaptor}}),s(17239),s(4551),s(26095)}}]);