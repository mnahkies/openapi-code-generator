/** AUTOGENERATED - DO NOT EDIT **/
/* tslint:disable */
/* eslint-disable */

import KoaRouter, {type RouterContext} from "@koa/router"
import {RequestInputType} from "@nahkies/typescript-koa-runtime/errors"
import {
  handleImplementationError,
  handleResponse,
  type KoaRuntimeResponder,
  KoaRuntimeResponse,
  type Params,
  type Res,
  type SkipResponse,
  type StatusCode,
} from "@nahkies/typescript-koa-runtime/server"
import {
  parseRequestInput,
  responseValidationFactory,
} from "@nahkies/typescript-koa-runtime/zod-v4"
import type {Next} from "koa"
import {z} from "zod/v4"
import type {
  t_GetHeadersRequest200Response,
  t_GetHeadersRequestRequestHeaderSchema,
  t_GetHeadersUndeclared200Response,
} from "../models.ts"
import {
  PermissiveBoolean,
  s_GetHeadersRequest200Response,
  s_GetHeadersUndeclared200Response,
} from "../schemas.ts"

export type GetHeadersUndeclaredResponder = {
  with200(): KoaRuntimeResponse<t_GetHeadersUndeclared200Response>
} & KoaRuntimeResponder

export type GetHeadersUndeclared = (
  params: Params<void, void, void, void>,
  respond: GetHeadersUndeclaredResponder,
  ctx: RouterContext,
  next: Next,
) => Promise<
  | KoaRuntimeResponse<unknown>
  | Res<200, t_GetHeadersUndeclared200Response>
  | typeof SkipResponse
>

export type GetHeadersRequestResponder = {
  with200(): KoaRuntimeResponse<t_GetHeadersRequest200Response>
} & KoaRuntimeResponder

export type GetHeadersRequest = (
  params: Params<void, void, void, t_GetHeadersRequestRequestHeaderSchema>,
  respond: GetHeadersRequestResponder,
  ctx: RouterContext,
  next: Next,
) => Promise<
  | KoaRuntimeResponse<unknown>
  | Res<200, t_GetHeadersRequest200Response>
  | typeof SkipResponse
>

export type RequestHeadersImplementation = {
  getHeadersUndeclared: GetHeadersUndeclared
  getHeadersRequest: GetHeadersRequest
}

export function createRequestHeadersRouter(
  implementation: RequestHeadersImplementation,
): KoaRouter {
  const router = new KoaRouter()

  const getHeadersUndeclaredResponseValidator = responseValidationFactory(
    [["200", s_GetHeadersUndeclared200Response]],
    undefined,
  )

  router.get(
    "getHeadersUndeclared",
    "/headers/undeclared",
    async (ctx, next) => {
      const input = {
        params: undefined,
        query: undefined,
        body: undefined,
        headers: undefined,
      }

      const responder = {
        with200() {
          return new KoaRuntimeResponse<t_GetHeadersUndeclared200Response>(200)
        },
        withStatus(status: StatusCode) {
          return new KoaRuntimeResponse(status)
        },
      }

      await implementation
        .getHeadersUndeclared(input, responder, ctx, next)
        .catch(handleImplementationError)
        .then(handleResponse(ctx, next, getHeadersUndeclaredResponseValidator))
    },
  )

  const getHeadersRequestRequestHeaderSchema = z.object({
    "route-level-header": z.string().optional(),
    "number-header": z.coerce.number().optional(),
    "boolean-header": PermissiveBoolean.optional(),
    "second-boolean-header": PermissiveBoolean.optional(),
    authorization: z.string().optional(),
  })

  const getHeadersRequestResponseValidator = responseValidationFactory(
    [["200", s_GetHeadersRequest200Response]],
    undefined,
  )

  router.get("getHeadersRequest", "/headers/request", async (ctx, next) => {
    const input = {
      params: undefined,
      query: undefined,
      body: undefined,
      headers: parseRequestInput(
        getHeadersRequestRequestHeaderSchema,
        Reflect.get(ctx.request, "headers"),
        RequestInputType.RequestHeader,
      ),
    }

    const responder = {
      with200() {
        return new KoaRuntimeResponse<t_GetHeadersRequest200Response>(200)
      },
      withStatus(status: StatusCode) {
        return new KoaRuntimeResponse(status)
      },
    }

    await implementation
      .getHeadersRequest(input, responder, ctx, next)
      .catch(handleImplementationError)
      .then(handleResponse(ctx, next, getHeadersRequestResponseValidator))
  })

  return router
}

export {createRequestHeadersRouter as createRouter}
export type {RequestHeadersImplementation as Implementation}
