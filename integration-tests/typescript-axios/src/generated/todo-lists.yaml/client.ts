/** AUTOGENERATED - DO NOT EDIT **/
/* tslint:disable */
/* eslint-disable */

import { t_CreateUpdateTodoList, t_Error, t_TodoList } from "./models"
import { s_Error, s_TodoList } from "./schemas"
import {
  AbstractAxiosClient,
  AbstractAxiosConfig,
} from "@nahkies/typescript-axios-runtime/main"
import axios, { AxiosRequestConfig, AxiosResponse } from "axios"
import { z } from "zod"

export class ApiClient extends AbstractAxiosClient {
  constructor(config: AbstractAxiosConfig) {
    super(config)
  }

  async getTodoLists(
    p: {
      created?: string
      status?: "incomplete" | "complete"
    } = {},
    timeout?: number,
    opts?: AxiosRequestConfig,
  ): Promise<AxiosResponse<t_TodoList[]>> {
    const url = `/list`
    const query = this._query({ created: p["created"], status: p["status"] })

    const res = await this.axios.request({
      url: url + query,
      baseURL: this.basePath,
      method: "GET",
      timeout,
      ...(opts ?? {}),
    })

    return { ...res, data: z.array(s_TodoList).parse(res.data) }
  }

  async getTodoListById(
    p: {
      listId: string
    },
    timeout?: number,
    opts?: AxiosRequestConfig,
  ): Promise<AxiosResponse<t_TodoList>> {
    const url = `/list/${p["listId"]}`

    const res = await this.axios.request({
      url: url,
      baseURL: this.basePath,
      method: "GET",
      timeout,
      ...(opts ?? {}),
    })

    return { ...res, data: s_TodoList.parse(res.data) }
  }

  async updateTodoListById(
    p: {
      listId: string
      requestBody: t_CreateUpdateTodoList
    },
    timeout?: number,
    opts?: AxiosRequestConfig,
  ): Promise<AxiosResponse<t_TodoList>> {
    const url = `/list/${p["listId"]}`
    const headers = this._headers({ "Content-Type": "application/json" })
    const body = JSON.stringify(p.requestBody)

    const res = await this.axios.request({
      url: url,
      baseURL: this.basePath,
      method: "PUT",
      headers,
      data: body,
      timeout,
      ...(opts ?? {}),
    })

    return { ...res, data: s_TodoList.parse(res.data) }
  }

  async deleteTodoListById(
    p: {
      listId: string
    },
    timeout?: number,
    opts?: AxiosRequestConfig,
  ): Promise<AxiosResponse<void>> {
    const url = `/list/${p["listId"]}`

    const res = await this.axios.request({
      url: url,
      baseURL: this.basePath,
      method: "DELETE",
      timeout,
      ...(opts ?? {}),
    })

    return { ...res, data: z.undefined().parse(res.data) }
  }

  async getTodoListItems(
    p: {
      listId: string
    },
    timeout?: number,
    opts?: AxiosRequestConfig,
  ): Promise<
    AxiosResponse<{
      completedAt?: string
      content: string
      createdAt: string
      id: string
    }>
  > {
    const url = `/list/${p["listId"]}/items`

    const res = await this.axios.request({
      url: url,
      baseURL: this.basePath,
      method: "GET",
      timeout,
      ...(opts ?? {}),
    })

    return {
      ...res,
      data: z
        .object({
          id: z.string(),
          content: z.string(),
          createdAt: z.string().datetime({ offset: true }),
          completedAt: z.string().datetime({ offset: true }).optional(),
        })
        .parse(res.data),
    }
  }

  async createTodoListItem(
    p: {
      listId: string
      requestBody: {
        completedAt?: string
        content: string
        id: string
      }
    },
    timeout?: number,
    opts?: AxiosRequestConfig,
  ): Promise<AxiosResponse<void>> {
    const url = `/list/${p["listId"]}/items`
    const headers = this._headers({ "Content-Type": "application/json" })
    const body = JSON.stringify(p.requestBody)

    const res = await this.axios.request({
      url: url,
      baseURL: this.basePath,
      method: "POST",
      headers,
      data: body,
      timeout,
      ...(opts ?? {}),
    })

    return { ...res, data: z.undefined().parse(res.data) }
  }
}
