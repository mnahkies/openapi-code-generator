/** AUTOGENERATED - DO NOT EDIT **/
/* tslint:disable */
/* eslint-disable */

import {
  OpenAPIRuntimeError,
  RequestInputType,
} from "@nahkies/typescript-nextjs-runtime/errors"
import {
  type OpenAPIRuntimeResponder,
  OpenAPIRuntimeResponse,
  type Params,
  type StatusCode,
  type StatusCode5xx,
} from "@nahkies/typescript-nextjs-runtime/server"
import {parseRequestInput} from "@nahkies/typescript-nextjs-runtime/zod-v4"
import type {NextRequest} from "next/server"
import {z} from "zod/v4"
import type {
  t_CreateTodoListItemParamSchema,
  t_CreateTodoListItemRequestBody,
  t_GetTodoListItemsParamSchema,
} from "../../../models"
import {s_CreateTodoListItemRequestBody} from "../../../schemas"

// /list/{listId}/items
export type GetTodoListItemsResponder = {
  with200(): OpenAPIRuntimeResponse<{
    completedAt?: string
    content: string
    createdAt: string
    id: string
  }>
  withStatusCode5xx(status: StatusCode5xx): OpenAPIRuntimeResponse<{
    code: string
    message: string
  }>
} & OpenAPIRuntimeResponder

export type GetTodoListItems = (
  params: Params<t_GetTodoListItemsParamSchema, void, void, void>,
  respond: GetTodoListItemsResponder,
  request: NextRequest,
) => Promise<OpenAPIRuntimeResponse<unknown>>

export type CreateTodoListItemResponder = {
  with204(): OpenAPIRuntimeResponse<void>
} & OpenAPIRuntimeResponder

export type CreateTodoListItem = (
  params: Params<
    t_CreateTodoListItemParamSchema,
    void,
    t_CreateTodoListItemRequestBody,
    void
  >,
  respond: CreateTodoListItemResponder,
  request: NextRequest,
) => Promise<OpenAPIRuntimeResponse<unknown>>

const getTodoListItemsParamSchema = z.object({listId: z.string()})

export const _GET =
  (
    implementation: GetTodoListItems,
    onError: (err: unknown) => Promise<Response>,
  ) =>
  async (
    request: NextRequest,
    {params}: {params: Promise<unknown>},
  ): Promise<Response> => {
    try {
      const input = {
        params: parseRequestInput(
          getTodoListItemsParamSchema,
          await params,
          RequestInputType.RouteParam,
        ),
        // todo: this swallows repeated parameters
        query: undefined,
        body: undefined,
        headers: undefined,
      }

      const responder = {
        with200() {
          return new OpenAPIRuntimeResponse<{
            completedAt?: string
            content: string
            createdAt: string
            id: string
          }>(200)
        },
        withStatusCode5xx(status: StatusCode5xx) {
          return new OpenAPIRuntimeResponse<{
            code: string
            message: string
          }>(status)
        },
        withStatus(status: StatusCode) {
          return new OpenAPIRuntimeResponse(status)
        },
      }

      const res = await implementation(input, responder, request)
        .then(OpenAPIRuntimeResponse.unwrap)
        .catch(OpenAPIRuntimeError.wrapped(OpenAPIRuntimeError.HandlerError))

      return res
    } catch (err) {
      return await onError(err)
    }
  }

const createTodoListItemParamSchema = z.object({listId: z.string()})

export const _POST =
  (
    implementation: CreateTodoListItem,
    onError: (err: unknown) => Promise<Response>,
  ) =>
  async (
    request: NextRequest,
    {params}: {params: Promise<unknown>},
  ): Promise<Response> => {
    try {
      const input = {
        params: parseRequestInput(
          createTodoListItemParamSchema,
          await params,
          RequestInputType.RouteParam,
        ),
        // todo: this swallows repeated parameters
        query: undefined,
        body: parseRequestInput(
          s_CreateTodoListItemRequestBody,
          await request.json(),
          RequestInputType.RequestBody,
        ),
        headers: undefined,
      }

      const responder = {
        with204() {
          return new OpenAPIRuntimeResponse<void>(204)
        },
        withStatus(status: StatusCode) {
          return new OpenAPIRuntimeResponse(status)
        },
      }

      const res = await implementation(input, responder, request)
        .then(OpenAPIRuntimeResponse.unwrap)
        .catch(OpenAPIRuntimeError.wrapped(OpenAPIRuntimeError.HandlerError))

      return res
    } catch (err) {
      return await onError(err)
    }
  }
